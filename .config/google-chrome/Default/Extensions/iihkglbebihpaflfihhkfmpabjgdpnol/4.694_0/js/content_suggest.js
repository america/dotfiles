!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s=1)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RSuggest=void 0;var i=s(3);
/**
 * @license suggest.js 2.0.1
 * Copyright (c) @year Rakuten.Inc
 * Date : @compressesDate
 */const n=new RegExp("^[\\s"+unescape("ã€€")+"]+");e.RSuggest=class{constructor(){this.cachedResults={},this.backup="",this.lastInput="",this.respInput="",this.sggstSelectNum=-1,this.usingChar="",this.mouseDownWasAtElem=null,this.mouseState=0,this.maxIndex=0,this.index=-1,this.viewEvent=null,this.ajaxEvent=null,this.suggestDivPos=null,this.submitWay=0,this.blackList=[],this.userInteractedWithInput=!1}preInit(){return this.suggestDivPos=this.input.parentElement,!0}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}initFailure(){this.input.setAttribute("autocomplete","")}createSuggestDiv(){this.suggest=document.createElement("div"),this.suggest.setAttribute("id","suggestbox"),this.suggest.style.display="none",this.suggestDivPos.appendChild(this.suggest);for(let t=0;t<this.count;++t)this.addNewRow()}addNewRow(){const t=document.createElement("span");t.setAttribute("class",this.cssKeyword),t.addEventListener("mouseup",t=>{1==t.which&&this.mouseDownWasAtElem==t.currentTarget&&(this.mouseState=2,this.input.blur(),this.input.value=t.currentTarget.textContent,this.sggstSelectNum=this.index,this.usingChar=t.currentTarget.textContent,this.submitWay=2,this.onRowKeywordLaunch(t.currentTarget),this.suggest.style.display="none",setTimeout(()=>{this.button.click()},10),this.eventStop())}),t.addEventListener("mousedown",t=>{1==t.which?(this.mouseDownWasAtElem=t.currentTarget,this.mouseState=1,t.preventDefault()):this.input.blur()}),t.addEventListener("mouseover",t=>{this.over(t.currentTarget)}),t.addEventListener("mouseout",t=>{this.mouseState=0});const e=document.createElement("div");e.setAttribute("class",this.cssNoSelect),e.appendChild(t);const s=document.createElement("div");return s.appendChild(e),this.suggest.appendChild(s),s}onRowKeywordLaunch(t){}onEmptyInput(){this.hide()}doDisplayOrHideIfEmpty(){this.maxIndex>0?this.suggest.style.display="block":this.hide()}search(){const t=this.input.value;if(""==t||0==t.replace(n,"").length)return this.usingChar="",this.sggstSelectNum=-1,this.onEmptyInput(0==this.lastInput.length),void(this.lastInput="");t!=this.lastInput&&(this.lastInput=t,this.backup=t,clearTimeout(this.ajaxEvent),this.ajaxEvent=setTimeout(()=>{const t=this.lastInput.replace(n,"");if(0!=t.length)if(Object.prototype.hasOwnProperty.call(this.cachedResults,t))this.show(this.cachedResults[t],t,!0);else{let e=this.baseUrl+"?"+this.paramSuggestid+"="+this.suggestId+"&"+this.paramInput+"="+encodeURIComponent(t)+"&"+this.paramCallback+"=json";this.exParam&&(e+="&"+this.exParam),this.read(e,t)}},10))}read(t,e){(0,i.ajax)({url:t,cache:!0,timeout:1e4,scriptCharset:this.encoding,success:t=>{if(e){let s={};if(t&&t.length>1)try{s=JSON.parse(t)}catch(t){}this.show(s,e,!1)}}})}eventStart(){clearInterval(this.viewEvent),this.viewEvent=setInterval(()=>{this.search()},100)}eventStop(){clearInterval(this.viewEvent),setTimeout(()=>{this.hide()},10)}show(t,e,s){if(!s){if(void 0===t.status||"OK"!=t.status)return this.maxIndex=0,void this.doDisplayOrHideIfEmpty();this.cachedResults[e]=t}if(this.lastInput.replace(n,"")!=e)return;let i=t.suggestions.length;if(0==i)return this.maxIndex=0,void this.doDisplayOrHideIfEmpty();i>this.count&&(i=this.count),this.maxIndex=i,this.index=-1,this.respInput=this.lastInput;const a=this.suggest.getElementsByClassName(this.cssKeyword);for(let e=0;e<a.length;++e){const s=a[e];if(s.parentElement.setAttribute("class",this.cssNoSelect),e<i){const i=t.suggestions[e].terms,n=this.lastInput.toLowerCase();if(i.startsWith(n)){let t="<strong>"+this.escapeHtml(n)+"</strong>";t+=this.escapeHtml(i.substr(n.length)),s.innerHTML=t}else s.textContent=i;s.parentElement.style.display="block"}else s.parentElement.style.display="none"}this.doDisplayOrHideIfEmpty()}hide(t){t&&0!=this.lastInput.length&&(this.input.value=this.backup,this.sggstSelectNum=-1,this.usingChar=""),this.lastInput=this.input.value,this.suggest.style.display="none"}select(t){const e=this.suggest.getElementsByClassName(this.cssKeyword);for(let t=0;t<e.length;++t){const s=e[t];s.parentElement.classList.remove(this.cssSelect),s.parentElement.classList.add(this.cssNoSelect)}let s=null;if(this.index>=0&&this.index<this.maxIndex&&this.index<e.length&&(s=e[this.index],s.parentElement.classList.remove(this.cssNoSelect),s.parentElement.classList.add(this.cssSelect)),t){let t="";s?(t=s.textContent,this.usingChar=t,this.sggstSelectNum=this.index):(t=this.backup,this.usingChar="",this.sggstSelectNum=-1),this.input.value=t,this.lastInput=t}}up(){0!=this.maxIndex&&(this.index<0&&(this.index=this.maxIndex),"block"==this.suggest.style.display?(this.index--,this.select(!0)):this.respInput==this.lastInput&&(this.select(),this.suggest.style.display="block"))}down(){0!=this.maxIndex&&(this.index>=this.maxIndex&&(this.index=-1),"block"==this.suggest.style.display?(this.index++,this.select(!0)):this.respInput==this.lastInput&&(this.select(),this.suggest.style.display="block"))}over(t){const e=this.suggest.getElementsByClassName(this.cssKeyword);this.index=Array.prototype.indexOf.call(e,t),this.select()}jump(){const t=this.isUsingInputChars();this.sendSubmitLog(t)}sendSubmitLog(t){const e=this.input.value.replace(n,"");let s=this.baseUrl+"/"+this.submitLogCommand+"?"+this.paramSuggestid+"="+this.suggestId+"&"+this.paramCollection+"="+this.col+"&"+this.paramReqid+"="+this.sggstReqid+"&"+this.paramSelectNum+"="+this.sggstSelectNum+"&"+this.paramSelect+"="+this.usingChar+"&"+this.paramSuggestUse+"="+t+"&"+this.paramSubmitWay+"="+this.submitWay+"&"+this.paramInput+"="+encodeURIComponent(e)+"&"+this.paramCallback+"="+this.paramCallback;this.sendFormParam,this.exParam&&(s+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam)),this.read(s)}isUsingInputChars(){return this.usingChar.length>0&&this.input.value.startsWith(this.usingChar)}isUserAgentGood(){const t=navigator.userAgent.toLowerCase();for(let e of this.blackList){if(null!=new RegExp("("+e+")").exec(t))return!1}return!0}init(){if(this.config=document.getElementById("sggstConfig"),this.input=document.getElementById(this.config.getAttribute("input")),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("maxlength","2048"),!this.preInit())return void this.initFailure();try{this.form=document.getElementById(this.config.getAttribute("form")),this.button=document.getElementById(this.config.getAttribute("button")),this.baseUrl=this.config.getAttribute("baseUrl"),this.col=this.config.getAttribute("col"),this.suggestId=this.config.getAttribute("suggestId"),this.encoding=this.config.getAttribute("encoding")}catch(t){}const t=function(t){return"string"!=typeof t||0==t.length};this.form&&this.button&&!t(this.baseUrl)&&!t(this.col)&&!t(this.suggestId)&&!t(this.encoding)&&this.isUserAgentGood()&&this.input.parentElement.classList.contains("sggstInputWrap")?(this.exParam=this.config.getAttribute("exParam"),this.sendFormParam="1"==this.config.getAttribute("sendFormParam"),this.count=10,this.cssSelect="sggstSelect",this.cssNoSelect="sggstNoselect",this.cssKeyword="sggstKeyword",this.paramInput="q",this.paramCollection="cl",this.paramSuggestid="sid",this.paramSuggestUse="su",this.paramSelectNum="sn",this.paramFormParam="fp",this.paramReqid="rid",this.sggstReqid=Math.floor(1e10*Math.random()),this.paramSelect="ss",this.searchCommand="suggest",this.submitLogCommand="submit",this.paramSubmitWay="sw",this.paramCallback="format",this.paramExParam="ex",this.createSuggestDiv(),this.input.addEventListener("mousedown",t=>{this.userInteractedWithInput=!0}),this.input.addEventListener("keydown",t=>{switch(this.userInteractedWithInput=!0,t.keyCode){case 40:this.down();break;case 38:this.up();break;case 9:this.hide();break;case 27:this.hide(!0),t.preventDefault();break;case 13:this.submitWay=1,this.onRowKeywordLaunch(),this.suggest.style.display="none",setTimeout(()=>{this.button.click()},10),this.eventStop(),t.preventDefault()}}),this.input.addEventListener("focus",()=>{this.lastInput=this.input.value,this.backup=this.lastInput,this.eventStart()}),this.input.addEventListener("blur",()=>{0==this.mouseState?this.eventStop():1==this.mouseState&&(this.input.focus(),this.mouseState=0)}),this.button.addEventListener("click",t=>{this.jump()}),document.activeElement==this.input&&(this.input.blur(),this.input.focus())):this.initFailure()}}},function(t,e,s){s(2),t.exports=s(0)},function(t,e,s){"use strict";var i=s(0);class n extends i.RSuggest{constructor(){super(),this.blackList=["iphone","ipod","ipad","android"]}}(new n).init()},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AJAX_REQUEST_VERB=void 0,e.ajax=function(t){let e=new XMLHttpRequest;const s=Object.prototype.hasOwnProperty.call(t,"type")?t.type:n.GET;e.open(s,t.url,!0),Object.prototype.hasOwnProperty.call(t,"dataType")&&(e.responseType=t.dataType);Object.prototype.hasOwnProperty.call(t,"timeout")?e.timeout=t.timeout:i.timeout>0&&(e.timeout=i.timeout);e.onreadystatechange=function(){4==e.readyState&&(2==Math.floor(e.status/100)&&e.response?Object.prototype.hasOwnProperty.call(t,"success")&&t.success(e.response):Object.prototype.hasOwnProperty.call(t,"error")&&t.error())},e.send(Object.prototype.hasOwnProperty.call(t,"data")?t.data:null)},e.ajaxSetup=function(t){Object.prototype.hasOwnProperty.call(t,"timeout")&&(i.timeout=t.timeout)};let i={timeout:0};const n={GET:"GET",POST:"POST"};e.AJAX_REQUEST_VERB=n}]);
//# sourceMappingURL=content_suggest.js.map