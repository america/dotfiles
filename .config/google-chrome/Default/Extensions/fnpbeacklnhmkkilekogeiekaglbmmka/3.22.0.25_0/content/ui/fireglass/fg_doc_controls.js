!function(t){"use strict";(t.FG=t.FG||{}).popupControls=function(t,o){let n=t.utils.isNil,a=t.utils.isntNil,r=t.utils.isString,d=t.extensionAdapter,i=o.config,u={},c=null,l=o.config.add_dock_max_timeout;u.initDocument=()=>{var t;o.helpers.get_dock_timeout(o.config.add_dock_max_timeout,function(t,e){l=e}),n(u.el_showhide)&&((t=document.getElementById("showhide")).addEventListener("click",function(t){o.helpers.isTrustedEvent(t)&&u._updateCtrlState(null)}),u.el_showhide=t),a(u.sessionInfo)&&((t=u.sessionInfo).hasOwnProperty("urlCategory")&&i.dockConfig.urlCategory.onlineBanking===t.urlCategory&&t.hasOwnProperty("sslStatus")&&i.dockConfig.sslStatus.secure===t.sslStatus?document.body.setAttribute("category","banking"):document.body.setAttribute("category","general")),n(u.state)&&(u.state="expanded"),document.body.setAttribute("state",u.state),a(u.ctrl)&&document.body.setAttribute("ctrl",u.ctrl)},u.updateDocument=()=>{a(u.state)&&document.body.setAttribute("state",u.state)},u._updateCtrlState=t=>{n(t)&&(e=document.body.getAttribute("state"),t=n(e)||"expanded"===e?"collapsed":"expanded");var e={},t=("expanded"===t?e.remove=["collapsed"]:e.add=["collapsed"],document.body.setAttribute("state",t),{attributes:{state:t},styles:e});u._sendMessage(i.docControls.EVENT_ID,"dock_showhide",{fgdock_iframe:t,fgdoccontrols_iframe:t,fgdock_iframe_top:t,fgdock_iframe_left:t,fgdock_iframe_right:t},null)},u._sendMessage=(t,e,s,o)=>{d.sendMessage({type:"fg_message_proxy",id:i.uiMessageProxy.EVENT_ID,realId:t,data:{ctrl_id:e,elements:s,evt_type:o}})},u._onAttributeChange=function(t,e){for(var s of t)"attributes"===s.type&&"state"===s.attributeName&&("expanded"===s.target.getAttribute("state")?c=o.helpers.reset_timer(c,l,u._updateCtrlState):o.helpers.clear_timer(c))},u._attributeObserver=new MutationObserver(u._onAttributeChange),u._attributeObserver.observe(document.getElementById("fgdoc_controls_body"),{attributes:!0});const _=d.getExtensionURL("");return u._msgEventProc=function(t){var e=t.data;if(!n(e)){var s,t=e.origin;if(0!=r(t)&&t===_)switch(e.msg_type){case"fg_doc_init":u.sessionInfo=e.session,u.state=e.state,u.ctrl=e.ctrl_type,u.initDocument();break;case"fg_dock_mouse_evt":e.evt_type===i.dockMouseEvent.eventType.mouseEnter?o.helpers.clear_timer(c):e.evt_type===i.dockMouseEvent.eventType.mouseLeave&&(s=document.getElementById("fgdoc_controls_body"),a(s))&&"expanded"===s.getAttribute("state")&&(c=o.helpers.reset_timer(c,l,u._updateCtrlState))}}},window.addEventListener("message",u._msgEventProc,!1),window.addEventListener("load",function(){setTimeout(function(){n(c)&&u._updateCtrlState("expanded")},i.add_dock_max_timeout)},!1),u}(t.SymBfw,t.FG)}(this);