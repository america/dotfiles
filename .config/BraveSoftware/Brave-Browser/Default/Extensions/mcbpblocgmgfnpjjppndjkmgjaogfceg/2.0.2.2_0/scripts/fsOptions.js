/**
* @license FireShot - Webpage Screenshots and Annotations
* Copyright (C) 2007-2024 Evgeny Vokilsus (contacts@getfireshot.com)
*/

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="16d4182f-4fb1-57e7-b52c-b17381576450")}catch(e){}}();
(()=>{var C={P:0,b:1,ee:2,te:3,ne:4,re:5,ie:7,he:8,u:10,oe:11,E:12,pe:13,me:100,ge:101,D:0,R:1,N:2,se:3,m:4,ye:268435456,M:8192,F:"lastAction",L:"lastMode",f:"enableAPI",B:"fsDebug",S:"errorReporting",I:"notifyOnUpdates",ve:!1,_e:"disableWASMWorker",j:"allTabsCaptureOnlyVisiblePart",i:"pluginProMode",g:"registeredMode",be:"curVersion",we:"curVersion1",e:"filenameTemplate",t:"filenameNumber",o:"filenameNumberPadCheck",a:"filenameNumberPadValue",c:"filenameMaxLen",k:"contextMenuIntegration",K:"pageScrollSpeedValue",U:"allowInfiniteScrolling",H:"sendUsageDataToGA",T:"newTabIsNextToSource",W:"screenshotDelay",V:"defaultFolderLite",ae:"FireShot",z:"openFolderAfterSavingLite",G:"noFilenamePrompt",Y:"closeTabAfterSavingLite",Ee:"batchModePrefs",C:"historyRetainPeriod",Se:"notifyOnUpdates",ce:"nativeFetchErrorCntr-",Ie:"uCheck",xe:"uEmit",ke:"https://ssl.getfireshot.com/images/api/utm.gif?dummy:",Te:"canBeCapturedBetterNextShow",q:"errorFilter",ue:"https://ssl.getfireshot.com/sentry-filter-%VERSION%.csv",J:"onlyLite",Ce:"nativeInstall",Oe:"userLikedFireShot",Ae:"userRatedFireShot",Pe:"resultPageShown",De:"WASMErrorReported",Re:"nextAdShownTime",Ne:"firstSaveDuringSession",O:"guid",Me:1296e6,Fe:2592e5,Le:432e5,$e:1e4,X:"png",le:"queuedBadgeURL.1",Be:"showSelectionHint.1",je:"advancedFeaturesAvailable",Ke:"showAdvertising",Ue:"betaPreviewWarningExpanded",He:"betaPreviewCompactMode",We:"PDFOptionsEverDisplayed",Q:"regUser",v:"regKey",Ve:"taskProgressValue",ze:"https://ssl.getfireshot.com/images/api/chromefeatures.gif?dummy:",A:"FireShot Capture %n - %t - %e",Ge:"https://getfireshot.com/downloads/%VERSION%/fireshot-chrome-plugin.exe",fe:"https://screenshot-program.com/fireshot/crash_report.php",_:"captureState",p:"nativeHostReady",de:"resumeMenuEnabled",Z:0,Ye:1,qe:2,Je:4,Xe:8,Qe:16};var Bs=function(e){let t=Object.prototype.toString;function i(n){switch(t.call(n)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return S(n,Error)}}function o(n,r){return t.call(n)===`[object ${r}]`}function a(n){return o(n,"ErrorEvent")}function c(n){return o(n,"DOMError")}function l(n){return o(n,"DOMException")}function p(n){return o(n,"String")}function h(n){return typeof n=="object"&&n!==null&&"__sentry_template_string__"in n&&"__sentry_template_values__"in n}function g(n){return n===null||h(n)||typeof n!="object"&&typeof n!="function"}function b(n){return o(n,"Object")}function y(n){return typeof Event<"u"&&S(n,Event)}function w(n){return typeof Element<"u"&&S(n,Element)}function R(n){return o(n,"RegExp")}function _(n){return!!(n&&n.then&&typeof n.then=="function")}function E(n){return b(n)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n}function S(n,r){try{return n instanceof r}catch{return!1}}function k(n){return!!(typeof n=="object"&&n!==null&&(n.__isVue||n._isVue))}function x(n,r=0){return typeof n!="string"||r===0||n.length<=r?n:`${n.slice(0,r)}...`}function A(n,r){if(!Array.isArray(n))return"";let s=[];for(let u=0;u<n.length;u++){let f=n[u];try{k(f)?s.push("[VueViewModel]"):s.push(String(f))}catch{s.push("[value cannot be serialized]")}}return s.join(r)}function O(n,r,s=!1){return p(n)?R(r)?r.test(n):p(r)?s?n===r:n.includes(r):!1:!1}function T(n,r=[],s=!1){return r.some(u=>O(n,u,s))}function D(n,r,s=250,u,f,d,m){if(!d.exception||!d.exception.values||!m||!S(m.originalException,Error))return;let v=d.exception.values.length>0?d.exception.values[d.exception.values.length-1]:void 0;v&&(d.exception.values=U(N(n,r,f,m.originalException,u,d.exception.values,v,0),s))}function N(n,r,s,u,f,d,m,v){if(d.length>=s+1)return d;let I=[...d];if(S(u[f],Error)){L(m,v);let P=n(r,u[f]),j=I.length;V(P,f,j,v),I=N(n,r,s,u[f],f,[P,...I],P,j)}return Array.isArray(u.errors)&&u.errors.forEach((P,j)=>{if(S(P,Error)){L(m,v);let F=n(r,P),te=I.length;V(F,`errors[${j}]`,te,v),I=N(n,r,s,P,f,[F,...I],F,te)}}),I}function L(n,r){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,...n.type==="AggregateError"&&{is_exception_group:!0},exception_id:r}}function V(n,r,s,u){n.mechanism=n.mechanism||{type:"generic",handled:!0},n.mechanism={...n.mechanism,type:"chained",source:r,exception_id:s,parent_id:u}}function U(n,r){return n.map(s=>(s.value&&(s.value=x(s.value,r)),s))}let K="8.18.0",B=globalThis;function Y(n,r,s){let u=s||B,f=u.__SENTRY__=u.__SENTRY__||{},d=f[K]=f[K]||{};return d[n]||(d[n]=r())}let ee=B,z=80;function ue(n,r={}){if(!n)return"<unknown>";try{let s=n,u=5,f=[],d=0,m=0,v=" > ",I=v.length,P,j=Array.isArray(r)?r:r.keyAttrs,F=!Array.isArray(r)&&r.maxStringLength||z;for(;s&&d++<u&&(P=Oe(s,j),!(P==="html"||d>1&&m+f.length*I+P.length>=F));)f.push(P),m+=P.length,s=s.parentNode;return f.reverse().join(v)}catch{return"<unknown>"}}function Oe(n,r){let s=n,u=[];if(!s||!s.tagName)return"";if(ee.HTMLElement&&s instanceof HTMLElement&&s.dataset){if(s.dataset.sentryComponent)return s.dataset.sentryComponent;if(s.dataset.sentryElement)return s.dataset.sentryElement}u.push(s.tagName.toLowerCase());let f=r&&r.length?r.filter(m=>s.getAttribute(m)).map(m=>[m,s.getAttribute(m)]):null;if(f&&f.length)f.forEach(m=>{u.push(`[${m[0]}="${m[1]}"]`)});else{s.id&&u.push(`#${s.id}`);let m=s.className;if(m&&p(m)){let v=m.split(/\s+/);for(let I of v)u.push(`.${I}`)}}let d=["aria-label","type","name","title","alt"];for(let m of d){let v=s.getAttribute(m);v&&u.push(`[${m}="${v}"]`)}return u.join("")}function je(){try{return ee.document.location.href}catch{return""}}function Me(n){if(!ee.HTMLElement)return null;let r=n,s=5;for(let u=0;u<s;u++){if(!r)return null;if(r instanceof HTMLElement){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}r=r.parentNode}return null}let ke="Sentry Logger ",Le=["debug","info","warn","error","log","assert","trace"],we={};function xe(n){if(!("console"in B))return n();let r=B.console,s={},u=Object.keys(we);u.forEach(f=>{let d=we[f];s[f]=r[f],r[f]=d});try{return n()}finally{u.forEach(f=>{r[f]=s[f]})}}function Ce(){let n=!1,r={enable:()=>{n=!0},disable:()=>{n=!1},isEnabled:()=>n};return Le.forEach(s=>{r[s]=(...u)=>{n&&xe(()=>{B.console[s](`${ke}[${s}]:`,...u)})}}),r}let W=Ce(),Sr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qa(n){return n==="http"||n==="https"}function qt(n,r=!1){let{host:s,path:u,pass:f,port:d,projectId:m,protocol:v,publicKey:I}=n;return`${v}://${I}${r&&f?`:${f}`:""}@${s}${d?`:${d}`:""}/${u&&`${u}/`}${m}`}function Ja(n){let r=Sr.exec(n);if(!r){xe(()=>{console.error(`Invalid Sentry Dsn: ${n}`)});return}let[s,u,f="",d="",m="",v=""]=r.slice(1),I="",P=v,j=P.split("/");if(j.length>1&&(I=j.slice(0,-1).join("/"),P=j.pop()),P){let F=P.match(/^\d+/);F&&(P=F[0])}return Ji({host:d,pass:f,path:I,projectId:P,port:m,protocol:s,publicKey:u})}function Ji(n){return{protocol:n.protocol,publicKey:n.publicKey||"",pass:n.pass||"",host:n.host,port:n.port||"",path:n.path||"",projectId:n.projectId}}function Xa(n){let{port:r,projectId:s,protocol:u}=n;return["protocol","publicKey","host","projectId"].find(m=>n[m]?!1:(W.error(`Invalid Sentry Dsn: ${m} missing`),!0))?!1:s.match(/^\d+$/)?qa(u)?r&&isNaN(parseInt(r,10))?(W.error(`Invalid Sentry Dsn: Invalid port ${r}`),!1):!0:(W.error(`Invalid Sentry Dsn: Invalid protocol ${u}`),!1):(W.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),!1)}function Xi(n){let r=typeof n=="string"?Ja(n):Ji(n);if(!(!r||!Xa(r)))return r}class Ke extends Error{constructor(r,s="warn"){super(r),this.message=r,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=s}}function he(n,r,s){if(!(r in n))return;let u=n[r],f=s(u);typeof f=="function"&&Qi(f,u),n[r]=f}function dt(n,r,s){try{Object.defineProperty(n,r,{value:s,writable:!0,configurable:!0})}catch{W.log(`Failed to add non-enumerable property "${r}" to object`,n)}}function Qi(n,r){try{let s=r.prototype||{};n.prototype=r.prototype=s,dt(n,"__sentry_original__",r)}catch{}}function Ir(n){return n.__sentry_original__}function Qa(n){return Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}function Zi(n){if(i(n))return{message:n.message,name:n.name,stack:n.stack,...to(n)};if(y(n)){let r={type:n.type,target:eo(n.target),currentTarget:eo(n.currentTarget),...to(n)};return typeof CustomEvent<"u"&&S(n,CustomEvent)&&(r.detail=n.detail),r}else return n}function eo(n){try{return w(n)?ue(n):Object.prototype.toString.call(n)}catch{return"<unknown>"}}function to(n){if(typeof n=="object"&&n!==null){let r={};for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s]);return r}else return{}}function Za(n,r=40){let s=Object.keys(Zi(n));s.sort();let u=s[0];if(!u)return"[object has no keys]";if(u.length>=r)return x(u,r);for(let f=s.length;f>0;f--){let d=s.slice(0,f).join(", ");if(!(d.length>r))return f===s.length?d:x(d,r)}return""}function Fe(n){return kr(n,new Map)}function kr(n,r){if(ec(n)){let s=r.get(n);if(s!==void 0)return s;let u={};r.set(n,u);for(let f of Object.keys(n))typeof n[f]<"u"&&(u[f]=kr(n[f],r));return u}if(Array.isArray(n)){let s=r.get(n);if(s!==void 0)return s;let u=[];return r.set(n,u),n.forEach(f=>{u.push(kr(f,r))}),u}return n}function ec(n){if(!b(n))return!1;try{let r=Object.getPrototypeOf(n).constructor.name;return!r||r==="Object"}catch{return!0}}let no=50,Ue="?",ro=/\(error: (.*)\)/,io=/captureMessage|captureException/;function oo(...n){let r=n.sort((s,u)=>s[0]-u[0]).map(s=>s[1]);return(s,u=0,f=0)=>{let d=[],m=s.split(`
`);for(let v=u;v<m.length;v++){let I=m[v];if(I.length>1024)continue;let P=ro.test(I)?I.replace(ro,"$1"):I;if(!P.match(/\S*Error: /)){for(let j of r){let F=j(P);if(F){d.push(F);break}}if(d.length>=no+f)break}}return nc(d.slice(f))}}function tc(n){return Array.isArray(n)?oo(...n):n}function nc(n){if(!n.length)return[];let r=Array.from(n);return/sentryWrapped/.test(xn(r).function||"")&&r.pop(),r.reverse(),io.test(xn(r).function||"")&&(r.pop(),io.test(xn(r).function||"")&&r.pop()),r.slice(0,no).map(s=>({...s,filename:s.filename||xn(r).filename,function:s.function||Ue}))}function xn(n){return n[n.length-1]||{}}let xr="<anonymous>";function et(n){try{return!n||typeof n!="function"?xr:n.name||xr}catch{return xr}}function so(n){let r=n.exception;if(r){let s=[];try{return r.values.forEach(u=>{u.stacktrace.frames&&s.push(...u.stacktrace.frames)}),s}catch{return}}}let Tn={},ao={};function pt(n,r){Tn[n]=Tn[n]||[],Tn[n].push(r)}function ht(n,r){ao[n]||(r(),ao[n]=!0)}function Be(n,r){let s=n&&Tn[n];if(s)for(let u of s)try{u(r)}catch(f){W.error(`Error while triggering instrumentation handler.
Type: ${n}
Name: ${et(u)}
Error:`,f)}}function rc(n){let r="console";pt(r,n),ht(r,ic)}function ic(){"console"in B&&Le.forEach(function(n){n in B.console&&he(B.console,n,function(r){return we[n]=r,function(...s){Be("console",{args:s,level:n});let f=we[n];f&&f.apply(B.console,s)}})})}let Tr=B;function co(){if(!("fetch"in Tr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Ar(n){return n&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString())}function oc(){if(typeof EdgeRuntime=="string")return!0;if(!co())return!1;if(Ar(Tr.fetch))return!0;let n=!1,r=Tr.document;if(r&&typeof r.createElement=="function")try{let s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s),s.contentWindow&&s.contentWindow.fetch&&(n=Ar(s.contentWindow.fetch)),r.head.removeChild(s)}catch(s){W.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return n}let uo=1e3;function Jt(){return Date.now()/uo}function sc(){let{performance:n}=B;if(!n||!n.now)return Jt;let r=Date.now()-n.now(),s=n.timeOrigin==null?r:n.timeOrigin;return()=>(s+n.now())/uo}let Ve=sc();(()=>{let{performance:n}=B;if(!n||!n.now)return;let r=3600*1e3,s=n.now(),u=Date.now(),f=n.timeOrigin?Math.abs(n.timeOrigin+s-u):r,d=f<r,m=n.timing&&n.timing.navigationStart,I=typeof m=="number"?Math.abs(m+s-u):r,P=I<r;return d||P?f<=I?n.timeOrigin:m:u})();function ac(n){let r="fetch";pt(r,n),ht(r,cc)}function cc(){oc()&&he(B,"fetch",function(n){return function(...r){let{method:s,url:u}=uc(r),f={args:r,fetchData:{method:s,url:u},startTimestamp:Ve()*1e3};Be("fetch",{...f});let d=new Error().stack;return n.apply(B,r).then(m=>{let v={...f,endTimestamp:Ve()*1e3,response:m};return Be("fetch",v),m},m=>{let v={...f,endTimestamp:Ve()*1e3,error:m};throw Be("fetch",v),i(m)&&m.stack===void 0&&(m.stack=d,dt(m,"framesToPop",1)),m})}})}function Or(n,r){return!!n&&typeof n=="object"&&!!n[r]}function lo(n){return typeof n=="string"?n:n?Or(n,"url")?n.url:n.toString?n.toString():"":""}function uc(n){if(n.length===0)return{method:"GET",url:""};if(n.length===2){let[s,u]=n;return{url:lo(s),method:Or(u,"method")?String(u.method).toUpperCase():"GET"}}let r=n[0];return{url:lo(r),method:Or(r,"method")?String(r.method).toUpperCase():"GET"}}let An=null;function lc(n){let r="error";pt(r,n),ht(r,fc)}function fc(){An=B.onerror,B.onerror=function(n,r,s,u,f){return Be("error",{column:u,error:f,line:s,msg:n,url:r}),An&&!An.__SENTRY_LOADER__?An.apply(this,arguments):!1},B.onerror.__SENTRY_INSTRUMENTED__=!0}let On=null;function dc(n){let r="unhandledrejection";pt(r,n),ht(r,pc)}function pc(){On=B.onunhandledrejection,B.onunhandledrejection=function(n){return Be("unhandledrejection",n),On&&!On.__SENTRY_LOADER__?On.apply(this,arguments):!0},B.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function hc(){return"npm"}function mc(){let n=typeof WeakSet=="function",r=n?new WeakSet:[];function s(f){if(n)return r.has(f)?!0:(r.add(f),!1);for(let d=0;d<r.length;d++)if(r[d]===f)return!0;return r.push(f),!1}function u(f){if(n)r.delete(f);else for(let d=0;d<r.length;d++)if(r[d]===f){r.splice(d,1);break}}return[s,u]}function fe(){let n=B,r=n.crypto||n.msCrypto,s=()=>Math.random()*16;try{if(r&&r.randomUUID)return r.randomUUID().replace(/-/g,"");r&&r.getRandomValues&&(s=()=>{let u=new Uint8Array(1);return r.getRandomValues(u),u[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,u=>(u^(s()&15)>>u/4).toString(16))}function fo(n){return n.exception&&n.exception.values?n.exception.values[0]:void 0}function tt(n){let{message:r,event_id:s}=n;if(r)return r;let u=fo(n);return u?u.type&&u.value?`${u.type}: ${u.value}`:u.type||u.value||s||"<unknown>":s||"<unknown>"}function Cr(n,r,s){let u=n.exception=n.exception||{},f=u.values=u.values||[],d=f[0]=f[0]||{};d.value||(d.value=r||""),d.type||(d.type=s||"Error")}function Xt(n,r){let s=fo(n);if(!s)return;let u={type:"generic",handled:!0},f=s.mechanism;if(s.mechanism={...u,...f,...r},r&&"data"in r){let d={...f&&f.data,...r.data};s.mechanism.data=d}}function po(n){if(n&&n.__sentry_captured__)return!0;try{dt(n,"__sentry_captured__",!0)}catch{}return!1}function ho(n){return Array.isArray(n)?n:[n]}function nt(n,r=100,s=1/0){try{return Rr("",n,r,s)}catch(u){return{ERROR:`**non-serializable** (${u})`}}}function mo(n,r=3,s=102400){let u=nt(n,r);return _c(u)>s?mo(n,r-1,s):u}function Rr(n,r,s=1/0,u=1/0,f=mc()){let[d,m]=f;if(r==null||["number","boolean","string"].includes(typeof r)&&!Number.isNaN(r))return r;let v=gc(n,r);if(!v.startsWith("[object "))return v;if(r.__sentry_skip_normalization__)return r;let I=typeof r.__sentry_override_normalization_depth__=="number"?r.__sentry_override_normalization_depth__:s;if(I===0)return v.replace("object ","");if(d(r))return"[Circular ~]";let P=r;if(P&&typeof P.toJSON=="function")try{let ie=P.toJSON();return Rr("",ie,I-1,u,f)}catch{}let j=Array.isArray(r)?[]:{},F=0,te=Zi(r);for(let ie in te){if(!Object.prototype.hasOwnProperty.call(te,ie))continue;if(F>=u){j[ie]="[MaxProperties ~]";break}let re=te[ie];j[ie]=Rr(ie,re,I-1,u,f),F++}return m(r),j}function gc(n,r){try{if(n==="domain"&&r&&typeof r=="object"&&r._events)return"[Domain]";if(n==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&r===global)return"[Global]";if(typeof window<"u"&&r===window)return"[Window]";if(typeof document<"u"&&r===document)return"[Document]";if(k(r))return"[VueViewModel]";if(E(r))return"[SyntheticEvent]";if(typeof r=="number"&&r!==r)return"[NaN]";if(typeof r=="function")return`[Function: ${et(r)}]`;if(typeof r=="symbol")return`[${String(r)}]`;if(typeof r=="bigint")return`[BigInt: ${String(r)}]`;let s=yc(r);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}}function yc(n){let r=Object.getPrototypeOf(n);return r?r.constructor.name:"null prototype"}function vc(n){return~-encodeURI(n).split(/%..|./).length}function _c(n){return vc(JSON.stringify(n))}var ze;(function(n){n[n.PENDING=0]="PENDING";let s=1;n[n.RESOLVED=s]="RESOLVED";let u=2;n[n.REJECTED=u]="REJECTED"})(ze||(ze={}));function mt(n){return new $e(r=>{r(n)})}function Cn(n){return new $e((r,s)=>{s(n)})}class $e{constructor(r){$e.prototype.__init.call(this),$e.prototype.__init2.call(this),$e.prototype.__init3.call(this),$e.prototype.__init4.call(this),this._state=ze.PENDING,this._handlers=[];try{r(this._resolve,this._reject)}catch(s){this._reject(s)}}then(r,s){return new $e((u,f)=>{this._handlers.push([!1,d=>{if(!r)u(d);else try{u(r(d))}catch(m){f(m)}},d=>{if(!s)f(d);else try{u(s(d))}catch(m){f(m)}}]),this._executeHandlers()})}catch(r){return this.then(s=>s,r)}finally(r){return new $e((s,u)=>{let f,d;return this.then(m=>{d=!1,f=m,r&&r()},m=>{d=!0,f=m,r&&r()}).then(()=>{if(d){u(f);return}s(f)})})}__init(){this._resolve=r=>{this._setResult(ze.RESOLVED,r)}}__init2(){this._reject=r=>{this._setResult(ze.REJECTED,r)}}__init3(){this._setResult=(r,s)=>{if(this._state===ze.PENDING){if(_(s)){s.then(this._resolve,this._reject);return}this._state=r,this._value=s,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===ze.PENDING)return;let r=this._handlers.slice();this._handlers=[],r.forEach(s=>{s[0]||(this._state===ze.RESOLVED&&s[1](this._value),this._state===ze.REJECTED&&s[2](this._value),s[0]=!0)})}}}function bc(n){let r=[];function s(){return n===void 0||r.length<n}function u(m){return r.splice(r.indexOf(m),1)[0]||Promise.resolve(void 0)}function f(m){if(!s())return Cn(new Ke("Not adding Promise because buffer limit was reached."));let v=m();return r.indexOf(v)===-1&&r.push(v),v.then(()=>u(v)).then(null,()=>u(v).then(null,()=>{})),v}function d(m){return new $e((v,I)=>{let P=r.length;if(!P)return v(!0);let j=setTimeout(()=>{m&&m>0&&v(!1)},m);r.forEach(F=>{mt(F).then(()=>{--P||(clearTimeout(j),v(!0))},I)})})}return{$:r,add:f,drain:d}}function Pr(n){if(!n)return{};let r=n.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!r)return{};let s=r[6]||"",u=r[8]||"";return{host:r[4],path:r[5],protocol:r[2],search:s,hash:u,relative:r[5]+s+u}}let Ec=["fatal","error","warning","log","info","debug"];function wc(n){return n==="warn"?"warning":Ec.includes(n)?n:"log"}let go="sentry-",Sc=/^sentry-/,Ic=8192;function yo(n){let r=xc(n);if(!r)return;let s=Object.entries(r).reduce((u,[f,d])=>{if(f.match(Sc)){let m=f.slice(go.length);u[m]=d}return u},{});if(Object.keys(s).length>0)return s}function kc(n){if(!n)return;let r=Object.entries(n).reduce((s,[u,f])=>(f&&(s[`${go}${u}`]=f),s),{});return Tc(r)}function xc(n){if(!(!n||!p(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((r,s)=>{let u=vo(s);return Object.entries(u).forEach(([f,d])=>{r[f]=d}),r},{}):vo(n)}function vo(n){return n.split(",").map(r=>r.split("=").map(s=>decodeURIComponent(s.trim()))).reduce((r,[s,u])=>(s&&u&&(r[s]=u),r),{})}function Tc(n){if(Object.keys(n).length!==0)return Object.entries(n).reduce((r,[s,u],f)=>{let d=`${encodeURIComponent(s)}=${encodeURIComponent(u)}`,m=f===0?d:`${r},${d}`;return m.length>Ic?(W.warn(`Not adding key: ${s} with val: ${u} to baggage header due to exceeding baggage size limits.`),r):m},"")}let Ac=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Oc(n){if(!n)return;let r=n.match(Ac);if(!r)return;let s;return r[3]==="1"?s=!0:r[3]==="0"&&(s=!1),{traceId:r[1],parentSampled:s,parentSpanId:r[2]}}function Cc(n,r){let s=Oc(n),u=yo(r),{traceId:f,parentSpanId:d,parentSampled:m}=s||{};return s?{traceId:f||fe(),parentSpanId:d||fe().substring(16),spanId:fe().substring(16),sampled:m,dsc:u||{}}:{traceId:f||fe(),spanId:fe().substring(16)}}function Rc(n=fe(),r=fe().substring(16),s){let u="";return s!==void 0&&(u=s?"-1":"-0"),`${n}-${r}${u}`}function Qt(n,r=[]){return[n,r]}function Pc(n,r){let[s,u]=n;return[s,[...u,r]]}function _o(n,r){let s=n[1];for(let u of s){let f=u[0].type;if(r(u,f))return!0}return!1}function Dr(n){return B.__SENTRY__&&B.__SENTRY__.encodePolyfill?B.__SENTRY__.encodePolyfill(n):new TextEncoder().encode(n)}function Dc(n){let[r,s]=n,u=JSON.stringify(r);function f(d){typeof u=="string"?u=typeof d=="string"?u+d:[Dr(u),d]:u.push(typeof d=="string"?Dr(d):d)}for(let d of s){let[m,v]=d;if(f(`
${JSON.stringify(m)}
`),typeof v=="string"||v instanceof Uint8Array)f(v);else{let I;try{I=JSON.stringify(v)}catch{I=JSON.stringify(nt(v))}f(I)}}return typeof u=="string"?u:Nc(u)}function Nc(n){let r=n.reduce((f,d)=>f+d.length,0),s=new Uint8Array(r),u=0;for(let f of n)s.set(f,u),u+=f.length;return s}function Mc(n){let r=typeof n.data=="string"?Dr(n.data):n.data;return[Fe({type:"attachment",length:r.length,filename:n.filename,content_type:n.contentType,attachment_type:n.attachmentType}),r]}let Fc={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function bo(n){return Fc[n]}function Eo(n){if(!n||!n.sdk)return;let{name:r,version:s}=n.sdk;return{name:r,version:s}}function $c(n,r,s,u){let f=n.sdkProcessingMetadata&&n.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:n.event_id,sent_at:new Date().toISOString(),...r&&{sdk:r},...!!s&&u&&{dsn:qt(u)},...f&&{trace:Fe({...f})}}}function Lc(n,r,s){let u=[{type:"client_report"},{timestamp:s||Jt(),discarded_events:n}];return Qt(r?{dsn:r}:{},[u])}let Bc=60*1e3;function jc(n,r=Date.now()){let s=parseInt(`${n}`,10);if(!isNaN(s))return s*1e3;let u=Date.parse(`${n}`);return isNaN(u)?Bc:u-r}function Kc(n,r){return n[r]||n.all||0}function Uc(n,r,s=Date.now()){return Kc(n,r)>s}function Hc(n,{statusCode:r,headers:s},u=Date.now()){let f={...n},d=s&&s["x-sentry-rate-limits"],m=s&&s["retry-after"];if(d)for(let v of d.trim().split(",")){let[I,P,,,j]=v.split(":",5),F=parseInt(I,10),te=(isNaN(F)?60:F)*1e3;if(!P)f.all=u+te;else for(let ie of P.split(";"))ie==="metric_bucket"?(!j||j.split(";").includes("custom"))&&(f[ie]=u+te):f[ie]=u+te}else m?f.all=u+jc(m,u):r===429&&(f.all=u+6e4);return f}function wo(){return{traceId:fe(),spanId:fe().substring(16)}}let Rn=B;function Wc(){let n=Rn.chrome,r=n&&n.app&&n.app.runtime,s="history"in Rn&&!!Rn.history.pushState&&!!Rn.history.replaceState;return!r&&s}let So=()=>{},Vc=["attachTo","createWidget","remove"];function Io(n){return xe(()=>{console.warn("You are using feedbackIntegration() even though this bundle does not include feedback.")}),{name:"Feedback",...Vc.reduce((r,s)=>(r[s]=So,r),{})}}let zc=["start","stop","flush"];function Gc(n){return xe(()=>{console.warn("You are using replayIntegration() even though this bundle does not include replay.")}),{name:"Replay",...zc.reduce((r,s)=>(r[s]=So,r),{})}}function Zt(){return Nr(B),B}function Nr(n){let r=n.__SENTRY__=n.__SENTRY__||{};return r.version=r.version||K,r[K]=r[K]||{}}function Yc(n){let r=Ve(),s={sid:fe(),init:!0,timestamp:r,started:r,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Jc(s)};return n&&Ot(s,n),s}function Ot(n,r={}){if(r.user&&(!n.ipAddress&&r.user.ip_address&&(n.ipAddress=r.user.ip_address),!n.did&&!r.did&&(n.did=r.user.id||r.user.email||r.user.username)),n.timestamp=r.timestamp||Ve(),r.abnormal_mechanism&&(n.abnormal_mechanism=r.abnormal_mechanism),r.ignoreDuration&&(n.ignoreDuration=r.ignoreDuration),r.sid&&(n.sid=r.sid.length===32?r.sid:fe()),r.init!==void 0&&(n.init=r.init),!n.did&&r.did&&(n.did=`${r.did}`),typeof r.started=="number"&&(n.started=r.started),n.ignoreDuration)n.duration=void 0;else if(typeof r.duration=="number")n.duration=r.duration;else{let s=n.timestamp-n.started;n.duration=s>=0?s:0}r.release&&(n.release=r.release),r.environment&&(n.environment=r.environment),!n.ipAddress&&r.ipAddress&&(n.ipAddress=r.ipAddress),!n.userAgent&&r.userAgent&&(n.userAgent=r.userAgent),typeof r.errors=="number"&&(n.errors=r.errors),r.status&&(n.status=r.status)}function qc(n,r){let s={};r?s={status:r}:n.status==="ok"&&(s={status:"exited"}),Ot(n,s)}function Jc(n){return Fe({sid:`${n.sid}`,init:n.init,started:new Date(n.started*1e3).toISOString(),timestamp:new Date(n.timestamp*1e3).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}let Mr="_sentrySpan";function ko(n,r){r?dt(n,Mr,r):delete n[Mr]}function xo(n){return n[Mr]}let Xc=100;class Fr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=wo()}clone(){let r=new Fr;return r._breadcrumbs=[...this._breadcrumbs],r._tags={...this._tags},r._extra={...this._extra},r._contexts={...this._contexts},r._user=this._user,r._level=this._level,r._session=this._session,r._transactionName=this._transactionName,r._fingerprint=this._fingerprint,r._eventProcessors=[...this._eventProcessors],r._requestSession=this._requestSession,r._attachments=[...this._attachments],r._sdkProcessingMetadata={...this._sdkProcessingMetadata},r._propagationContext={...this._propagationContext},r._client=this._client,r._lastEventId=this._lastEventId,ko(r,xo(this)),r}setClient(r){this._client=r}setLastEventId(r){this._lastEventId=r}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(r){this._scopeListeners.push(r)}addEventProcessor(r){return this._eventProcessors.push(r),this}setUser(r){return this._user=r||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Ot(this._session,{user:r}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(r){return this._requestSession=r,this}setTags(r){return this._tags={...this._tags,...r},this._notifyScopeListeners(),this}setTag(r,s){return this._tags={...this._tags,[r]:s},this._notifyScopeListeners(),this}setExtras(r){return this._extra={...this._extra,...r},this._notifyScopeListeners(),this}setExtra(r,s){return this._extra={...this._extra,[r]:s},this._notifyScopeListeners(),this}setFingerprint(r){return this._fingerprint=r,this._notifyScopeListeners(),this}setLevel(r){return this._level=r,this._notifyScopeListeners(),this}setTransactionName(r){return this._transactionName=r,this._notifyScopeListeners(),this}setContext(r,s){return s===null?delete this._contexts[r]:this._contexts[r]=s,this._notifyScopeListeners(),this}setSession(r){return r?this._session=r:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(r){if(!r)return this;let s=typeof r=="function"?r(this):r,[u,f]=s instanceof Ge?[s.getScopeData(),s.getRequestSession()]:b(s)?[r,r.requestSession]:[],{tags:d,extra:m,user:v,contexts:I,level:P,fingerprint:j=[],propagationContext:F}=u||{};return this._tags={...this._tags,...d},this._extra={...this._extra,...m},this._contexts={...this._contexts,...I},v&&Object.keys(v).length&&(this._user=v),P&&(this._level=P),j.length&&(this._fingerprint=j),F&&(this._propagationContext=F),f&&(this._requestSession=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,ko(this,void 0),this._attachments=[],this._propagationContext=wo(),this._notifyScopeListeners(),this}addBreadcrumb(r,s){let u=typeof s=="number"?s:Xc;if(u<=0)return this;let f={timestamp:Jt(),...r},d=this._breadcrumbs;return d.push(f),this._breadcrumbs=d.length>u?d.slice(-u):d,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(r){return this._attachments.push(r),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:xo(this)}}setSDKProcessingMetadata(r){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...r},this}setPropagationContext(r){return this._propagationContext=r,this}getPropagationContext(){return this._propagationContext}captureException(r,s){let u=s&&s.event_id?s.event_id:fe();if(!this._client)return W.warn("No client configured on scope - will not capture exception!"),u;let f=new Error("Sentry syntheticException");return this._client.captureException(r,{originalException:r,syntheticException:f,...s,event_id:u},this),u}captureMessage(r,s,u){let f=u&&u.event_id?u.event_id:fe();if(!this._client)return W.warn("No client configured on scope - will not capture message!"),f;let d=new Error(r);return this._client.captureMessage(r,s,{originalException:r,syntheticException:d,...u,event_id:f},this),f}captureEvent(r,s){let u=s&&s.event_id?s.event_id:fe();return this._client?(this._client.captureEvent(r,{...s,event_id:u},this),u):(W.warn("No client configured on scope - will not capture event!"),u)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(r=>{r(this)}),this._notifyingListeners=!1)}}let Ge=Fr;function Qc(){return Y("defaultCurrentScope",()=>new Ge)}function Zc(){return Y("defaultIsolationScope",()=>new Ge)}class eu{constructor(r,s){let u;r?u=r:u=new Ge;let f;s?f=s:f=new Ge,this._stack=[{scope:u}],this._isolationScope=f}withScope(r){let s=this._pushScope(),u;try{u=r(s)}catch(f){throw this._popScope(),f}return _(u)?u.then(f=>(this._popScope(),f),f=>{throw this._popScope(),f}):(this._popScope(),u)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let r=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:r}),r}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Ct(){let n=Zt(),r=Nr(n);return r.stack=r.stack||new eu(Qc(),Zc())}function tu(n){return Ct().withScope(n)}function nu(n,r){let s=Ct();return s.withScope(()=>(s.getStackTop().scope=n,r(n)))}function To(n){return Ct().withScope(()=>n(Ct().getIsolationScope()))}function ru(){return{withIsolationScope:To,withScope:tu,withSetScope:nu,withSetIsolationScope:(n,r)=>To(r),getCurrentScope:()=>Ct().getScope(),getIsolationScope:()=>Ct().getIsolationScope()}}function Pn(n){let r=Nr(n);return r.acs?r.acs:ru()}function be(){let n=Zt();return Pn(n).getCurrentScope()}function Se(){let n=Zt();return Pn(n).getIsolationScope()}function Ao(){return Y("globalScope",()=>new Ge)}function Dn(...n){let r=Zt(),s=Pn(r);if(n.length===2){let[u,f]=n;return u?s.withSetScope(u,f):s.withScope(f)}return s.withScope(n[0])}function iu(...n){let r=Zt(),s=Pn(r);if(n.length===2){let[u,f]=n;return u?s.withSetIsolationScope(u,f):s.withIsolationScope(f)}return s.withIsolationScope(n[0])}function se(){return be().getClient()}let ou="_sentryMetrics";function su(n){let r=n[ou];if(!r)return;let s={};for(let[,[u,f]]of r)(s[u]||(s[u]=[])).push(Fe(f));return s}let Oo="sentry.source",Co="sentry.sample_rate",Ro="sentry.op",Po="sentry.origin",au=0,cu=1,uu=1;function lu(n){let{spanId:r,traceId:s}=n.spanContext(),{parent_span_id:u}=en(n);return Fe({parent_span_id:u,span_id:r,trace_id:s})}function fu(n){let{traceId:r,spanId:s}=n.spanContext(),u=Mo(n);return Rc(r,s,u)}function Do(n){return typeof n=="number"?No(n):Array.isArray(n)?n[0]+n[1]/1e9:n instanceof Date?No(n.getTime()):Ve()}function No(n){return n>9999999999?n/1e3:n}function en(n){if(pu(n))return n.getSpanJSON();try{let{spanId:r,traceId:s}=n.spanContext();if(du(n)){let{attributes:u,startTime:f,name:d,endTime:m,parentSpanId:v,status:I}=n;return Fe({span_id:r,trace_id:s,data:u,description:d,parent_span_id:v,start_timestamp:Do(f),timestamp:Do(m)||void 0,status:hu(I),op:u[Ro],origin:u[Po],_metrics_summary:su(n)})}return{span_id:r,trace_id:s}}catch{return{}}}function du(n){let r=n;return!!r.attributes&&!!r.startTime&&!!r.name&&!!r.endTime&&!!r.status}function pu(n){return typeof n.getSpanJSON=="function"}function Mo(n){let{traceFlags:r}=n.spanContext();return r===uu}function hu(n){if(!(!n||n.code===au))return n.code===cu?"ok":n.message||"unknown_error"}let mu="_sentryRootSpan";function Fo(n){return n[mu]||n}let $r="production",gu="_frozenDsc";function $o(n,r){let s=r.getOptions(),{publicKey:u}=r.getDsn()||{},f=Fe({environment:s.environment||$r,release:s.release,public_key:u,trace_id:n});return r.emit("createDsc",f),f}function Lo(n){let r=se();if(!r)return{};let s=$o(en(n).trace_id||"",r),u=Fo(n),f=u[gu];if(f)return f;let d=u.spanContext().traceState,m=d&&d.get("sentry.dsc"),v=m&&yo(m);if(v)return v;let I=en(u),P=I.data||{},j=P[Co];j!=null&&(s.sample_rate=`${j}`);let F=P[Oo],te=I.description;return F!=="url"&&te&&(s.transaction=te),s.sampled=String(Mo(u)),r.emit("createDsc",s,u),s}function yu(n){let r=Lo(n);return kc(r)}function vu(n){if(typeof n=="boolean")return Number(n);let r=typeof n=="string"?parseFloat(n):n;if(typeof r!="number"||isNaN(r)||r<0||r>1){W.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`);return}return r}function _u(n,r){return r&&(n.sdk=n.sdk||{},n.sdk.name=n.sdk.name||r.name,n.sdk.version=n.sdk.version||r.version,n.sdk.integrations=[...n.sdk.integrations||[],...r.integrations||[]],n.sdk.packages=[...n.sdk.packages||[],...r.packages||[]]),n}function bu(n,r,s,u){let f=Eo(s),d={sent_at:new Date().toISOString(),...f&&{sdk:f},...!!u&&r&&{dsn:qt(r)}},m="aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()];return Qt(d,[m])}function Eu(n,r,s,u){let f=Eo(s),d=n.type&&n.type!=="replay_event"?n.type:"event";_u(n,s&&s.sdk);let m=$c(n,f,u,r);return delete n.sdkProcessingMetadata,Qt(m,[[{type:d},n]])}let wu=({sentryTrace:n,baggage:r},s)=>Dn(u=>{let f=Cc(n,r);return u.setPropagationContext(f),s()});function Lr(n,r,s,u=0){return new $e((f,d)=>{let m=n[u];if(r===null||typeof m!="function")f(r);else{let v=m({...r},s);m.id&&v===null&&W.log(`Event processor "${m.id}" dropped event`),_(v)?v.then(I=>Lr(n,I,s,u+1).then(f)).then(null,d):Lr(n,v,s,u+1).then(f).then(null,d)}})}function Su(n,r){let{fingerprint:s,span:u,breadcrumbs:f,sdkProcessingMetadata:d}=r;Iu(n,r),u&&Tu(n,u),Au(n,s),ku(n,f),xu(n,d)}function Bo(n,r){let{extra:s,tags:u,user:f,contexts:d,level:m,sdkProcessingMetadata:v,breadcrumbs:I,fingerprint:P,eventProcessors:j,attachments:F,propagationContext:te,transactionName:ie,span:re}=r;tn(n,"extra",s),tn(n,"tags",u),tn(n,"user",f),tn(n,"contexts",d),tn(n,"sdkProcessingMetadata",v),m&&(n.level=m),ie&&(n.transactionName=ie),re&&(n.span=re),I.length&&(n.breadcrumbs=[...n.breadcrumbs,...I]),P.length&&(n.fingerprint=[...n.fingerprint,...P]),j.length&&(n.eventProcessors=[...n.eventProcessors,...j]),F.length&&(n.attachments=[...n.attachments,...F]),n.propagationContext={...n.propagationContext,...te}}function tn(n,r,s){if(s&&Object.keys(s).length){n[r]={...n[r]};for(let u in s)Object.prototype.hasOwnProperty.call(s,u)&&(n[r][u]=s[u])}}function Iu(n,r){let{extra:s,tags:u,user:f,contexts:d,level:m,transactionName:v}=r,I=Fe(s);I&&Object.keys(I).length&&(n.extra={...I,...n.extra});let P=Fe(u);P&&Object.keys(P).length&&(n.tags={...P,...n.tags});let j=Fe(f);j&&Object.keys(j).length&&(n.user={...j,...n.user});let F=Fe(d);F&&Object.keys(F).length&&(n.contexts={...F,...n.contexts}),m&&(n.level=m),v&&n.type!=="transaction"&&(n.transaction=v)}function ku(n,r){let s=[...n.breadcrumbs||[],...r];n.breadcrumbs=s.length?s:void 0}function xu(n,r){n.sdkProcessingMetadata={...n.sdkProcessingMetadata,...r}}function Tu(n,r){n.contexts={trace:lu(r),...n.contexts},n.sdkProcessingMetadata={dynamicSamplingContext:Lo(r),...n.sdkProcessingMetadata};let s=Fo(r),u=en(s).description;u&&!n.transaction&&n.type==="transaction"&&(n.transaction=u)}function Au(n,r){n.fingerprint=n.fingerprint?ho(n.fingerprint):[],r&&(n.fingerprint=n.fingerprint.concat(r)),n.fingerprint&&!n.fingerprint.length&&delete n.fingerprint}function Ou(n,r,s,u,f,d){let{normalizeDepth:m=3,normalizeMaxBreadth:v=1e3}=n,I={...r,event_id:r.event_id||s.event_id||fe(),timestamp:r.timestamp||Jt()},P=s.integrations||n.integrations.map(Ie=>Ie.name);Cu(I,n),Du(I,P),f&&f.emit("applyFrameMetadata",r),r.type===void 0&&Ru(I,n.stackParser);let j=Mu(u,s.captureContext);s.mechanism&&Xt(I,s.mechanism);let F=f?f.getEventProcessors():[],te=Ao().getScopeData();if(d){let Ie=d.getScopeData();Bo(te,Ie)}if(j){let Ie=j.getScopeData();Bo(te,Ie)}let ie=[...s.attachments||[],...te.attachments];ie.length&&(s.attachments=ie),Su(I,te);let re=[...F,...te.eventProcessors];return Lr(re,I,s).then(Ie=>(Ie&&Pu(Ie),typeof m=="number"&&m>0?Nu(Ie,m,v):Ie))}function Cu(n,r){let{environment:s,release:u,dist:f,maxValueLength:d=250}=r;"environment"in n||(n.environment="environment"in r?s:$r),n.release===void 0&&u!==void 0&&(n.release=u),n.dist===void 0&&f!==void 0&&(n.dist=f),n.message&&(n.message=x(n.message,d));let m=n.exception&&n.exception.values&&n.exception.values[0];m&&m.value&&(m.value=x(m.value,d));let v=n.request;v&&v.url&&(v.url=x(v.url,d))}let jo=new WeakMap;function Ru(n,r){let s=B._sentryDebugIds;if(!s)return;let u,f=jo.get(r);f?u=f:(u=new Map,jo.set(r,u));let d=Object.entries(s).reduce((m,[v,I])=>{let P,j=u.get(v);j?P=j:(P=r(v),u.set(v,P));for(let F=P.length-1;F>=0;F--){let te=P[F];if(te.filename){m[te.filename]=I;break}}return m},{});try{n.exception.values.forEach(m=>{m.stacktrace.frames.forEach(v=>{v.filename&&(v.debug_id=d[v.filename])})})}catch{}}function Pu(n){let r={};try{n.exception.values.forEach(u=>{u.stacktrace.frames.forEach(f=>{f.debug_id&&(f.abs_path?r[f.abs_path]=f.debug_id:f.filename&&(r[f.filename]=f.debug_id),delete f.debug_id)})})}catch{}if(Object.keys(r).length===0)return;n.debug_meta=n.debug_meta||{},n.debug_meta.images=n.debug_meta.images||[];let s=n.debug_meta.images;Object.entries(r).forEach(([u,f])=>{s.push({type:"sourcemap",code_file:u,debug_id:f})})}function Du(n,r){r.length>0&&(n.sdk=n.sdk||{},n.sdk.integrations=[...n.sdk.integrations||[],...r])}function Nu(n,r,s){if(!n)return null;let u={...n,...n.breadcrumbs&&{breadcrumbs:n.breadcrumbs.map(f=>({...f,...f.data&&{data:nt(f.data,r,s)}}))},...n.user&&{user:nt(n.user,r,s)},...n.contexts&&{contexts:nt(n.contexts,r,s)},...n.extra&&{extra:nt(n.extra,r,s)}};return n.contexts&&n.contexts.trace&&u.contexts&&(u.contexts.trace=n.contexts.trace,n.contexts.trace.data&&(u.contexts.trace.data=nt(n.contexts.trace.data,r,s))),n.spans&&(u.spans=n.spans.map(f=>({...f,...f.data&&{data:nt(f.data,r,s)}}))),u}function Mu(n,r){if(!r)return n;let s=n?n.clone():new Ge;return s.update(r),s}function Fu(n){if(n)return $u(n)?{captureContext:n}:Bu(n)?{captureContext:n}:n}function $u(n){return n instanceof Ge||typeof n=="function"}let Lu=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Bu(n){return Object.keys(n).some(r=>Lu.includes(r))}function Ko(n,r){return be().captureException(n,Fu(r))}function ju(n,r){let s=typeof r=="string"?r:void 0,u=typeof r!="string"?{captureContext:r}:void 0;return be().captureMessage(n,s,u)}function Nn(n,r){return be().captureEvent(n,r)}function Uo(n,r){Se().setContext(n,r)}function Ho(n){Se().setExtras(n)}function Wo(n,r){Se().setExtra(n,r)}function Vo(n){Se().setTags(n)}function zo(n,r){Se().setTag(n,r)}function Go(n){Se().setUser(n)}function Yo(){return Se().lastEventId()}async function Ku(n){let r=se();return r?r.flush(n):(W.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Uu(n){let r=se();return r?r.close(n):(W.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Hu(){return!!se()}function Wu(n){Se().addEventProcessor(n)}function Mn(n){let r=se(),s=Se(),u=be(),{release:f,environment:d=$r}=r&&r.getOptions()||{},{userAgent:m}=B.navigator||{},v=Yc({release:f,environment:d,user:u.getUser()||s.getUser(),...m&&{userAgent:m},...n}),I=s.getSession();return I&&I.status==="ok"&&Ot(I,{status:"exited"}),nn(),s.setSession(v),u.setSession(v),v}function nn(){let n=Se(),r=be(),s=r.getSession()||n.getSession();s&&qc(s),qo(),n.setSession(),r.setSession()}function qo(){let n=Se(),r=be(),s=se(),u=r.getSession()||n.getSession();u&&s&&s.captureSession(u)}function Br(n=!1){if(n){nn();return}qo()}let Vu="7";function Jo(n){let r=n.protocol?`${n.protocol}:`:"",s=n.port?`:${n.port}`:"";return`${r}//${n.host}${s}${n.path?`/${n.path}`:""}/api/`}function zu(n){return`${Jo(n)}${n.projectId}/envelope/`}function Gu(n,r){return Qa({sentry_key:n.publicKey,sentry_version:Vu,...r&&{sentry_client:`${r.name}/${r.version}`}})}function Yu(n,r,s){return r||`${zu(n)}?${Gu(n,s)}`}function qu(n,r){let s=Xi(n);if(!s)return"";let u=`${Jo(s)}embed/error-page/`,f=`dsn=${qt(s)}`;for(let d in r)if(d!=="dsn"&&d!=="onClose")if(d==="user"){let m=r.user;if(!m)continue;m.name&&(f+=`&name=${encodeURIComponent(m.name)}`),m.email&&(f+=`&email=${encodeURIComponent(m.email)}`)}else f+=`&${encodeURIComponent(d)}=${encodeURIComponent(r[d])}`;return`${u}?${f}`}let Xo=[];function Ju(n){let r={};return n.forEach(s=>{let{name:u}=s,f=r[u];f&&!f.isDefaultInstance&&s.isDefaultInstance||(r[u]=s)}),Object.values(r)}function Xu(n){let r=n.defaultIntegrations||[],s=n.integrations;r.forEach(m=>{m.isDefaultInstance=!0});let u;Array.isArray(s)?u=[...r,...s]:typeof s=="function"?u=ho(s(r)):u=r;let f=Ju(u),d=f.findIndex(m=>m.name==="Debug");if(d>-1){let[m]=f.splice(d,1);f.push(m)}return f}function Qu(n,r){let s={};return r.forEach(u=>{u&&Zo(n,u,s)}),s}function Qo(n,r){for(let s of r)s&&s.afterAllSetup&&s.afterAllSetup(n)}function Zo(n,r,s){if(s[r.name]){W.log(`Integration skipped because it was already installed: ${r.name}`);return}if(s[r.name]=r,Xo.indexOf(r.name)===-1&&typeof r.setupOnce=="function"&&(r.setupOnce(),Xo.push(r.name)),r.setup&&typeof r.setup=="function"&&r.setup(n),typeof r.preprocessEvent=="function"){let u=r.preprocessEvent.bind(r);n.on("preprocessEvent",(f,d)=>u(f,d,n))}if(typeof r.processEvent=="function"){let u=r.processEvent.bind(r),f=Object.assign((d,m)=>u(d,m,n),{id:r.name});n.addEventProcessor(f)}W.log(`Integration installed: ${r.name}`)}function Zu(n){let r=se();if(!r){W.warn(`Cannot add integration "${n.name}" because no SDK Client is available.`);return}r.addIntegration(n)}function zp(n){return n}let es="Not capturing exception because it's already been captured.";class el{constructor(r){if(this._options=r,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],r.dsn?this._dsn=Xi(r.dsn):W.warn("No DSN provided, client will not send events."),this._dsn){let s=Yu(this._dsn,r.tunnel,r._metadata?r._metadata.sdk:void 0);this._transport=r.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...r.transportOptions,url:s})}}captureException(r,s,u){let f=fe();if(po(r))return W.log(es),f;let d={event_id:f,...s};return this._process(this.eventFromException(r,d).then(m=>this._captureEvent(m,d,u))),d.event_id}captureMessage(r,s,u,f){let d={event_id:fe(),...u},m=h(r)?r:String(r),v=g(r)?this.eventFromMessage(m,s,d):this.eventFromException(r,d);return this._process(v.then(I=>this._captureEvent(I,d,f))),d.event_id}captureEvent(r,s,u){let f=fe();if(s&&s.originalException&&po(s.originalException))return W.log(es),f;let d={event_id:f,...s},v=(r.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(r,d,v||u)),d.event_id}captureSession(r){typeof r.release!="string"?W.warn("Discarded session because of missing or non-string release"):(this.sendSession(r),Ot(r,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(r){let s=this._transport;return s?(this.emit("flush"),this._isClientDoneProcessing(r).then(u=>s.flush(r).then(f=>u&&f))):mt(!0)}close(r){return this.flush(r).then(s=>(this.getOptions().enabled=!1,this.emit("close"),s))}getEventProcessors(){return this._eventProcessors}addEventProcessor(r){this._eventProcessors.push(r)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(r){return this._integrations[r]}addIntegration(r){let s=this._integrations[r.name];Zo(this,r,this._integrations),s||Qo(this,[r])}sendEvent(r,s={}){this.emit("beforeSendEvent",r,s);let u=Eu(r,this._dsn,this._options._metadata,this._options.tunnel);for(let d of s.attachments||[])u=Pc(u,Mc(d));let f=this.sendEnvelope(u);f&&f.then(d=>this.emit("afterSendEvent",r,d),null)}sendSession(r){let s=bu(r,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(r,s,u){if(this._options.sendClientReports){let f=`${r}:${s}`;W.log(`Adding outcome: "${f}"`),this._outcomes[f]=(this._outcomes[f]||0)+1}}on(r,s){let u=this._hooks[r]=this._hooks[r]||[];return u.push(s),()=>{let f=u.indexOf(s);f>-1&&u.splice(f,1)}}emit(r,...s){let u=this._hooks[r];u&&u.forEach(f=>f(...s))}sendEnvelope(r){return this.emit("beforeEnvelope",r),this._isEnabled()&&this._transport?this._transport.send(r).then(null,s=>(W.error("Error while sending event:",s),s)):(W.error("Transport disabled"),mt({}))}_setupIntegrations(){let{integrations:r}=this._options;this._integrations=Qu(this,r),Qo(this,r)}_updateSessionFromEvent(r,s){let u=!1,f=!1,d=s.exception&&s.exception.values;if(d){f=!0;for(let I of d){let P=I.mechanism;if(P&&P.handled===!1){u=!0;break}}}let m=r.status==="ok";(m&&r.errors===0||m&&u)&&(Ot(r,{...u&&{status:"crashed"},errors:r.errors||Number(f||u)}),this.captureSession(r))}_isClientDoneProcessing(r){return new $e(s=>{let u=0,f=1,d=setInterval(()=>{this._numProcessing==0?(clearInterval(d),s(!0)):(u+=f,r&&u>=r&&(clearInterval(d),s(!1)))},f)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(r,s,u,f=Se()){let d=this.getOptions(),m=Object.keys(this._integrations);return!s.integrations&&m.length>0&&(s.integrations=m),this.emit("preprocessEvent",r,s),r.type||f.setLastEventId(r.event_id||s.event_id),Ou(d,r,s,u,this,f).then(v=>{if(v===null)return v;let I={...f.getPropagationContext(),...u?u.getPropagationContext():void 0};if(!(v.contexts&&v.contexts.trace)&&I){let{traceId:j,spanId:F,parentSpanId:te,dsc:ie}=I;v.contexts={trace:Fe({trace_id:j,span_id:F,parent_span_id:te}),...v.contexts};let re=ie||$o(j,this);v.sdkProcessingMetadata={dynamicSamplingContext:re,...v.sdkProcessingMetadata}}return v})}_captureEvent(r,s={},u){return this._processEvent(r,s,u).then(f=>f.event_id,f=>{{let d=f;d.logLevel==="log"?W.log(d.message):W.warn(d)}})}_processEvent(r,s,u){let f=this.getOptions(),{sampleRate:d}=f,m=jr(r),v=ts(r),I=r.type||"error",P=`before send for type \`${I}\``,j=typeof d>"u"?void 0:vu(d);if(v&&typeof j=="number"&&Math.random()>j)return this.recordDroppedEvent("sample_rate","error",r),Cn(new Ke(`Discarding event because it's not included in the random sample (sampling rate = ${d})`,"log"));let F=I==="replay_event"?"replay":I,ie=(r.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(r,s,u,ie).then(re=>{if(re===null)throw this.recordDroppedEvent("event_processor",F,r),new Ke("An event processor returned `null`, will not send event.","log");if(s.data&&s.data.__sentry__===!0)return re;let Ie=nl(this,f,re,s);return tl(Ie,P)}).then(re=>{if(re===null){if(this.recordDroppedEvent("before_send",F,r),jr(r)){let Gf=1+(r.spans||[]).length;this._outcomes.span=(this._outcomes.span||0)+Gf}throw new Ke(`${P} returned \`null\`, will not send event.`,"log")}let Kn=u&&u.getSession();!m&&Kn&&this._updateSessionFromEvent(Kn,re);let Ie=re.transaction_info;if(m&&Ie&&re.transaction!==r.transaction){let Ls="custom";re.transaction_info={...Ie,source:Ls}}return this.sendEvent(re,s),re}).then(null,re=>{throw re instanceof Ke?re:(this.captureException(re,{data:{__sentry__:!0},originalException:re}),new Ke(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${re}`))})}_process(r){this._numProcessing++,r.then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s))}_clearOutcomes(){let r=this._outcomes;return this._outcomes={},Object.entries(r).map(([s,u])=>{let[f,d]=s.split(":");return{reason:f,category:d,quantity:u}})}}function tl(n,r){let s=`${r} must return \`null\` or a valid event.`;if(_(n))return n.then(u=>{if(!b(u)&&u!==null)throw new Ke(s);return u},u=>{throw new Ke(`${r} rejected with ${u}`)});if(!b(n)&&n!==null)throw new Ke(s);return n}function nl(n,r,s,u){let{beforeSend:f,beforeSendTransaction:d,beforeSendSpan:m}=r;if(ts(s)&&f)return f(s,u);if(jr(s)){if(s.spans&&m){let v=[];for(let I of s.spans){let P=m(I);P?v.push(P):n.recordDroppedEvent("before_send","span")}s.spans=v}if(d)return d(s,u)}return s}function ts(n){return n.type===void 0}function jr(n){return n.type==="transaction"}function rl(n,r){r.debug===!0&&W.enable(),be().update(r.initialScope);let u=new n(r);return ns(u),u.init(),u}function ns(n){be().setClient(n)}let il=64;function rs(n,r,s=bc(n.bufferSize||il)){let u={},f=m=>s.drain(m);function d(m){let v=[];if(_o(m,(F,te)=>{let ie=bo(te);if(Uc(u,ie)){let re=is(F,te);n.recordDroppedEvent("ratelimit_backoff",ie,re)}else v.push(F)}),v.length===0)return mt({});let I=Qt(m[0],v),P=F=>{_o(I,(te,ie)=>{let re=is(te,ie);n.recordDroppedEvent(F,bo(ie),re)})},j=()=>r({body:Dc(I)}).then(F=>(F.statusCode!==void 0&&(F.statusCode<200||F.statusCode>=300)&&W.warn(`Sentry responded with status code ${F.statusCode} to sent event.`),u=Hc(u,F),F),F=>{throw P("network_error"),F});return s.add(j).then(F=>F,F=>{if(F instanceof Ke)return W.error("Skipped sending event because buffer is full."),P("queue_overflow"),mt({});throw F})}return{send:d,flush:f}}function is(n,r){if(!(r!=="event"&&r!=="transaction"))return Array.isArray(n)?n[1]:void 0}function ol(n,...r){let s=new String(String.raw(n,...r));return s.__sentry_template_string__=n.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),s.__sentry_template_values__=r,s}function sl(n,r,s=[r],u="npm"){let f=n._metadata||{};f.sdk||(f.sdk={name:`sentry.javascript.${r}`,packages:s.map(d=>({name:`${u}:@sentry/${d}`,version:K})),version:K}),n._metadata=f}let al=100;function Ye(n,r){let s=se(),u=Se();if(!s)return;let{beforeBreadcrumb:f=null,maxBreadcrumbs:d=al}=s.getOptions();if(d<=0)return;let v={timestamp:Jt(),...n},I=f?xe(()=>f(v,r)):v;I!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",I,r),u.addBreadcrumb(I,d))}let os,cl="FunctionToString",ss=new WeakMap,as=()=>({name:cl,setupOnce(){os=Function.prototype.toString;try{Function.prototype.toString=function(...n){let r=Ir(this),s=ss.has(se())&&r!==void 0?r:this;return os.apply(s,n)}}catch{}},setup(n){ss.set(n,!0)}}),ul=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],ll="InboundFilters",cs=(n={})=>({name:ll,processEvent(r,s,u){let f=u.getOptions(),d=fl(n,f);return dl(r,d)?null:r}});function fl(n={},r={}){return{allowUrls:[...n.allowUrls||[],...r.allowUrls||[]],denyUrls:[...n.denyUrls||[],...r.denyUrls||[]],ignoreErrors:[...n.ignoreErrors||[],...r.ignoreErrors||[],...n.disableErrorDefaults?[]:ul],ignoreTransactions:[...n.ignoreTransactions||[],...r.ignoreTransactions||[]],ignoreInternal:n.ignoreInternal!==void 0?n.ignoreInternal:!0}}function dl(n,r){return r.ignoreInternal&&vl(n)?(W.warn(`Event dropped due to being internal Sentry Error.
Event: ${tt(n)}`),!0):pl(n,r.ignoreErrors)?(W.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${tt(n)}`),!0):bl(n)?(W.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${tt(n)}`),!0):hl(n,r.ignoreTransactions)?(W.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${tt(n)}`),!0):ml(n,r.denyUrls)?(W.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${tt(n)}.
Url: ${Fn(n)}`),!0):gl(n,r.allowUrls)?!1:(W.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${tt(n)}.
Url: ${Fn(n)}`),!0)}function pl(n,r){return n.type||!r||!r.length?!1:yl(n).some(s=>T(s,r))}function hl(n,r){if(n.type!=="transaction"||!r||!r.length)return!1;let s=n.transaction;return s?T(s,r):!1}function ml(n,r){if(!r||!r.length)return!1;let s=Fn(n);return s?T(s,r):!1}function gl(n,r){if(!r||!r.length)return!0;let s=Fn(n);return s?T(s,r):!0}function yl(n){let r=[];n.message&&r.push(n.message);let s;try{s=n.exception.values[n.exception.values.length-1]}catch{}return s&&s.value&&(r.push(s.value),s.type&&r.push(`${s.type}: ${s.value}`)),r}function vl(n){try{return n.exception.values[0].type==="SentryError"}catch{}return!1}function _l(n=[]){for(let r=n.length-1;r>=0;r--){let s=n[r];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}function Fn(n){try{let r;try{r=n.exception.values[0].stacktrace.frames}catch{}return r?_l(r):null}catch{return W.error(`Cannot extract url for event ${tt(n)}`),null}}function bl(n){return n.type||!n.exception||!n.exception.values||n.exception.values.length===0?!1:!n.message&&!n.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value)}let El="Dedupe",us=()=>{let n;return{name:El,processEvent(r){if(r.type)return r;try{if(wl(r,n))return W.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return n=r}}};function wl(n,r){return r?!!(Sl(n,r)||Il(n,r)):!1}function Sl(n,r){let s=n.message,u=r.message;return!(!s&&!u||s&&!u||!s&&u||s!==u||!fs(n,r)||!ls(n,r))}function Il(n,r){let s=ds(r),u=ds(n);return!(!s||!u||s.type!==u.type||s.value!==u.value||!fs(n,r)||!ls(n,r))}function ls(n,r){let s=so(n),u=so(r);if(!s&&!u)return!0;if(s&&!u||!s&&u||(s=s,u=u,u.length!==s.length))return!1;for(let f=0;f<u.length;f++){let d=u[f],m=s[f];if(d.filename!==m.filename||d.lineno!==m.lineno||d.colno!==m.colno||d.function!==m.function)return!1}return!0}function fs(n,r){let s=n.fingerprint,u=r.fingerprint;if(!s&&!u)return!0;if(s&&!u||!s&&u)return!1;s=s,u=u;try{return s.join("")===u.join("")}catch{return!1}}function ds(n){return n.exception&&n.exception.values&&n.exception.values[0]}function kl(){return{bindClient(n){be().setClient(n)},withScope:Dn,getClient:()=>se(),getScope:be,getIsolationScope:Se,captureException:(n,r)=>be().captureException(n,r),captureMessage:(n,r,s)=>be().captureMessage(n,r,s),captureEvent:Nn,addBreadcrumb:Ye,setUser:Go,setTags:Vo,setTag:zo,setExtra:Wo,setExtras:Ho,setContext:Uo,getIntegration(n){let r=se();return r&&r.getIntegrationByName(n.id)||null},startSession:Mn,endSession:nn,captureSession(n){if(n)return nn();Tl()}}}let xl=kl;function Tl(){let n=be(),r=se(),s=n.getSession();r&&s&&r.captureSession(s)}let Al=n=>(xe(()=>{console.warn("You are using browserTracingIntegration() even though this bundle does not include tracing.")}),{name:"BrowserTracing"});function rn(){xe(()=>{console.warn("You are using metrics even though this bundle does not include tracing.")})}let Ol={increment:rn,distribution:rn,set:rn,gauge:rn,timing:(n,r)=>{if(rn(),typeof r=="function")return r()}},J=B,Kr=0;function ps(){return Kr>0}function Cl(){Kr++,setTimeout(()=>{Kr--})}function Rt(n,r={},s){if(typeof n!="function")return n;try{let f=n.__sentry_wrapped__;if(f)return f;if(Ir(n))return n}catch{return n}let u=function(){let f=Array.prototype.slice.call(arguments);try{s&&typeof s=="function"&&s.apply(this,arguments);let d=f.map(m=>Rt(m,r));return n.apply(this,d)}catch(d){throw Cl(),Dn(m=>{m.addEventProcessor(v=>(r.mechanism&&(Cr(v,void 0,void 0),Xt(v,r.mechanism)),v.extra={...v.extra,arguments:f},v)),Ko(d)}),d}};try{for(let f in n)Object.prototype.hasOwnProperty.call(n,f)&&(u[f]=n[f])}catch{}Qi(u,n),dt(n,"__sentry_wrapped__",u);try{Object.getOwnPropertyDescriptor(u,"name").configurable&&Object.defineProperty(u,"name",{get(){return n.name}})}catch{}return u}function $n(n,r){let s=Hr(n,r),u={type:r&&r.name,value:Ml(r)};return s.length&&(u.stacktrace={frames:s}),u.type===void 0&&u.value===""&&(u.value="Unrecoverable error caught"),u}function Rl(n,r,s,u){let f=se(),d=f&&f.getOptions().normalizeDepth,m=Ll(r),v={__serialized__:mo(r,d)};if(m)return{exception:{values:[$n(n,m)]},extra:v};let I={exception:{values:[{type:y(r)?r.constructor.name:u?"UnhandledRejection":"Error",value:Fl(r,{isUnhandledRejection:u})}]},extra:v};if(s){let P=Hr(n,s);P.length&&(I.exception.values[0].stacktrace={frames:P})}return I}function Ur(n,r){return{exception:{values:[$n(n,r)]}}}function Hr(n,r){let s=r.stacktrace||r.stack||"",u=Dl(r),f=Nl(r);try{return n(s,u,f)}catch{}return[]}let Pl=/Minified React error #\d+;/i;function Dl(n){return n&&Pl.test(n.message)?1:0}function Nl(n){return typeof n.framesToPop=="number"?n.framesToPop:0}function Ml(n){let r=n&&n.message;return r?r.error&&typeof r.error.message=="string"?r.error.message:r:"No error message"}function hs(n,r,s,u){let f=s&&s.syntheticException||void 0,d=Wr(n,r,f,u);return Xt(d),d.level="error",s&&s.event_id&&(d.event_id=s.event_id),mt(d)}function ms(n,r,s="info",u,f){let d=u&&u.syntheticException||void 0,m=Vr(n,r,d,f);return m.level=s,u&&u.event_id&&(m.event_id=u.event_id),mt(m)}function Wr(n,r,s,u,f){let d;if(a(r)&&r.error)return Ur(n,r.error);if(c(r)||l(r)){let m=r;if("stack"in r)d=Ur(n,r);else{let v=m.name||(c(m)?"DOMError":"DOMException"),I=m.message?`${v}: ${m.message}`:v;d=Vr(n,I,s,u),Cr(d,I)}return"code"in m&&(d.tags={...d.tags,"DOMException.code":`${m.code}`}),d}return i(r)?Ur(n,r):b(r)||y(r)?(d=Rl(n,r,s,f),Xt(d,{synthetic:!0}),d):(d=Vr(n,r,s,u),Cr(d,`${r}`,void 0),Xt(d,{synthetic:!0}),d)}function Vr(n,r,s,u){let f={};if(u&&s){let d=Hr(n,s);d.length&&(f.exception={values:[{value:r,stacktrace:{frames:d}}]})}if(h(r)){let{__sentry_template_string__:d,__sentry_template_values__:m}=r;return f.logentry={message:d,params:m},f}return f.message=r,f}function Fl(n,{isUnhandledRejection:r}){let s=Za(n),u=r?"promise rejection":"exception";return a(n)?`Event \`ErrorEvent\` captured as ${u} with message \`${n.message}\``:y(n)?`Event \`${$l(n)}\` (type=${n.type}) captured as ${u}`:`Object captured as ${u} with keys: ${s}`}function $l(n){try{let r=Object.getPrototypeOf(n);return r?r.constructor.name:void 0}catch{}}function Ll(n){for(let r in n)if(Object.prototype.hasOwnProperty.call(n,r)){let s=n[r];if(s instanceof Error)return s}}function gs(n,{metadata:r,tunnel:s,dsn:u}){let f={event_id:n.event_id,sent_at:new Date().toISOString(),...r&&r.sdk&&{sdk:{name:r.sdk.name,version:r.sdk.version}},...!!s&&!!u&&{dsn:qt(u)}},d=Bl(n);return Qt(f,[d])}function Bl(n){return[{type:"user_report"},n]}class ys extends el{constructor(r){let s={parentSpanIsAlwaysRootSpan:!0,...r},u=J.SENTRY_SDK_SOURCE||hc();sl(s,"browser",["browser"],u),super(s),s.sendClientReports&&J.document&&J.document.addEventListener("visibilitychange",()=>{J.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(r,s){return hs(this._options.stackParser,r,s,this._options.attachStacktrace)}eventFromMessage(r,s="info",u){return ms(this._options.stackParser,r,s,u,this._options.attachStacktrace)}captureUserFeedback(r){if(!this._isEnabled()){W.warn("SDK not enabled, will not capture user feedback.");return}let s=gs(r,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(s)}_prepareEvent(r,s,u){return r.platform=r.platform||"javascript",super._prepareEvent(r,s,u)}_flushOutcomes(){let r=this._clearOutcomes();if(r.length===0){W.log("No outcomes to send");return}if(!this._dsn){W.log("No dsn provided, will not send outcomes");return}W.log("Sending outcomes:",r);let s=Lc(r,this._options.tunnel&&qt(this._dsn));this.sendEnvelope(s)}}let Ee=B,jl=1e3,vs,zr,Gr;function Kl(n){let r="dom";pt(r,n),ht(r,Ul)}function Ul(){if(!Ee.document)return;let n=Be.bind(null,"dom"),r=_s(n,!0);Ee.document.addEventListener("click",r,!1),Ee.document.addEventListener("keypress",r,!1),["EventTarget","Node"].forEach(s=>{let u=Ee[s]&&Ee[s].prototype;!u||!u.hasOwnProperty||!u.hasOwnProperty("addEventListener")||(he(u,"addEventListener",function(f){return function(d,m,v){if(d==="click"||d=="keypress")try{let I=this,P=I.__sentry_instrumentation_handlers__=I.__sentry_instrumentation_handlers__||{},j=P[d]=P[d]||{refCount:0};if(!j.handler){let F=_s(n);j.handler=F,f.call(this,d,F,v)}j.refCount++}catch{}return f.call(this,d,m,v)}}),he(u,"removeEventListener",function(f){return function(d,m,v){if(d==="click"||d=="keypress")try{let I=this,P=I.__sentry_instrumentation_handlers__||{},j=P[d];j&&(j.refCount--,j.refCount<=0&&(f.call(this,d,j.handler,v),j.handler=void 0,delete P[d]),Object.keys(P).length===0&&delete I.__sentry_instrumentation_handlers__)}catch{}return f.call(this,d,m,v)}}))})}function Hl(n){if(n.type!==zr)return!1;try{if(!n.target||n.target._sentryId!==Gr)return!1}catch{}return!0}function Wl(n,r){return n!=="keypress"?!1:!r||!r.tagName?!0:!(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable)}function _s(n,r=!1){return s=>{if(!s||s._sentryCaptured)return;let u=Vl(s);if(Wl(s.type,u))return;dt(s,"_sentryCaptured",!0),u&&!u._sentryId&&dt(u,"_sentryId",fe());let f=s.type==="keypress"?"input":s.type;Hl(s)||(n({event:s,name:f,global:r}),zr=s.type,Gr=u?u._sentryId:void 0),clearTimeout(vs),vs=Ee.setTimeout(()=>{Gr=void 0,zr=void 0},jl)}}function Vl(n){try{return n.target}catch{return null}}let Ln;function bs(n){let r="history";pt(r,n),ht(r,zl)}function zl(){if(!Wc())return;let n=Ee.onpopstate;Ee.onpopstate=function(...s){let u=Ee.location.href,f=Ln;if(Ln=u,Be("history",{from:f,to:u}),n)try{return n.apply(this,s)}catch{}};function r(s){return function(...u){let f=u.length>2?u[2]:void 0;if(f){let d=Ln,m=String(f);Ln=m,Be("history",{from:d,to:m})}return s.apply(this,u)}}he(Ee.history,"pushState",r),he(Ee.history,"replaceState",r)}let Bn={};function Gl(n){let r=Bn[n];if(r)return r;let s=Ee[n];if(Ar(s))return Bn[n]=s.bind(Ee);let u=Ee.document;if(u&&typeof u.createElement=="function")try{let f=u.createElement("iframe");f.hidden=!0,u.head.appendChild(f);let d=f.contentWindow;d&&d[n]&&(s=d[n]),u.head.removeChild(f)}catch(f){W.warn(`Could not create sandbox iframe for ${n} check, bailing to window.${n}: `,f)}return s&&(Bn[n]=s.bind(Ee))}function Es(n){Bn[n]=void 0}let on="__sentry_xhr_v3__";function Yl(n){let r="xhr";pt(r,n),ht(r,ql)}function ql(){if(!Ee.XMLHttpRequest)return;let n=XMLHttpRequest.prototype;he(n,"open",function(r){return function(...s){let u=Ve()*1e3,f=p(s[0])?s[0].toUpperCase():void 0,d=Jl(s[1]);if(!f||!d)return r.apply(this,s);this[on]={method:f,url:d,request_headers:{}},f==="POST"&&d.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let m=()=>{let v=this[on];if(v&&this.readyState===4){try{v.status_code=this.status}catch{}let I={endTimestamp:Ve()*1e3,startTimestamp:u,xhr:this};Be("xhr",I)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?he(this,"onreadystatechange",function(v){return function(...I){return m(),v.apply(this,I)}}):this.addEventListener("readystatechange",m),he(this,"setRequestHeader",function(v){return function(...I){let[P,j]=I,F=this[on];return F&&p(P)&&p(j)&&(F.request_headers[P.toLowerCase()]=j),v.apply(this,I)}}),r.apply(this,s)}}),he(n,"send",function(r){return function(...s){let u=this[on];if(!u)return r.apply(this,s);s[0]!==void 0&&(u.body=s[0]);let f={startTimestamp:Ve()*1e3,xhr:this};return Be("xhr",f),r.apply(this,s)}})}function Jl(n){if(p(n))return n;try{return n.toString()}catch{}}function ws(n,r=Gl("fetch")){let s=0,u=0;function f(d){let m=d.body.length;s+=m,u++;let v={body:d.body,method:"POST",referrerPolicy:"origin",headers:n.headers,keepalive:s<=6e4&&u<15,...n.fetchOptions};if(!r)return Es("fetch"),Cn("No fetch implementation available");try{return r(n.url,v).then(I=>(s-=m,u--,{statusCode:I.status,headers:{"x-sentry-rate-limits":I.headers.get("X-Sentry-Rate-Limits"),"retry-after":I.headers.get("Retry-After")}}))}catch(I){return Es("fetch"),s-=m,u--,Cn(I)}}return rs(n,f)}let Xl=10,Ql=20,Zl=30,ef=40,tf=50;function Pt(n,r,s,u){let f={filename:n,function:r==="<anonymous>"?Ue:r,in_app:!0};return s!==void 0&&(f.lineno=s),u!==void 0&&(f.colno=u),f}let nf=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,rf=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,of=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ss=[Zl,n=>{let r=nf.exec(n);if(r){let[,u,f,d]=r;return Pt(u,Ue,+f,+d)}let s=rf.exec(n);if(s){if(s[2]&&s[2].indexOf("eval")===0){let m=of.exec(s[2]);m&&(s[2]=m[1],s[3]=m[2],s[4]=m[3])}let[f,d]=Ts(s[1]||Ue,s[2]);return Pt(d,f,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],sf=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,af=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Is=[tf,n=>{let r=sf.exec(n);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){let d=af.exec(r[3]);d&&(r[1]=r[1]||"eval",r[3]=d[1],r[4]=d[2],r[5]="")}let u=r[3],f=r[1]||Ue;return[f,u]=Ts(f,u),Pt(u,f,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}}],cf=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,uf=[ef,n=>{let r=cf.exec(n);return r?Pt(r[2],r[1]||Ue,+r[3],r[4]?+r[4]:void 0):void 0}],lf=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,ff=[Xl,n=>{let r=lf.exec(n);return r?Pt(r[2],r[3]||Ue,+r[1]):void 0}],df=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,pf=[Ql,n=>{let r=df.exec(n);return r?Pt(r[5],r[3]||r[4]||Ue,+r[1],+r[2]):void 0}],ks=[Ss,Is],xs=oo(...ks),Ts=(n,r)=>{let s=n.indexOf("safari-extension")!==-1,u=n.indexOf("safari-web-extension")!==-1;return s||u?[n.indexOf("@")!==-1?n.split("@")[0]:Ue,s?`safari-extension:${r}`:`safari-web-extension:${r}`]:[n,r]},jn=1024,hf="Breadcrumbs",As=(n={})=>{let r={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...n};return{name:hf,setup(s){r.console&&rc(yf(s)),r.dom&&Kl(gf(s,r.dom)),r.xhr&&Yl(vf(s)),r.fetch&&ac(_f(s)),r.history&&bs(bf(s)),r.sentry&&s.on("beforeSendEvent",mf(s))}}};function mf(n){return function(s){se()===n&&Ye({category:`sentry.${s.type==="transaction"?"transaction":"event"}`,event_id:s.event_id,level:s.level,message:tt(s)},{event:s})}}function gf(n,r){return function(u){if(se()!==n)return;let f,d,m=typeof r=="object"?r.serializeAttribute:void 0,v=typeof r=="object"&&typeof r.maxStringLength=="number"?r.maxStringLength:void 0;v&&v>jn&&(W.warn(`\`dom.maxStringLength\` cannot exceed ${jn}, but a value of ${v} was configured. Sentry will use ${jn} instead.`),v=jn),typeof m=="string"&&(m=[m]);try{let P=u.event,j=Ef(P)?P.target:P;f=ue(j,{keyAttrs:m,maxStringLength:v}),d=Me(j)}catch{f="<unknown>"}if(f.length===0)return;let I={category:`ui.${u.name}`,message:f};d&&(I.data={"ui.component_name":d}),Ye(I,{event:u.event,name:u.name,global:u.global})}}function yf(n){return function(s){if(se()!==n)return;let u={category:"console",data:{arguments:s.args,logger:"console"},level:wc(s.level),message:A(s.args," ")};if(s.level==="assert")if(s.args[0]===!1)u.message=`Assertion failed: ${A(s.args.slice(1)," ")||"console.assert"}`,u.data.arguments=s.args.slice(1);else return;Ye(u,{input:s.args,level:s.level})}}function vf(n){return function(s){if(se()!==n)return;let{startTimestamp:u,endTimestamp:f}=s,d=s.xhr[on];if(!u||!f||!d)return;let{method:m,url:v,status_code:I,body:P}=d,j={method:m,url:v,status_code:I},F={xhr:s.xhr,input:P,startTimestamp:u,endTimestamp:f};Ye({category:"xhr",data:j,type:"http"},F)}}function _f(n){return function(s){if(se()!==n)return;let{startTimestamp:u,endTimestamp:f}=s;if(f&&!(s.fetchData.url.match(/sentry_key/)&&s.fetchData.method==="POST"))if(s.error){let d=s.fetchData,m={data:s.error,input:s.args,startTimestamp:u,endTimestamp:f};Ye({category:"fetch",data:d,level:"error",type:"http"},m)}else{let d=s.response,m={...s.fetchData,status_code:d&&d.status},v={input:s.args,response:d,startTimestamp:u,endTimestamp:f};Ye({category:"fetch",data:m,type:"http"},v)}}}function bf(n){return function(s){if(se()!==n)return;let u=s.from,f=s.to,d=Pr(J.location.href),m=u?Pr(u):void 0,v=Pr(f);(!m||!m.path)&&(m=d),d.protocol===v.protocol&&d.host===v.host&&(f=v.relative),d.protocol===m.protocol&&d.host===m.host&&(u=m.relative),Ye({category:"navigation",data:{from:u,to:f}})}}function Ef(n){return!!n&&!!n.target}let wf=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Sf="BrowserApiErrors",Os=(n={})=>{let r={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...n};return{name:Sf,setupOnce(){r.setTimeout&&he(J,"setTimeout",Cs),r.setInterval&&he(J,"setInterval",Cs),r.requestAnimationFrame&&he(J,"requestAnimationFrame",If),r.XMLHttpRequest&&"XMLHttpRequest"in J&&he(XMLHttpRequest.prototype,"send",kf);let s=r.eventTarget;s&&(Array.isArray(s)?s:wf).forEach(xf)}}};function Cs(n){return function(...r){let s=r[0];return r[0]=Rt(s,{mechanism:{data:{function:et(n)},handled:!1,type:"instrument"}}),n.apply(this,r)}}function If(n){return function(r){return n.apply(this,[Rt(r,{mechanism:{data:{function:"requestAnimationFrame",handler:et(n)},handled:!1,type:"instrument"}})])}}function kf(n){return function(...r){let s=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(f=>{f in s&&typeof s[f]=="function"&&he(s,f,function(d){let m={mechanism:{data:{function:f,handler:et(d)},handled:!1,type:"instrument"}},v=Ir(d);return v&&(m.mechanism.data.handler=et(v)),Rt(d,m)})}),n.apply(this,r)}}function xf(n){let r=J,s=r[n]&&r[n].prototype;!s||!s.hasOwnProperty||!s.hasOwnProperty("addEventListener")||(he(s,"addEventListener",function(u){return function(f,d,m){try{typeof d.handleEvent=="function"&&(d.handleEvent=Rt(d.handleEvent,{mechanism:{data:{function:"handleEvent",handler:et(d),target:n},handled:!1,type:"instrument"}}))}catch{}return u.apply(this,[f,Rt(d,{mechanism:{data:{function:"addEventListener",handler:et(d),target:n},handled:!1,type:"instrument"}}),m])}}),he(s,"removeEventListener",function(u){return function(f,d,m){let v=d;try{let I=v&&v.__sentry_wrapped__;I&&u.call(this,f,I,m)}catch{}return u.call(this,f,v,m)}}))}let Tf="GlobalHandlers",Rs=(n={})=>{let r={onerror:!0,onunhandledrejection:!0,...n};return{name:Tf,setupOnce(){Error.stackTraceLimit=50},setup(s){r.onerror&&(Af(s),Ps("onerror")),r.onunhandledrejection&&(Of(s),Ps("onunhandledrejection"))}}};function Af(n){lc(r=>{let{stackParser:s,attachStacktrace:u}=Ds();if(se()!==n||ps())return;let{msg:f,url:d,line:m,column:v,error:I}=r,P=Pf(Wr(s,I||f,void 0,u,!1),d,m,v);P.level="error",Nn(P,{originalException:I,mechanism:{handled:!1,type:"onerror"}})})}function Of(n){dc(r=>{let{stackParser:s,attachStacktrace:u}=Ds();if(se()!==n||ps())return;let f=Cf(r),d=g(f)?Rf(f):Wr(s,f,void 0,u,!0);d.level="error",Nn(d,{originalException:f,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Cf(n){if(g(n))return n;try{if("reason"in n)return n.reason;if("detail"in n&&"reason"in n.detail)return n.detail.reason}catch{}return n}function Rf(n){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(n)}`}]}}}function Pf(n,r,s,u){let f=n.exception=n.exception||{},d=f.values=f.values||[],m=d[0]=d[0]||{},v=m.stacktrace=m.stacktrace||{},I=v.frames=v.frames||[],P=isNaN(parseInt(u,10))?void 0:u,j=isNaN(parseInt(s,10))?void 0:s,F=p(r)&&r.length>0?r:je();return I.length===0&&I.push({colno:P,filename:F,function:Ue,in_app:!0,lineno:j}),n}function Ps(n){W.log(`Global Handler attached: ${n}`)}function Ds(){let n=se();return n&&n.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}let Ns=()=>({name:"HttpContext",preprocessEvent(n){if(!J.navigator&&!J.location&&!J.document)return;let r=n.request&&n.request.url||J.location&&J.location.href,{referrer:s}=J.document||{},{userAgent:u}=J.navigator||{},f={...n.request&&n.request.headers,...s&&{Referer:s},...u&&{"User-Agent":u}},d={...n.request,...r&&{url:r},headers:f};n.request=d}}),Df="cause",Nf=5,Mf="LinkedErrors",Ms=(n={})=>{let r=n.limit||Nf,s=n.key||Df;return{name:Mf,preprocessEvent(u,f,d){let m=d.getOptions();D($n,m.stackParser,m.maxValueLength,s,r,u,f)}}};function Fs(n){return[cs(),as(),Os(),As(),Rs(),Ms(),us(),Ns()]}function Ff(n={}){return{...{defaultIntegrations:Fs(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:J.SENTRY_RELEASE&&J.SENTRY_RELEASE.id?J.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0},...n}}function $f(){let n=J,r=n.chrome?"chrome":"browser",s=n[r],u=s&&s.runtime&&s.runtime.id,f=J.location&&J.location.href||"",d=["chrome-extension:","moz-extension:","ms-browser-extension:"],m=!!u&&J===J.top&&d.some(I=>f.startsWith(`${I}//`)),v=typeof n.nw<"u";return!!u&&!m&&!v}function Lf(n={}){let r=Ff(n);if($f()){xe(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}co()||W.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");let s={...r,stackParser:tc(r.stackParser||xs),integrations:Xu(r),transport:r.transport||ws},u=rl(ys,s);return r.autoSessionTracking&&Uf(),u}function Bf(n={}){if(!J.document){W.error("Global document not defined in showReportDialog call");return}let r=be(),s=r.getClient(),u=s&&s.getDsn();if(!u){W.error("DSN not configured for showReportDialog call");return}if(r&&(n.user={...r.getUser(),...n.user}),!n.eventId){let v=Yo();v&&(n.eventId=v)}let f=J.document.createElement("script");f.async=!0,f.crossOrigin="anonymous",f.src=qu(u,n),n.onLoad&&(f.onload=n.onLoad);let{onClose:d}=n;if(d){let v=I=>{if(I.data==="__sentry_reportdialog_closed__")try{d()}finally{J.removeEventListener("message",v)}};J.addEventListener("message",v)}let m=J.document.head||J.document.body;m?m.appendChild(f):W.error("Not injecting report dialog. No injection point found in HTML")}function jf(){}function Kf(n){n()}function Uf(){if(typeof J.document>"u"){W.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}Mn({ignoreDuration:!0}),Br(),bs(({from:n,to:r})=>{n!==void 0&&n!==r&&(Mn({ignoreDuration:!0}),Br())})}function Hf(n){let r=se();r&&r.captureUserFeedback(n)}let Wf={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},$s=J;async function Vf(n){let r=Wf[n],s=$s.Sentry=$s.Sentry||{};if(!r)throw new Error(`Cannot lazy load integration: ${n}`);let u=s[n];if(typeof u=="function")return u;let f=zf(r),d=J.document.createElement("script");d.src=f,d.crossOrigin="anonymous",d.referrerPolicy="origin";let m=new Promise((I,P)=>{d.addEventListener("load",()=>I()),d.addEventListener("error",P)});J.document.body.appendChild(d);try{await m}catch{throw new Error(`Error when loading integration: ${n}`)}let v=s[n];if(typeof v!="function")throw new Error(`Could not load integration: ${n}`);return v}function zf(n){let r=se(),s=r&&r.getOptions(),u=s&&s.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${K}/${n}.min.js`,u).toString()}return e.BrowserClient=ys,e.SDK_VERSION=K,e.SEMANTIC_ATTRIBUTE_SENTRY_OP=Ro,e.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=Po,e.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=Co,e.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=Oo,e.Scope=Ge,e.WINDOW=J,e.addBreadcrumb=Ye,e.addEventProcessor=Wu,e.addIntegration=Zu,e.breadcrumbsIntegration=As,e.browserApiErrorsIntegration=Os,e.browserTracingIntegration=Al,e.captureEvent=Nn,e.captureException=Ko,e.captureMessage=ju,e.captureSession=Br,e.captureUserFeedback=Hf,e.chromeStackLineParser=Ss,e.close=Uu,e.continueTrace=wu,e.createTransport=rs,e.createUserFeedbackEnvelope=gs,e.dedupeIntegration=us,e.defaultStackLineParsers=ks,e.defaultStackParser=xs,e.endSession=nn,e.eventFromException=hs,e.eventFromMessage=ms,e.exceptionFromError=$n,e.feedbackAsyncIntegration=Io,e.feedbackIntegration=Io,e.flush=Ku,e.forceLoad=jf,e.functionToStringIntegration=as,e.geckoStackLineParser=Is,e.getClient=se,e.getCurrentHub=xl,e.getCurrentScope=be,e.getDefaultIntegrations=Fs,e.getGlobalScope=Ao,e.getIsolationScope=Se,e.globalHandlersIntegration=Rs,e.httpContextIntegration=Ns,e.inboundFiltersIntegration=cs,e.init=Lf,e.isInitialized=Hu,e.lastEventId=Yo,e.lazyLoadIntegration=Vf,e.linkedErrorsIntegration=Ms,e.makeFetchTransport=ws,e.metrics=Ol,e.onLoad=Kf,e.opera10StackLineParser=ff,e.opera11StackLineParser=pf,e.parameterize=ol,e.replayIntegration=Gc,e.setContext=Uo,e.setCurrentClient=ns,e.setExtra=Wo,e.setExtras=Ho,e.setTag=zo,e.setTags=Vo,e.setUser=Go,e.showReportDialog=Bf,e.spanToBaggageHeader=yu,e.spanToJSON=en,e.spanToTraceHeader=fu,e.startSession=Mn,e.winjsStackLineParser=uf,e.withIsolationScope=iu,e.withScope=Dn,e}({});var Yr,sn,js,Ks,Us,Yf,an,me,ge,ye,ve,qr,Jr,Un,Xr,Hs,Ws,qe,Hn;qe=function(e,t){var i,o;return i=(e&65535)+(t&65535),o=(e>>16)+(t>>16)+(i>>16),o<<16|i&65535};js=function(e,t){return e<<t|e>>>32-t};an=function(e,t,i,o,a,c){return qe(js(qe(qe(t,e),qe(o,c)),a),i)};me=function(e,t,i,o,a,c,l){return an(t&i|~t&o,e,t,a,c,l)};ge=function(e,t,i,o,a,c,l){return an(t&o|i&~o,e,t,a,c,l)};ye=function(e,t,i,o,a,c,l){return an(t^i^o,e,t,a,c,l)};ve=function(e,t,i,o,a,c,l){return an(i^(t|~o),e,t,a,c,l)};sn=function(e,t){var i,o,a,c,l,p,h,g,b;for(e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t,l=void 0,p=void 0,h=void 0,g=void 0,b=void 0,i=1732584193,o=-271733879,a=-1732584194,c=271733878,l=0;l<e.length;)p=i,h=o,g=a,b=c,i=me(i,o,a,c,e[l],7,-680876936),c=me(c,i,o,a,e[l+1],12,-389564586),a=me(a,c,i,o,e[l+2],17,606105819),o=me(o,a,c,i,e[l+3],22,-1044525330),i=me(i,o,a,c,e[l+4],7,-176418897),c=me(c,i,o,a,e[l+5],12,1200080426),a=me(a,c,i,o,e[l+6],17,-1473231341),o=me(o,a,c,i,e[l+7],22,-45705983),i=me(i,o,a,c,e[l+8],7,1770035416),c=me(c,i,o,a,e[l+9],12,-1958414417),a=me(a,c,i,o,e[l+10],17,-42063),o=me(o,a,c,i,e[l+11],22,-1990404162),i=me(i,o,a,c,e[l+12],7,1804603682),c=me(c,i,o,a,e[l+13],12,-40341101),a=me(a,c,i,o,e[l+14],17,-1502002290),o=me(o,a,c,i,e[l+15],22,1236535329),i=ge(i,o,a,c,e[l+1],5,-165796510),c=ge(c,i,o,a,e[l+6],9,-1069501632),a=ge(a,c,i,o,e[l+11],14,643717713),o=ge(o,a,c,i,e[l],20,-373897302),i=ge(i,o,a,c,e[l+5],5,-701558691),c=ge(c,i,o,a,e[l+10],9,38016083),a=ge(a,c,i,o,e[l+15],14,-660478335),o=ge(o,a,c,i,e[l+4],20,-405537848),i=ge(i,o,a,c,e[l+9],5,568446438),c=ge(c,i,o,a,e[l+14],9,-1019803690),a=ge(a,c,i,o,e[l+3],14,-187363961),o=ge(o,a,c,i,e[l+8],20,1163531501),i=ge(i,o,a,c,e[l+13],5,-1444681467),c=ge(c,i,o,a,e[l+2],9,-51403784),a=ge(a,c,i,o,e[l+7],14,1735328473),o=ge(o,a,c,i,e[l+12],20,-1926607734),i=ye(i,o,a,c,e[l+5],4,-378558),c=ye(c,i,o,a,e[l+8],11,-2022574463),a=ye(a,c,i,o,e[l+11],16,1839030562),o=ye(o,a,c,i,e[l+14],23,-35309556),i=ye(i,o,a,c,e[l+1],4,-1530992060),c=ye(c,i,o,a,e[l+4],11,1272893353),a=ye(a,c,i,o,e[l+7],16,-155497632),o=ye(o,a,c,i,e[l+10],23,-1094730640),i=ye(i,o,a,c,e[l+13],4,681279174),c=ye(c,i,o,a,e[l],11,-358537222),a=ye(a,c,i,o,e[l+3],16,-722521979),o=ye(o,a,c,i,e[l+6],23,76029189),i=ye(i,o,a,c,e[l+9],4,-640364487),c=ye(c,i,o,a,e[l+12],11,-421815835),a=ye(a,c,i,o,e[l+15],16,530742520),o=ye(o,a,c,i,e[l+2],23,-995338651),i=ve(i,o,a,c,e[l],6,-198630844),c=ve(c,i,o,a,e[l+7],10,1126891415),a=ve(a,c,i,o,e[l+14],15,-1416354905),o=ve(o,a,c,i,e[l+5],21,-57434055),i=ve(i,o,a,c,e[l+12],6,1700485571),c=ve(c,i,o,a,e[l+3],10,-1894986606),a=ve(a,c,i,o,e[l+10],15,-1051523),o=ve(o,a,c,i,e[l+1],21,-2054922799),i=ve(i,o,a,c,e[l+8],6,1873313359),c=ve(c,i,o,a,e[l+15],10,-30611744),a=ve(a,c,i,o,e[l+6],15,-1560198380),o=ve(o,a,c,i,e[l+13],21,1309151649),i=ve(i,o,a,c,e[l+4],6,-145523070),c=ve(c,i,o,a,e[l+11],10,-1120210379),a=ve(a,c,i,o,e[l+2],15,718787259),o=ve(o,a,c,i,e[l+9],21,-343485551),i=qe(i,p),o=qe(o,h),a=qe(a,g),c=qe(c,b),l+=16;return[i,o,a,c]};Yr=function(e){var t,i,o;for(t=void 0,o="",i=e.length*32,t=0;t<i;)o+=String.fromCharCode(e[t>>5]>>>t%32&255),t+=8;return o};Un=function(e){var t,i,o;for(t=void 0,o=[],o[(e.length>>2)-1]=void 0,t=0;t<o.length;)o[t]=0,t+=1;for(i=e.length*8,t=0;t<i;)o[t>>5]|=(e.charCodeAt(t/8)&255)<<t%32,t+=8;return o};Ws=function(e){return Yr(sn(Un(e),e.length*8))};Hs=function(e,t){var i,o,a,c,l;for(a=void 0,i=Un(e),c=[],l=[],o=void 0,c[15]=l[15]=void 0,i.length>16&&(i=sn(i,e.length*8)),a=0;a<16;)c[a]=i[a]^909522486,l[a]=i[a]^1549556828,a+=1;return o=sn(c.concat(Un(t)),512+t.length*8),Yr(sn(l.concat(o),640))};Xr=function(e){var t,i,o,a;for(t="0123456789abcdef",o="",a=void 0,i=void 0,i=0;i<e.length;)a=e.charCodeAt(i),o+=t.charAt(a>>>4&15)+t.charAt(a&15),i+=1;return o};Hn=function(e){return unescape(encodeURIComponent(e))};Jr=function(e){return Ws(Hn(e))};Us=function(e){return Xr(Jr(e))};qr=function(e,t){return Hs(Hn(e),Hn(t))};Ks=function(e,t){return Xr(qr(e,t))};var qf=Yf=function(e,t,i){return t?i?qr(t,e):Ks(t,e):i?Jr(e):Us(e)},Vs=qf;var Dt=Bs,Qr=!1;async function cn(e){return(await chrome.storage.local.get(e)||{})[e]}async function Jf(){let e=await cn(C.q);try{if(!e||(e?.lastUpdated||0)+(e?.validity||0)<Date.now()){X()("Fetching sentry filter...");let t=Je().extVersionFull,i=await fetch(C.ue.replace("%VERSION%",t),{cache:"reload"});if(i.status===200){e=await i.json(),e.lastUpdated=Date.now();let o={};o[C.q]=e,await chrome.storage.local.set(o)}}}catch{}return e||{}}function Xf(e,t,i){if(e.action==="deny all")return X()("Error reporting is 'deny all'"),!0;if(e.action==="filter"&&e.patterns){Re&&(i&&console.log(i),t&&console.log(t));let o=!1;for(let a of e.patterns){if(a.hash&&a.hash===t)X()("Sentry filter matched hash: "+t),o=!0;else if(a.regex&&i){let[,c,l]=a.regex.match(/^\/(.+)\/(.*)$/)||[];o=c&&i.match(new RegExp(c,l))!==null,o&&X()("Sentry filter matched regex: "+a.regex)}if(o)break}return o}else return!1}async function Qf(e){let t=await cn(C.O),i=await cn(C.v),o=await cn(C.i)=="true";return e.tags={...e.tags||{}},t&&(e.tags.UUID=t),i&&(e.tags.Serial=i),e.tags.Pro=o,e}function zs(){Qr=!0;let e=chrome.runtime.id;try{let t=function(i){function o(a){let c={body:a.body,method:"POST",referrerPolicy:"origin",headers:i.headers,...i.fetchOptions};return fetch(i.url,c).then(l=>({statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}return Dt.createTransport(i,o)};Wn()&&delete chrome.runtime.id,Dt.init({dsn:"https://b3cea7a848c3686ab337138a6a9751d0@o4507590541901824.ingest.us.sentry.io/4507590546096128",release:"head@"+Je().extVersionFull,debug:Re,autoSessionTracking:!1,transport:t,allowUrls:[/mcbpblocgmgfnpjjppndjkmgjaogfceg/,/kmmldmlijnljnnhagfldmihaimmholga/],integrations:[],beforeSend:i=>cn(C.S).then(o=>o==="false"?(Re&&(X()(i),X()("Sentry is disabled")),null):new Promise(a=>{let c=(l,p)=>{i.breadcrumbs=[{level:l,timestamp:Date.now()/1e3,message:p},...i.breadcrumbs||[]]};try{let l,p,h=i?.exception?.values?.slice(-1).pop();if(h){let b=h.stacktrace?.frames;if(b?.length>0){let y=b.map(R=>({filename:R.filename,lineno:R.lineno,colno:R.colno,function:R.function})),w=JSON.stringify(y);l=Vs(w),c("debug",w),c("info",`FSHASH: ${l}`)}p=h.type.trim()+": "+h.value.trim()}!l&&!p&&a(i);let g=Jf().then(b=>Xf(b,l,p)?null:Qf(i)).catch(b=>(c("debug",b.message+" "+b.stack),i));a(g)}catch(l){c("debug",l.message+" "+l.stack),a(i)}}))})}finally{Wn()&&(chrome.runtime.id=e)}}function Zr(e){Qr&&Dt.addBreadcrumb({message:e})}function ei(e,t){Qr&&Dt.captureMessage(e,t)}function Q(e,t){return gt.getOption(e,t)}function Z(e,t){gt.setOption(e,t+"")}var gt={storage:{},onChanged:{listeners:[],addListener(e){this.listeners.indexOf(e)===-1&&this.listeners.push(e)},removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)},notifyListeners(e){this.listeners.forEach(t=>{try{t(e)}catch{}})}},initPromise:null,inited:!1,onInit:null,assignOptions:function(e){this.storage={...this.storage,...e},chrome.storage.local.set(e)},ensureLoaded:function(){return this.initPromise=this.initPromise||new Promise(e=>{chrome.storage.onChanged.addListener((i,o)=>{if(o==="local"){let a=Object.keys(i);for(let c of a)this.storage[c]=i[c].newValue;this.inited&&this.onChanged.notifyListeners(i)}});let t=i=>{this.inited=!0,i&&(this.storage=i),this.onInit?this.onInit().then(()=>this.onInit=null).finally(e):e()};chrome.storage.local.get(null,i=>{chrome.runtime.lastError&&console.error(chrome.runtime.lastError),i?t(i):(console.log("chrome.storage.local.get failed to obtain preferences"),setTimeout(()=>chrome.storage.local.get(null,a=>{!a&&console.log("chrome.storage.local.get failed to obtain preferences for the second time"),t(a)}),500))})}),this.initPromise},setOption:function(e,t){if(!this.inited)console.error(`Preferences were not initialized yet! (setOption(${e}))`);else{var i={};i[e]=t,chrome.storage.local.set(i),this.storage[e]=t}},getOption:function(e,t){if(!this.inited)console.error(`Preferences were not initialized yet! (getOption(${e}))`);else return typeof this.storage[e]>"u"?t:this.storage[e]}};function Mt(){return/^win/i.test(navigator.platform)}function Gs(){return/opr\/\d+\./i.test(navigator.appVersion)||chrome.runtime.id==="pbjmgmedeliohhbaefhlplndokcbmjio"}function Vn(){return/edg\/\d+\./i.test(navigator.appVersion)||chrome.runtime.id==="fcbmiimfkmkkkffjlopcpdlgclncnknm"}function un(){return/apple/i.test(navigator.vendor)}function yt(){return qs()==="firefox"}function Ys(){return Gs()?"op":Vn()?"edge":un()?"safari":yt()?"fx":"ch"}function qs(){var e=chrome.runtime.id;if(e==="legfpnnmhhnhjgekmmbkilmijnjoehne")return Gs()?"opera":Vn()?"edge":"chrome";let t=["pbjmgmedeliohhbaefhlplndokcbmjio"],i=["fireshot@getfireshot.com","fireshot-pro@getfireshot.com","fireshot-beta@getfireshot.com","{0b457cAA-602d-484a-8fe7-c1d894a011ba}","{5e11ab1e-083c-11e5-a6c0-1697f925ec7b}"],o=["fcbmiimfkmkkkffjlopcpdlgclncnknm"];return t.indexOf(e)>-1?"opera":i.indexOf(e)>-1?"firefox":o.indexOf(e)>-1?"edge":"chrome"}var Zf=qs(),Nt={contractId:{chrome:"com.getfireshot.api",opera:"com.getfireshot.api",edge:"com.getfireshot.api",firefox:"com.getfireshot.api.firefox"},nativeFilePath:{chrome:"fireshot-chrome-plugin.dat",opera:"fireshot-chrome-plugin.dat",edge:"fireshot-chrome-plugin.dat",firefox:"fireshot-chrome-plugin.dat"}};for(ti in Nt)Nt[ti]=Nt[ti][Zf];var ti;var ed=0,td=1,Js={port:void 0,ready:!1,autoReconnect:!1,updating:!1,updated:!1,ignoreResponse:!1,portBusy:!1,callback:void 0,callbackDisconnected:void 0,prevVersion:void 0,updateTrials:0,pendingData:"",firstPacket:!0,onNativeHostUpdated:null,onPluginEvent:null,init:function(e,t,i,o){this.onNativeHostUpdated=t,this.onPluginEvent=e;let a=c=>{if(this.ignoreResponse){X()("Ignored response: "+JSON.stringify(c)),c.topic==="status"&&c.code==td&&(this.updating=!1,this.autoReconnect=!1,e&&e(c));return}this.autoReconnect=!1,!this.processInternally(c)&&e&&e(c)};this.callback=i,this.callbackDisconnected=o,this.ignoreResponse=!1,this.portBusy=!0;try{this.port=chrome.runtime.connectNative(Nt.contractId+"")}catch(c){ln(c.message),this.portBusy=!1}this.port.onMessage.addListener(c=>{if(c.data!=="")this.pendingData+=c.data;else try{let l=JSON.parse(this.pendingData);Re&&X()("Original Packet: "+this.pendingData.substr(0,1024)),this.pendingData="",a(l)}catch(l){Dt.captureException(l),console.error("Original Packet: "+this.pendingData.substr(0,1024)),this.pendingData="",ln(l.message)}}),this.port.onDisconnect.addListener(()=>{chrome.runtime.lastError&&console.log("ERROR: "+chrome.runtime.lastError.message),this.ready=!1,this.portBusy=!1,Z(C.p,"false"),!this.updating&&this.callbackDisconnected&&this.callbackDisconnected(),X()("Native port disconnected."),this.firstPacket=!0,this.pendingData="",this.autoReconnect&&this.doReconnect()}),X()("Native port created successfully. Starting test..."),this.launchJSON({JSONCommand:"ping",version:Je().extVersionFull,id:vt})},processInternally:function(e){if(e.topic=="hostVersion"){if(this.hostVersion=e.data,Je().extVersion!=this.hostVersion)return++this.updateTrials>3?(X()("Too much of unsuccessful update trials. No updates anymore."),ei("Too much of unsuccessful update trials. No updates anymore."),this.updating=!1,!1):(this.prevVersion=this.hostVersion,this.doUpdate(),!0)}else if(e.topic=="status")if(e.code==ed){var t=e.data;return this.updateTrials=0,this.ready=!0,Z(C.p,"true"),this.callback&&(this.callback(),this.callback=void 0),this.updating&&(this.updated=!0,this.updating=!1,this.prevVersion!="0"&&this.onNativeHostUpdated(t)),!1}else return this.updating&&(this.updating=!1),!1;else if(e.topic=="getDLL")return this.sendDLL(e.x64),!0;return!1},launchJSON:function(e){this.port.postMessage(e)},getFile:function(e,t){let i=()=>{let o=!0;if(e.search(/sss-x64\.dat|sss\.dat|fireshot-chrome-plugin\.dat/)!==-1){let a=Je().extVersionFull,c=C.ce+a,l=parseInt(gt.getOption(c,"0"));l<3?(X()("Opening helper installer page."),o=!1,gt.setOption(c,l+1),Xs("https://getfireshot.com/helper-install.php?ver="+a)):X()("Helper installer page cannot be shown more than 3 times, aborting.")}return o};X()("Fetching: "+e),fetch(chrome.runtime.getURL(e)).then(o=>{X()(`Fetching status = [${o.status}]`),o.ok?o.blob().then(a=>{X()(`Blob size is ${a.size} bytes`);let c=new FileReader;c.onload=l=>{X()("Fetching complete");let p="base64,";t(l.target.result.substr(l.target.result.indexOf(p)+p.length,l.target.result.length))},c.onerror=()=>{X()("Error in FileReader")},c.readAsDataURL(a)}).catch(a=>{i()&&reportError(a)}):(X()("NativeError-Error retrieving file"),ei(`Error retrieving file: ${o.status}`))}).catch(o=>{i()&&reportError(o)})},sendDLL:function(e){this.getFile(`native/${e?"sss-x64.dat":"sss.dat"}`,t=>{t&&this.launchJSON({JSONCommand:"updateDLL",version:Je().extVersionFull,data:t})})},doUpdate:function(){let e=Je().extVersionFull;X()("Updating native to the version: "+e),this.ignoreResponse=!0,this.getFile("native/"+Nt.nativeFilePath,t=>{this.updating=!0,this.autoReconnect=!0,this.launchJSON({JSONCommand:"updateNative",version:e,data:t})})},doReconnect:function(){setTimeout(()=>{X()("Trying to reconnect..."),this.init(this.onPluginEvent,this.onNativeHostUpdated,this.callback,this.callbackDisconnected)},1e3)},forceDisconnect:function(){this.autoReconnect=!1,this.port&&this.port.disconnect(),this.ready=!1,Z(C.p,"false")}};var vt=chrome.runtime.id,Re=["legfpnnmhhnhjgekmmbkilmijnjoehne","fireshot-beta@getfireshot.com","kmmldmlijnljnnhagfldmihaimmholga"].indexOf(vt)>-1;chrome.storage.local.get([C.B]).then(e=>Re=Re||e[C.B]);var nd=console.log;X()("Extension ID: "+vt);function rd(){return Q(C.J)==="true"||Q(C.J)==="1"}function Wn(){return self.constructor.name==="ServiceWorkerGlobalScope"}function fn(){if(rd())return!1;{let e=Q(C.p,"false")==="true";return Wn()&&e&&!Js.port?(Z(C.p,"false"),!1):e}}function Je(){let e=chrome.runtime.getManifest();return{extVersion:e.version.split(".",3).join("."),extVersionFull:e.version.split(".",4).join("."),fSilentMode:vt=="legfpnnmhhnhjgekmmbkilmijnjoehne"||vt=="hpbicldbpgipcloiojdbchegbbjiobbm"||vt=="adpnodbfhlagloahhdhjggicnfcpggkm"}}function Xs(e){X()("openURLV2");let i=(o,a=0)=>{a>0&&X()(`trial ${a}`);let c=()=>{++a<10?setTimeout(()=>i(o,a),150):chrome.windows.create({url:e}).catch(l=>reportError(l))};try{chrome.tabs.create(o).catch(()=>c())}catch{c()}};i({url:e})}function ni(e,t){if(X()("openURL"),!t)return chrome.tabs.create({url:e});chrome.tabs.create({url:e},i=>{let o=(a,c)=>{if(a===i.id)switch(c.status){case"complete":chrome.tabs.onUpdated.removeListener(o),t(i);break}};chrome.tabs.onUpdated.addListener(o),setTimeout(()=>chrome.tabs.onUpdated.removeListener(o),1e4)})}function X(){return(...e)=>{if(e.length!==0)if(Re&&nd(...e),e.length>1)Zr(JSON.stringify(e).substring(0,512));else{let t=typeof e[0]=="string"?e[0]:JSON.stringify(e);Zr(t.substring(0,512))}}}function ln(e){console.error("FireShot: "+e)}function Qs(){let e=document.createNodeIterator(document.documentElement,NodeFilter.SHOW_ELEMENT,null),t;for(;t=e.nextNode();)[{i18Attr:"data-i18n",originalAttr:"innerText"},{i18Attr:"data-title-i18n",originalAttr:"title"}].forEach(o=>{let a;if(a=t.getAttribute(o.i18Attr)){let c=chrome.i18n.getMessage(a);c?t[o.originalAttr]=c:t[o.originalAttr]=(Re?"#":"")+t[o.originalAttr],Re||t.removeAttribute(o.i18Attr)}})}function id(){let e=parseInt(Q(C.F,C.P)),t=Zs();return fn()?t===C.m&&e===C.u&&(e=C.E):t===C.m&&e===C.E?e=C.u:(e===C.u||e===C.b)&&(t===C.R||t===C.N||t===C.D)&&(e=C.P),e}function Zs(){return parseInt(Q(C.L,C.R))}function ea(){return fn()?Q(C.i)=="true":!Mt()&&Q(C.i)=="true"}async function zn(e){let t="fsAPIScript";if(e){if((await chrome.scripting.getRegisteredContentScripts()).filter(a=>a.id===t).length>0)return X()("Script is already registered, nothing to do"),!0;let o={id:t,js:["scripts/page/fsAPIEvents.js"],matches:["<all_urls>"],excludeMatches:["*://getfireshot.com/activate*"]};try{await chrome.scripting.registerContentScripts([o])}catch(a){return console.error(`failed to register content scripts: ${a}`),!1}}else try{await chrome.scripting.unregisterContentScripts({ids:[t]})}catch(i){return console.log(`failed to unregister content scripts: ${i}`),!1}return!0}function ta(e,t){od({permissions:["tabs"],origins:["<all_urls>"]},e,()=>{t&&t()})}function od(e,t,i){un()||yt()?t():chrome.permissions.contains(e,o=>{o?t():chrome.permissions.request(e,a=>{!chrome.runtime.lastError||console.log(chrome.runtime.lastError),a?t():(X()("The user rejected to grant permissions."),i&&i())})})}function na(){chrome.contextMenus.removeAll(()=>{if(Q(C.k,"true")==="true")if(sd().isIdle()){let e=ad();chrome.contextMenus.create({title:e,contexts:["all"],id:"mnuLastCommand"},()=>{chrome.runtime.lastError})}else chrome.contextMenus.create({title:"Stop",contexts:["all"],id:"mnuStopCommand"},()=>{chrome.runtime.lastError})})}function sd(){function e(){let t=parseInt(Q(C._,0));return{reset:()=>{X()("reset state"),t=C.Z,Z(C._,t)},add:i=>{X()("add state"),t|=i,Z(C._,t)},remove:i=>{X()("remove state"),t&=~i>>>0,Z(C._,t)},contains:i=>(t&i)===i,isIdle:()=>t===C.Z}}return new e}function ad(){function e(c){switch(c){case C.b:return"action_save";case C.u:return"action_save_pdf";case C.ee:return"action_copy";case C.te:return"action_email";case C.ne:return"action_external";case C.oe:return"action_onenote";case C.re:return"action_upload";case C.ie:return"action_print";case C.E:return"action_save_pdf_single";default:return"action_edit"}}let t,i=e(id()),o=!fn(),a=Zs();switch(a){case C.D:t=o?"action_capture_visible_lite":"action_capture_visible";break;case C.N:t=o?"action_capture_selection_lite":"action_capture_selection";break;case C.se:t="action_capture_browser";break;case C.m:t="action_capture_tabs";break;default:t=o?"action_capture_entire_lite":"action_capture_entire"}return o&&a!==C.m?chrome.i18n.getMessage(t):chrome.i18n.getMessage(t)+" "+chrome.i18n.getMessage(i)}function Gn(){return new Proxy({},{get:(e,t)=>(...i)=>{let o=null;return typeof i[i.length-1]=="function"&&(o=i.pop()),new Promise(a=>{chrome.runtime.sendMessage({message:"callExtensionMethodMsg",method:t,params:i,async:o!==null},c=>{chrome.runtime.lastError,o&&typeof c<"u"&&o(c),a(c)})})}})}var pi=function(e,t){return pi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i[a]=o[a])},pi(e,t)};function cd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");pi(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var q=function(){return q=Object.assign||function(t){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])}return t},q.apply(this,arguments)};function sr(e,t,i){if(i||arguments.length===2)for(var o=0,a=t.length,c;o<a;o++)(c||!(o in t))&&(c||(c=Array.prototype.slice.call(t,0,o)),c[o]=t[o]);return e.concat(c||Array.prototype.slice.call(t))}var _e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pe=Object.keys,ce=Array.isArray;typeof Promise<"u"&&!_e.Promise&&(_e.Promise=Promise);function Ne(e,t){return typeof t!="object"||pe(t).forEach(function(i){e[i]=t[i]}),e}var Kt=Object.getPrototypeOf,ud={}.hasOwnProperty;function Ae(e,t){return ud.call(e,t)}function Ut(e,t){typeof t=="function"&&(t=t(Kt(e))),(typeof Reflect>"u"?pe:Reflect.ownKeys)(t).forEach(function(i){at(e,i,t[i])})}var _a=Object.defineProperty;function at(e,t,i,o){_a(e,t,Ne(i&&Ae(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function Wt(e){return{from:function(t){return e.prototype=Object.create(t.prototype),at(e.prototype,"constructor",e),{extend:Ut.bind(null,e.prototype)}}}}var ld=Object.getOwnPropertyDescriptor;function ba(e,t){var i=ld(e,t),o;return i||(o=Kt(e))&&ba(o,t)}var fd=[].slice;function vr(e,t,i){return fd.call(e,t,i)}function Ea(e,t){return t(e)}function dn(e){if(!e)throw new Error("Assertion Failed")}function wa(e){_e.setImmediate?setImmediate(e):setTimeout(e,0)}function dd(e,t){return e.reduce(function(i,o,a){var c=t(o,a);return c&&(i[c[0]]=c[1]),i},{})}function Ze(e,t){if(typeof t=="string"&&Ae(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var i=[],o=0,a=t.length;o<a;++o){var c=Ze(e,t[o]);i.push(c)}return i}var l=t.indexOf(".");if(l!==-1){var p=e[t.substr(0,l)];return p==null?void 0:Ze(p,t.substr(l+1))}}function De(e,t,i){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){dn(typeof i!="string"&&"length"in i);for(var o=0,a=t.length;o<a;++o)De(e,t[o],i[o])}else{var c=t.indexOf(".");if(c!==-1){var l=t.substr(0,c),p=t.substr(c+1);if(p==="")i===void 0?ce(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=i;else{var h=e[l];(!h||!Ae(e,l))&&(h=e[l]={}),De(h,p,i)}}else i===void 0?ce(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=i}}function pd(e,t){typeof t=="string"?De(e,t,void 0):"length"in t&&[].map.call(t,function(i){De(e,i,void 0)})}function Sa(e){var t={};for(var i in e)Ae(e,i)&&(t[i]=e[i]);return t}var hd=[].concat;function Ia(e){return hd.apply([],e)}var md="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ia([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return _e[e]}),ka=new Set(md.map(function(e){return _e[e]}));function xa(e){var t={};for(var i in e)if(Ae(e,i)){var o=e[i];t[i]=!o||typeof o!="object"||ka.has(o.constructor)?o:xa(o)}return t}function gd(e){for(var t in e)if(Ae(e,t))return!1;return!0}var hn=null;function kt(e){hn=new WeakMap;var t=hi(e);return hn=null,t}function hi(e){if(!e||typeof e!="object")return e;var t=hn.get(e);if(t)return t;if(ce(e)){t=[],hn.set(e,t);for(var i=0,o=e.length;i<o;++i)t.push(hi(e[i]))}else if(ka.has(e.constructor))t=e;else{var a=Kt(e);t=a===Object.prototype?{}:Object.create(a),hn.set(e,t);for(var c in e)Ae(e,c)&&(t[c]=hi(e[c]))}return t}var yd={}.toString;function mi(e){return yd.call(e).slice(8,-1)}var gi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",vd=typeof gi=="symbol"?function(e){var t;return e!=null&&(t=e[gi])&&t.apply(e)}:function(){return null};function _t(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),i>=0}var Lt={};function Qe(e){var t,i,o,a;if(arguments.length===1){if(ce(e))return e.slice();if(this===Lt&&typeof e=="string")return[e];if(a=vd(e)){for(i=[];o=a.next(),!o.done;)i.push(o.value);return i}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(i=new Array(t);t--;)i[t]=e[t];return i}return[e]}for(t=arguments.length,i=new Array(t);t--;)i[t]=arguments[t];return i}var Ci=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},_d=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ta=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ri=_d.concat(Ta),bd={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Vt(e,t){this.name=e,this.message=t}Wt(Vt).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Aa(e,t){return e+". Errors: "+Object.keys(t).map(function(i){return t[i].toString()}).filter(function(i,o,a){return a.indexOf(i)===o}).join(`
`)}function ar(e,t,i,o){this.failures=t,this.failedKeys=o,this.successCount=i,this.message=Aa(e,t)}Wt(ar).from(Vt);function Bt(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(i){return t[i]}),this.failuresByPos=t,this.message=Aa(e,this.failures)}Wt(Bt).from(Vt);var Pi=Ri.reduce(function(e,t){return e[t]=t+"Error",e},{}),Ed=Vt,G=Ri.reduce(function(e,t){var i=t+"Error";function o(a,c){this.name=i,a?typeof a=="string"?(this.message="".concat(a).concat(c?`
 `+c:""),this.inner=c||null):typeof a=="object"&&(this.message="".concat(a.name," ").concat(a.message),this.inner=a):(this.message=bd[t]||i,this.inner=null)}return Wt(o).from(Ed),e[t]=o,e},{});G.Syntax=SyntaxError;G.Type=TypeError;G.Range=RangeError;var ra=Ta.reduce(function(e,t){return e[t+"Error"]=G[t],e},{});function wd(e,t){if(!e||e instanceof Vt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ra[e.name])return e;var i=new ra[e.name](t||e.message,e);return"stack"in e&&at(i,"stack",{get:function(){return this.inner.stack}}),i}var _r=Ri.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=G[t]),e},{});_r.ModifyError=ar;_r.DexieError=Vt;_r.BulkError=Bt;function oe(){}function wn(e){return e}function Sd(e,t){return e==null||e===wn?t:function(i){return t(e(i))}}function xt(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Id(e,t){return e===oe?t:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var c=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?xt(o,this.onsuccess):o),a&&(this.onerror=this.onerror?xt(a,this.onerror):a),c!==void 0?c:i}}function kd(e,t){return e===oe?t:function(){e.apply(this,arguments);var i=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?xt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?xt(o,this.onerror):o)}}function xd(e,t){return e===oe?t:function(i){var o=e.apply(this,arguments);Ne(i,o);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var l=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?xt(a,this.onsuccess):a),c&&(this.onerror=this.onerror?xt(c,this.onerror):c),o===void 0?l===void 0?void 0:l:Ne(o,l)}}function Td(e,t){return e===oe?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Di(e,t){return e===oe?t:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var o=this,a=arguments.length,c=new Array(a);a--;)c[a]=arguments[a];return i.then(function(){return t.apply(o,c)})}return t.apply(this,arguments)}}var We=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Oa(e,t){We=e}var yn={},Ca=100,Ni=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Kt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Kt(t),e]}(),ia=Ni[0],oa=Ni[1],Ad=Ni[2],Od=oa&&oa.then,mn=ia&&ia.constructor,Mi=!!Ad;function Cd(){queueMicrotask(Pd)}var vn=function(e,t){pn.push([e,t]),cr&&(Cd(),cr=!1)},yi=!0,cr=!0,wt=[],er=[],vi=wn,st={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},H=st,pn=[],St=0,tr=[];function M(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=H;if(typeof e!="function"){if(e!==yn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&bi(this,this._value);return}this._state=null,this._value=null,++t.ref,Pa(this,e)}var _i={get:function(){var e=H,t=ur;function i(o,a){var c=this,l=!e.global&&(e!==H||t!==ur),p=l&&!ut(),h=new M(function(g,b){Fi(c,new Ra(sa(o,e,l,p),sa(a,e,l,p),g,b,e))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return i.prototype=yn,i},set:function(e){at(this,"then",e&&e.prototype===yn?_i:{get:function(){return e},set:_i.set})}};Ut(M.prototype,{then:_i,_then:function(e,t){Fi(this,new Ra(null,null,e,t,H))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],i=arguments[1];return typeof t=="function"?this.then(null,function(o){return o instanceof t?i(o):nr(o)}):this.then(null,function(o){return o&&o.name===t?i(o):nr(o)})},finally:function(e){return this.then(function(t){return M.resolve(e()).then(function(){return t})},function(t){return M.resolve(e()).then(function(){return nr(t)})})},timeout:function(e,t){var i=this;return e<1/0?new M(function(o,a){var c=setTimeout(function(){return a(new G.Timeout(t))},e);i.then(o,a).finally(clearTimeout.bind(null,c))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&at(M.prototype,Symbol.toStringTag,"Dexie.Promise");st.env=Na();function Ra(e,t,i,o,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=i,this.reject=o,this.psd=a}Ut(M,{all:function(){var e=Qe.apply(null,arguments).map(lr);return new M(function(t,i){e.length===0&&t([]);var o=e.length;e.forEach(function(a,c){return M.resolve(a).then(function(l){e[c]=l,--o||t(e)},i)})})},resolve:function(e){if(e instanceof M)return e;if(e&&typeof e.then=="function")return new M(function(i,o){e.then(i,o)});var t=new M(yn,!0,e);return t},reject:nr,race:function(){var e=Qe.apply(null,arguments).map(lr);return new M(function(t,i){e.map(function(o){return M.resolve(o).then(t,i)})})},PSD:{get:function(){return H},set:function(e){return H=e}},totalEchoes:{get:function(){return ur}},newPSD:ct,usePSD:Tt,scheduler:{get:function(){return vn},set:function(e){vn=e}},rejectionMapper:{get:function(){return vi},set:function(e){vi=e}},follow:function(e,t){return new M(function(i,o){return ct(function(a,c){var l=H;l.unhandleds=[],l.onunhandled=c,l.finalize=xt(function(){var p=this;Dd(function(){p.unhandleds.length===0?a():c(p.unhandleds[0])})},l.finalize),e()},t,i,o)})}});mn&&(mn.allSettled&&at(M,"allSettled",function(){var e=Qe.apply(null,arguments).map(lr);return new M(function(t){e.length===0&&t([]);var i=e.length,o=new Array(i);e.forEach(function(a,c){return M.resolve(a).then(function(l){return o[c]={status:"fulfilled",value:l}},function(l){return o[c]={status:"rejected",reason:l}}).then(function(){return--i||t(o)})})})}),mn.any&&typeof AggregateError<"u"&&at(M,"any",function(){var e=Qe.apply(null,arguments).map(lr);return new M(function(t,i){e.length===0&&i(new AggregateError([]));var o=e.length,a=new Array(o);e.forEach(function(c,l){return M.resolve(c).then(function(p){return t(p)},function(p){a[l]=p,--o||i(new AggregateError(a))})})})}));function Pa(e,t){try{t(function(i){if(e._state===null){if(i===e)throw new TypeError("A promise cannot be resolved with itself.");var o=e._lib&&zt();i&&typeof i.then=="function"?Pa(e,function(a,c){i instanceof M?i._then(a,c):i.then(a,c)}):(e._state=!0,e._value=i,Da(e)),o&&Gt()}},bi.bind(null,e))}catch(i){bi(e,i)}}function bi(e,t){if(er.push(t),e._state===null){var i=e._lib&&zt();t=vi(t),e._state=!1,e._value=t,Nd(e),Da(e),i&&Gt()}}function Da(e){var t=e._listeners;e._listeners=[];for(var i=0,o=t.length;i<o;++i)Fi(e,t[i]);var a=e._PSD;--a.ref||a.finalize(),St===0&&(++St,vn(function(){--St===0&&$i()},[]))}function Fi(e,t){if(e._state===null){e._listeners.push(t);return}var i=e._state?t.onFulfilled:t.onRejected;if(i===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++St,vn(Rd,[i,e,t])}function Rd(e,t,i){try{var o,a=t._value;!t._state&&er.length&&(er=[]),o=We&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),!t._state&&er.indexOf(a)===-1&&Md(t),i.resolve(o)}catch(c){i.reject(c)}finally{--St===0&&$i(),--i.psd.ref||i.psd.finalize()}}function Pd(){Tt(st,function(){zt()&&Gt()})}function zt(){var e=yi;return yi=!1,cr=!1,e}function Gt(){var e,t,i;do for(;pn.length>0;)for(e=pn,pn=[],i=e.length,t=0;t<i;++t){var o=e[t];o[0].apply(null,o[1])}while(pn.length>0);yi=!0,cr=!0}function $i(){var e=wt;wt=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var t=tr.slice(0),i=t.length;i;)t[--i]()}function Dd(e){function t(){e(),tr.splice(tr.indexOf(t),1)}tr.push(t),++St,vn(function(){--St===0&&$i()},[])}function Nd(e){wt.some(function(t){return t._value===e._value})||wt.push(e)}function Md(e){for(var t=wt.length;t;)if(wt[--t]._value===e._value){wt.splice(t,1);return}}function nr(e){return new M(yn,!1,e)}function ae(e,t){var i=H;return function(){var o=zt(),a=H;try{return lt(i,!0),e.apply(this,arguments)}catch(c){t&&t(c)}finally{lt(a,!1),o&&Gt()}}}var de={awaits:0,echoes:0,id:0},Fd=0,rr=[],ir=0,ur=0,$d=0;function ct(e,t,i,o){var a=H,c=Object.create(a);c.parent=a,c.ref=0,c.global=!1,c.id=++$d,st.env,c.env=Mi?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},t&&Ne(c,t),++a.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=Tt(c,e,i,o);return c.ref===0&&c.finalize(),l}function Yt(){return de.id||(de.id=++Fd),++de.awaits,de.echoes+=Ca,de.id}function ut(){return de.awaits?(--de.awaits===0&&(de.id=0),de.echoes=de.awaits*Ca,!0):!1}(""+Od).indexOf("[native code]")===-1&&(Yt=ut=oe);function lr(e){return de.echoes&&e&&e.constructor===mn?(Yt(),e.then(function(t){return ut(),t},function(t){return ut(),le(t)})):e}function Ld(e){++ur,(!de.echoes||--de.echoes===0)&&(de.echoes=de.awaits=de.id=0),rr.push(H),lt(e,!0)}function Bd(){var e=rr[rr.length-1];rr.pop(),lt(e,!1)}function lt(e,t){var i=H;if((t?de.echoes&&(!ir++||e!==H):ir&&(!--ir||e!==H))&&queueMicrotask(t?Ld.bind(null,e):Bd),e!==H&&(H=e,i===st&&(st.env=Na()),Mi)){var o=st.env.Promise,a=e.env;(i.global||e.global)&&(Object.defineProperty(_e,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))}}function Na(){var e=_e.Promise;return Mi?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(_e,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Tt(e,t,i,o,a){var c=H;try{return lt(e,!0),t(i,o,a)}finally{lt(c,!1)}}function sa(e,t,i,o){return typeof e!="function"?e:function(){var a=H;i&&Yt(),lt(t,!0);try{return e.apply(this,arguments)}finally{lt(a,!1),o&&queueMicrotask(ut)}}}function ri(e){Promise===mn&&de.echoes===0?ir===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var le=M.reject;function Ei(e,t,i,o){if(!e.idbdb||!e._state.openComplete&&!H.letThrough&&!e._vip){if(e._state.openComplete)return le(new G.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return le(new G.DatabaseClosed);e.open().catch(oe)}return e._state.dbReadyPromise.then(function(){return Ei(e,t,i,o)})}else{var a=e._createTransaction(t,i,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(c){return c.name===Pi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Ei(e,t,i,o)})):le(c)}return a._promise(t,function(c,l){return ct(function(){return H.trans=a,o(c,l,a)})}).then(function(c){if(t==="readwrite")try{a.idbtrans.commit()}catch{}return t==="readonly"?c:a._completion.then(function(){return c})})}}var aa="4.0.8",Et="\uFFFF",wi=-1/0,Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ma="String expected.",jt=[],br="__dbnames",ii="readonly",oi="readwrite";function At(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Fa={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yn(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=kt(t),delete t[e]),t}:function(t){return t}}function jd(){throw G.Type()}function ne(e,t){try{var i=ca(e),o=ca(t);if(i!==o)return i==="Array"?1:o==="Array"?-1:i==="binary"?1:o==="binary"?-1:i==="string"?1:o==="string"?-1:i==="Date"?1:o!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Ud(ua(e),ua(t));case"Array":return Kd(e,t)}}catch{}return NaN}function Kd(e,t){for(var i=e.length,o=t.length,a=i<o?i:o,c=0;c<a;++c){var l=ne(e[c],t[c]);if(l!==0)return l}return i===o?0:i<o?-1:1}function Ud(e,t){for(var i=e.length,o=t.length,a=i<o?i:o,c=0;c<a;++c)if(e[c]!==t[c])return e[c]<t[c]?-1:1;return i===o?0:i<o?-1:1}function ca(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var i=mi(e);return i==="ArrayBuffer"?"binary":i}function ua(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var $a=function(){function e(){}return e.prototype._trans=function(t,i,o){var a=this._tx||H.trans,c=this.name,l=We&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function p(b,y,w){if(!w.schema[c])throw new G.NotFound("Table "+c+" not part of transaction");return i(w.idbtrans,w)}var h=zt();try{var g=a&&a.db._novip===this.db._novip?a===H.trans?a._promise(t,p,o):ct(function(){return a._promise(t,p,o)},{trans:a,transless:H.transless||H}):Ei(this.db,t,[this.name],p);return l&&(g._consoleTask=l,g=g.catch(function(b){return console.trace(b),le(b)})),g}finally{h&&Gt()}},e.prototype.get=function(t,i){var o=this;return t&&t.constructor===Object?this.where(t).first(i):t==null?le(new G.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return o.core.get({trans:a,key:t}).then(function(c){return o.hook.reading.fire(c)})}).then(i)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ce(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var i=pe(t);if(i.length===1)return this.where(i[0]).equals(t[i[0]]);var o=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&i.every(function(R){return y.keyPath.indexOf(R)>=0})){for(var w=0;w<i.length;++w)if(i.indexOf(y.keyPath[w])===-1)return!1;return!0}return!1}).sort(function(y,w){return y.keyPath.length-w.keyPath.length})[0];if(o&&this.db._maxKey!==Et){var a=o.keyPath.slice(0,i.length);return this.where(a).equals(a.map(function(y){return t[y]}))}!o&&We&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var c=this.schema.idxByName,l=this.db._deps.indexedDB;function p(y,w){return l.cmp(y,w)===0}var h=i.reduce(function(y,w){var R=y[0],_=y[1],E=c[w],S=t[w];return[R||E,R||!E?At(_,E&&E.multi?function(k){var x=Ze(k,w);return ce(x)&&x.some(function(A){return p(S,A)})}:function(k){return p(S,Ze(k,w))}):_]},[null,null]),g=h[0],b=h[1];return g?this.where(g.name).equals(t[g.keyPath]).filter(b):o?this.filter(b):this.where(i).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,ce(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var i=this,o=i.db,a=i.name;this.schema.mappedClass=t,t.prototype instanceof jd&&(t=function(h){cd(g,h);function g(){return h!==null&&h.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"db",{get:function(){return o},enumerable:!1,configurable:!0}),g.prototype.table=function(){return a},g}(t));for(var c=new Set,l=t.prototype;l;l=Kt(l))Object.getOwnPropertyNames(l).forEach(function(h){return c.add(h)});var p=function(h){if(!h)return h;var g=Object.create(t.prototype);for(var b in h)if(!c.has(b))try{g[b]=h[b]}catch{}return g};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),t},e.prototype.defineClass=function(){function t(i){Ne(this,i)}return this.mapToClass(t)},e.prototype.add=function(t,i){var o=this,a=this.schema.primKey,c=a.auto,l=a.keyPath,p=t;return l&&c&&(p=Yn(l)(t)),this._trans("readwrite",function(h){return o.core.mutate({trans:h,type:"add",keys:i!=null?[i]:null,values:[p]})}).then(function(h){return h.numFailures?M.reject(h.failures[0]):h.lastResult}).then(function(h){if(l)try{De(t,l,h)}catch{}return h})},e.prototype.update=function(t,i){if(typeof t=="object"&&!ce(t)){var o=Ze(t,this.schema.primKey.keyPath);return o===void 0?le(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(i)}else return this.where(":id").equals(t).modify(i)},e.prototype.put=function(t,i){var o=this,a=this.schema.primKey,c=a.auto,l=a.keyPath,p=t;return l&&c&&(p=Yn(l)(t)),this._trans("readwrite",function(h){return o.core.mutate({trans:h,type:"put",values:[p],keys:i!=null?[i]:null})}).then(function(h){return h.numFailures?M.reject(h.failures[0]):h.lastResult}).then(function(h){if(l)try{De(t,l,h)}catch{}return h})},e.prototype.delete=function(t){var i=this;return this._trans("readwrite",function(o){return i.core.mutate({trans:o,type:"delete",keys:[t]})}).then(function(o){return o.numFailures?M.reject(o.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(i){return t.core.mutate({trans:i,type:"deleteRange",range:Fa})}).then(function(i){return i.numFailures?M.reject(i.failures[0]):void 0})},e.prototype.bulkGet=function(t){var i=this;return this._trans("readonly",function(o){return i.core.getMany({keys:t,trans:o}).then(function(a){return a.map(function(c){return i.hook.reading.fire(c)})})})},e.prototype.bulkAdd=function(t,i,o){var a=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var l=o?o.allKeys:void 0;return this._trans("readwrite",function(p){var h=a.schema.primKey,g=h.auto,b=h.keyPath;if(b&&c)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var y=t.length,w=b&&g?t.map(Yn(b)):t;return a.core.mutate({trans:p,type:"add",keys:c,values:w,wantResults:l}).then(function(R){var _=R.numFailures,E=R.results,S=R.lastResult,k=R.failures,x=l?E:S;if(_===0)return x;throw new Bt("".concat(a.name,".bulkAdd(): ").concat(_," of ").concat(y," operations failed"),k)})})},e.prototype.bulkPut=function(t,i,o){var a=this,c=Array.isArray(i)?i:void 0;o=o||(c?void 0:i);var l=o?o.allKeys:void 0;return this._trans("readwrite",function(p){var h=a.schema.primKey,g=h.auto,b=h.keyPath;if(b&&c)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==t.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");var y=t.length,w=b&&g?t.map(Yn(b)):t;return a.core.mutate({trans:p,type:"put",keys:c,values:w,wantResults:l}).then(function(R){var _=R.numFailures,E=R.results,S=R.lastResult,k=R.failures,x=l?E:S;if(_===0)return x;throw new Bt("".concat(a.name,".bulkPut(): ").concat(_," of ").concat(y," operations failed"),k)})})},e.prototype.bulkUpdate=function(t){var i=this,o=this.core,a=t.map(function(p){return p.key}),c=t.map(function(p){return p.changes}),l=[];return this._trans("readwrite",function(p){return o.getMany({trans:p,keys:a,cache:"clone"}).then(function(h){var g=[],b=[];t.forEach(function(w,R){var _=w.key,E=w.changes,S=h[R];if(S){for(var k=0,x=Object.keys(E);k<x.length;k++){var A=x[k],O=E[A];if(A===i.schema.primKey.keyPath){if(ne(O,_)!==0)throw new G.Constraint("Cannot update primary key in bulkUpdate()")}else De(S,A,O)}l.push(R),g.push(_),b.push(S)}});var y=g.length;return o.mutate({trans:p,type:"put",keys:g,values:b,updates:{keys:a,changeSpecs:c}}).then(function(w){var R=w.numFailures,_=w.failures;if(R===0)return y;for(var E=0,S=Object.keys(_);E<S.length;E++){var k=S[E],x=l[Number(k)];if(x!=null){var A=_[k];delete _[k],_[x]=A}}throw new Bt("".concat(i.name,".bulkUpdate(): ").concat(R," of ").concat(y," operations failed"),_)})})})},e.prototype.bulkDelete=function(t){var i=this,o=t.length;return this._trans("readwrite",function(a){return i.core.mutate({trans:a,type:"delete",keys:t})}).then(function(a){var c=a.numFailures,l=a.lastResult,p=a.failures;if(c===0)return l;throw new Bt("".concat(i.name,".bulkDelete(): ").concat(c," of ").concat(o," operations failed"),p)})},e}();function Sn(e){var t={},i=function(p,h){if(h){for(var g=arguments.length,b=new Array(g-1);--g;)b[g-1]=arguments[g];return t[p].subscribe.apply(null,b),e}else if(typeof p=="string")return t[p]};i.addEventType=c;for(var o=1,a=arguments.length;o<a;++o)c(arguments[o]);return i;function c(p,h,g){if(typeof p=="object")return l(p);h||(h=Td),g||(g=oe);var b={subscribers:[],fire:g,subscribe:function(y){b.subscribers.indexOf(y)===-1&&(b.subscribers.push(y),b.fire=h(b.fire,y))},unsubscribe:function(y){b.subscribers=b.subscribers.filter(function(w){return w!==y}),b.fire=b.subscribers.reduce(h,g)}};return t[p]=i[p]=b,b}function l(p){pe(p).forEach(function(h){var g=p[h];if(ce(g))c(h,p[h][0],p[h][1]);else if(g==="asap")var b=c(h,wn,function(){for(var w=arguments.length,R=new Array(w);w--;)R[w]=arguments[w];b.subscribers.forEach(function(_){wa(function(){_.apply(null,R)})})});else throw new G.InvalidArgument("Invalid event config")})}}function In(e,t){return Wt(t).from({prototype:e}),t}function Hd(e){return In($a.prototype,function(i,o,a){this.db=e,this._tx=a,this.name=i,this.schema=o,this.hook=e._allTables[i]?e._allTables[i].hook:Sn(null,{creating:[Id,oe],reading:[Sd,wn],updating:[xd,oe],deleting:[kd,oe]})})}function Ft(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function si(e,t){e.filter=At(e.filter,t)}function ai(e,t,i){var o=e.replayFilter;e.replayFilter=o?function(){return At(o(),t())}:t,e.justLimit=i&&!o}function Wd(e,t){e.isMatch=At(e.isMatch,t)}function or(e,t){if(e.isPrimKey)return t.primaryKey;var i=t.getIndexByKeyPath(e.index);if(!i)throw new G.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return i}function la(e,t,i){var o=or(e,t.schema);return t.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function qn(e,t,i,o){var a=e.replayFilter?At(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},l=function(p,h,g){if(!a||a(h,g,function(w){return h.stop(w)},function(w){return h.fail(w)})){var b=h.primaryKey,y=""+b;y==="[object ArrayBuffer]"&&(y=""+new Uint8Array(b)),Ae(c,y)||(c[y]=!0,t(p,h,g))}};return Promise.all([e.or._iterate(l,i),fa(la(e,o,i),e.algorithm,l,!e.keysOnly&&e.valueMapper)])}else return fa(la(e,o,i),At(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function fa(e,t,i,o){var a=o?function(l,p,h){return i(o(l),p,h)}:i,c=ae(a);return e.then(function(l){if(l)return l.start(function(){var p=function(){return l.continue()};(!t||t(l,function(h){return p=h},function(h){l.stop(h),p=oe},function(h){l.fail(h),p=oe}))&&c(l.value,l,function(h){return p=h}),p()})})}var Oh=Symbol(),Vd=function(){function e(t){Object.assign(this,t)}return e.prototype.execute=function(t){var i;if(this.add!==void 0){var o=this.add;if(ce(o))return sr(sr([],ce(t)?t:[],!0),o,!0).sort();if(typeof o=="number")return(Number(t)||0)+o;if(typeof o=="bigint")try{return BigInt(t)+o}catch{return BigInt(0)+o}throw new TypeError("Invalid term ".concat(o))}if(this.remove!==void 0){var a=this.remove;if(ce(a))return ce(t)?t.filter(function(l){return!a.includes(l)}).sort():[];if(typeof a=="number")return Number(t)-a;if(typeof a=="bigint")try{return BigInt(t)-a}catch{return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}var c=(i=this.replacePrefix)===null||i===void 0?void 0:i[0];return c&&typeof t=="string"&&t.startsWith(c)?this.replacePrefix[1]+t.substring(c.length):t},e}(),zd=function(){function e(){}return e.prototype._read=function(t,i){var o=this._ctx;return o.error?o.table._trans(null,le.bind(null,o.error)):o.table._trans("readonly",t).then(i)},e.prototype._write=function(t){var i=this._ctx;return i.error?i.table._trans(null,le.bind(null,i.error)):i.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var i=this._ctx;i.algorithm=At(i.algorithm,t)},e.prototype._iterate=function(t,i){return qn(this._ctx,t,i,this._ctx.table.core)},e.prototype.clone=function(t){var i=Object.create(this.constructor.prototype),o=Object.create(this._ctx);return t&&Ne(o,t),i._ctx=o,i},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var i=this._ctx;return this._read(function(o){return qn(i,t,o,i.table.core)})},e.prototype.count=function(t){var i=this;return this._read(function(o){var a=i._ctx,c=a.table.core;if(Ft(a,!0))return c.count({trans:o,query:{index:or(a,c.schema),range:a.range}}).then(function(p){return Math.min(p,a.limit)});var l=0;return qn(a,function(){return++l,!1},o,c).then(function(){return l})}).then(t)},e.prototype.sortBy=function(t,i){var o=t.split(".").reverse(),a=o[0],c=o.length-1;function l(g,b){return b?l(g[o[b]],b-1):g[a]}var p=this._ctx.dir==="next"?1:-1;function h(g,b){var y=l(g,c),w=l(b,c);return y<w?-p:y>w?p:0}return this.toArray(function(g){return g.sort(h)}).then(i)},e.prototype.toArray=function(t){var i=this;return this._read(function(o){var a=i._ctx;if(a.dir==="next"&&Ft(a,!0)&&a.limit>0){var c=a.valueMapper,l=or(a,a.table.core.schema);return a.table.core.query({trans:o,limit:a.limit,values:!0,query:{index:l,range:a.range}}).then(function(h){var g=h.result;return c?g.map(c):g})}else{var p=[];return qn(a,function(h){return p.push(h)},o,a.table.core).then(function(){return p})}},t)},e.prototype.offset=function(t){var i=this._ctx;return t<=0?this:(i.offset+=t,Ft(i)?ai(i,function(){var o=t;return function(a,c){return o===0?!0:o===1?(--o,!1):(c(function(){a.advance(o),o=0}),!1)}}):ai(i,function(){var o=t;return function(){return--o<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ai(this._ctx,function(){var i=t;return function(o,a,c){return--i<=0&&a(c),i>=0}},!0),this},e.prototype.until=function(t,i){return si(this._ctx,function(o,a,c){return t(o.value)?(a(c),i):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(i){return i[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return si(this._ctx,function(i){return t(i.value)}),Wd(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(o,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var i=this._ctx;i.keysOnly=!i.isMatch;var o=[];return this.each(function(a,c){o.push(c.key)}).then(function(){return o}).then(t)},e.prototype.primaryKeys=function(t){var i=this._ctx;if(i.dir==="next"&&Ft(i,!0)&&i.limit>0)return this._read(function(a){var c=or(i,i.table.core.schema);return i.table.core.query({trans:a,values:!1,limit:i.limit,query:{index:c,range:i.range}})}).then(function(a){var c=a.result;return c}).then(t);i.keysOnly=!i.isMatch;var o=[];return this.each(function(a,c){o.push(c.primaryKey)}).then(function(){return o}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(i){return i[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,i=t.index&&t.table.schema.idxByName[t.index];if(!i||!i.multi)return this;var o={};return si(this._ctx,function(a){var c=a.primaryKey.toString(),l=Ae(o,c);return o[c]=!0,!l}),this},e.prototype.modify=function(t){var i=this,o=this._ctx;return this._write(function(a){var c;if(typeof t=="function")c=t;else{var l=pe(t),p=l.length;c=function(k){for(var x=!1,A=0;A<p;++A){var O=l[A],T=t[O],D=Ze(k,O);T instanceof Vd?(De(k,O,T.execute(D)),x=!0):D!==T&&(De(k,O,T),x=!0)}return x}}var h=o.table.core,g=h.schema.primaryKey,b=g.outbound,y=g.extractKey,w=i.db._options.modifyChunkSize||200,R=[],_=0,E=[],S=function(k,x){var A=x.failures,O=x.numFailures;_+=k-O;for(var T=0,D=pe(A);T<D.length;T++){var N=D[T];R.push(A[N])}};return i.clone().primaryKeys().then(function(k){var x=Ft(o)&&o.limit===1/0&&(typeof t!="function"||t===ci)&&{index:o.index,range:o.range},A=function(O){var T=Math.min(w,k.length-O);return h.getMany({trans:a,keys:k.slice(O,O+T),cache:"immutable"}).then(function(D){for(var N=[],L=[],V=b?[]:null,U=[],K=0;K<T;++K){var B=D[K],Y={value:kt(B),primKey:k[O+K]};c.call(Y,Y.value,Y)!==!1&&(Y.value==null?U.push(k[O+K]):!b&&ne(y(B),y(Y.value))!==0?(U.push(k[O+K]),N.push(Y.value)):(L.push(Y.value),b&&V.push(k[O+K])))}return Promise.resolve(N.length>0&&h.mutate({trans:a,type:"add",values:N}).then(function(ee){for(var z in ee.failures)U.splice(parseInt(z),1);S(N.length,ee)})).then(function(){return(L.length>0||x&&typeof t=="object")&&h.mutate({trans:a,type:"put",keys:V,values:L,criteria:x,changeSpec:typeof t!="function"&&t,isAdditionalChunk:O>0}).then(function(ee){return S(L.length,ee)})}).then(function(){return(U.length>0||x&&t===ci)&&h.mutate({trans:a,type:"delete",keys:U,criteria:x,isAdditionalChunk:O>0}).then(function(ee){return S(U.length,ee)})}).then(function(){return k.length>O+T&&A(O+w)})})};return A(0).then(function(){if(R.length>0)throw new ar("Error modifying one or more objects",R,_,E);return k.length})})})},e.prototype.delete=function(){var t=this._ctx,i=t.range;return Ft(t)&&(t.isPrimKey||i.type===3)?this._write(function(o){var a=t.table.core.schema.primaryKey,c=i;return t.table.core.count({trans:o,query:{index:a,range:c}}).then(function(l){return t.table.core.mutate({trans:o,type:"deleteRange",range:c}).then(function(p){var h=p.failures;p.lastResult,p.results;var g=p.numFailures;if(g)throw new ar("Could not delete some values",Object.keys(h).map(function(b){return h[b]}),l-g);return l-g})})}):this.modify(ci)},e}(),ci=function(e,t){return t.value=null};function Gd(e){return In(zd.prototype,function(i,o){this.db=e;var a=Fa,c=null;if(o)try{a=o()}catch(g){c=g}var l=i._ctx,p=l.table,h=p.hook.reading.fire;this._ctx={table:p,index:l.index,isPrimKey:!l.index||p.schema.primKey.keyPath&&l.index===p.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:l.or,valueMapper:h!==wn?h:null}})}function Yd(e,t){return e<t?-1:e===t?0:1}function qd(e,t){return e>t?-1:e===t?0:1}function Pe(e,t,i){var o=e instanceof Ba?new e.Collection(e):e;return o._ctx.error=i?new i(t):new TypeError(t),o}function $t(e){return new e.Collection(e,function(){return La("")}).limit(0)}function Jd(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Xd(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Qd(e,t,i,o,a,c){for(var l=Math.min(e.length,o.length),p=-1,h=0;h<l;++h){var g=t[h];if(g!==o[h])return a(e[h],i[h])<0?e.substr(0,h)+i[h]+i.substr(h+1):a(e[h],o[h])<0?e.substr(0,h)+o[h]+i.substr(h+1):p>=0?e.substr(0,p)+t[p]+i.substr(p+1):null;a(e[h],g)<0&&(p=h)}return l<o.length&&c==="next"?e+i.substr(e.length):l<e.length&&c==="prev"?e.substr(0,i.length):p<0?null:e.substr(0,p)+o[p]+i.substr(p+1)}function Jn(e,t,i,o){var a,c,l,p,h,g,b,y=i.length;if(!i.every(function(E){return typeof E=="string"}))return Pe(e,Ma);function w(E){a=Jd(E),c=Xd(E),l=E==="next"?Yd:qd;var S=i.map(function(k){return{lower:c(k),upper:a(k)}}).sort(function(k,x){return l(k.lower,x.lower)});p=S.map(function(k){return k.upper}),h=S.map(function(k){return k.lower}),g=E,b=E==="next"?"":o}w("next");var R=new e.Collection(e,function(){return rt(p[0],h[y-1]+o)});R._ondirectionchange=function(E){w(E)};var _=0;return R._addAlgorithm(function(E,S,k){var x=E.key;if(typeof x!="string")return!1;var A=c(x);if(t(A,h,_))return!0;for(var O=null,T=_;T<y;++T){var D=Qd(x,A,p[T],h[T],l,g);D===null&&O===null?_=T+1:(O===null||l(O,D)>0)&&(O=D)}return S(O!==null?function(){E.continue(O+b)}:k),!1}),R}function rt(e,t,i,o){return{type:2,lower:e,upper:t,lowerOpen:i,upperOpen:o}}function La(e){return{type:1,lower:e,upper:e}}var Ba=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,i,o,a){o=o!==!1,a=a===!0;try{return this._cmp(t,i)>0||this._cmp(t,i)===0&&(o||a)&&!(o&&a)?$t(this):new this.Collection(this,function(){return rt(t,i,!o,!a)})}catch{return Pe(this,Xe)}},e.prototype.equals=function(t){return t==null?Pe(this,Xe):new this.Collection(this,function(){return La(t)})},e.prototype.above=function(t){return t==null?Pe(this,Xe):new this.Collection(this,function(){return rt(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Pe(this,Xe):new this.Collection(this,function(){return rt(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Pe(this,Xe):new this.Collection(this,function(){return rt(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Pe(this,Xe):new this.Collection(this,function(){return rt(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Pe(this,Ma):this.between(t,t+Et,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Jn(this,function(i,o){return i.indexOf(o[0])===0},[t],Et)},e.prototype.equalsIgnoreCase=function(t){return Jn(this,function(i,o){return i===o[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=Qe.apply(Lt,arguments);return t.length===0?$t(this):Jn(this,function(i,o){return o.indexOf(i)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=Qe.apply(Lt,arguments);return t.length===0?$t(this):Jn(this,function(i,o){return o.some(function(a){return i.indexOf(a)===0})},t,Et)},e.prototype.anyOf=function(){var t=this,i=Qe.apply(Lt,arguments),o=this._cmp;try{i.sort(o)}catch{return Pe(this,Xe)}if(i.length===0)return $t(this);var a=new this.Collection(this,function(){return rt(i[0],i[i.length-1])});a._ondirectionchange=function(l){o=l==="next"?t._ascending:t._descending,i.sort(o)};var c=0;return a._addAlgorithm(function(l,p,h){for(var g=l.key;o(g,i[c])>0;)if(++c,c===i.length)return p(h),!1;return o(g,i[c])===0?!0:(p(function(){l.continue(i[c])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[wi,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=Qe.apply(Lt,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Pe(this,Xe)}var i=t.reduce(function(o,a){return o?o.concat([[o[o.length-1][1],a]]):[[wi,a]]},null);return i.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,i){var o=this,a=this._cmp,c=this._ascending,l=this._descending,p=this._min,h=this._max;if(t.length===0)return $t(this);if(!t.every(function(T){return T[0]!==void 0&&T[1]!==void 0&&c(T[0],T[1])<=0}))return Pe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var g=!i||i.includeLowers!==!1,b=i&&i.includeUppers===!0;function y(T,D){for(var N=0,L=T.length;N<L;++N){var V=T[N];if(a(D[0],V[1])<0&&a(D[1],V[0])>0){V[0]=p(V[0],D[0]),V[1]=h(V[1],D[1]);break}}return N===L&&T.push(D),T}var w=c;function R(T,D){return w(T[0],D[0])}var _;try{_=t.reduce(y,[]),_.sort(R)}catch{return Pe(this,Xe)}var E=0,S=b?function(T){return c(T,_[E][1])>0}:function(T){return c(T,_[E][1])>=0},k=g?function(T){return l(T,_[E][0])>0}:function(T){return l(T,_[E][0])>=0};function x(T){return!S(T)&&!k(T)}var A=S,O=new this.Collection(this,function(){return rt(_[0][0],_[_.length-1][1],!g,!b)});return O._ondirectionchange=function(T){T==="next"?(A=S,w=c):(A=k,w=l),_.sort(R)},O._addAlgorithm(function(T,D,N){for(var L=T.key;A(L);)if(++E,E===_.length)return D(N),!1;return x(L)?!0:(o._cmp(L,_[E][1])===0||o._cmp(L,_[E][0])===0||D(function(){w===c?T.continue(_[E][0]):T.continue(_[E][1])}),!1)}),O},e.prototype.startsWithAnyOf=function(){var t=Qe.apply(Lt,arguments);return t.every(function(i){return typeof i=="string"})?t.length===0?$t(this):this.inAnyRange(t.map(function(i){return[i,i+Et]})):Pe(this,"startsWithAnyOf() only works with strings")},e}();function Zd(e){return In(Ba.prototype,function(i,o,a){if(this.db=e,this._ctx={table:i,index:o===":id"?null:o,or:a},this._cmp=this._ascending=ne,this._descending=function(c,l){return ne(l,c)},this._max=function(c,l){return ne(c,l)>0?c:l},this._min=function(c,l){return ne(c,l)<0?c:l},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new G.MissingAPI})}function He(e){return ae(function(t){return _n(t),e(t.target.error),!1})}function _n(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var kn="storagemutated",Si="x-storagemutated-1",ft=Sn(null,kn),ep=function(){function e(){}return e.prototype._lock=function(){return dn(!H.global),++this._reculock,this._reculock===1&&!H.global&&(H.lockOwnerFor=this),this},e.prototype._unlock=function(){if(dn(!H.global),--this._reculock===0)for(H.global||(H.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Tt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this},e.prototype.create=function(t){var i=this;if(!this.mode)return this;var o=this.db.idbdb,a=this.db._state.dbOpenError;if(dn(!this.idbtrans),!t&&!o)switch(a&&a.name){case"DatabaseClosedError":throw new G.DatabaseClosed(a);case"MissingAPIError":throw new G.MissingAPI(a.message,a);default:throw new G.OpenFailed(a)}if(!this.active)throw new G.TransactionInactive;return dn(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):o.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=ae(function(c){_n(c),i._reject(t.error)}),t.onabort=ae(function(c){_n(c),i.active&&i._reject(new G.Abort(t.error)),i.active=!1,i.on("abort").fire(c)}),t.oncomplete=ae(function(){i.active=!1,i._resolve(),"mutatedParts"in t&&ft.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,i,o){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return le(new G.ReadOnly("Transaction is readonly"));if(!this.active)return le(new G.TransactionInactive);if(this._locked())return new M(function(l,p){a._blockedFuncs.push([function(){a._promise(t,i,o).then(l,p)},H])});if(o)return ct(function(){var l=new M(function(p,h){a._lock();var g=i(p,h,a);g&&g.then&&g.then(p,h)});return l.finally(function(){return a._unlock()}),l._lib=!0,l});var c=new M(function(l,p){var h=i(l,p,a);h&&h.then&&h.then(l,p)});return c._lib=!0,c},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var i=this._root(),o=M.resolve(t);if(i._waitingFor)i._waitingFor=i._waitingFor.then(function(){return o});else{i._waitingFor=o,i._waitingQueue=[];var a=i.idbtrans.objectStore(i.storeNames[0]);(function l(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(a.get(-1/0).onsuccess=l)})()}var c=i._waitingFor;return new M(function(l,p){o.then(function(h){return i._waitingQueue.push(ae(l.bind(null,h)))},function(h){return i._waitingQueue.push(ae(p.bind(null,h)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new G.Abort))},e.prototype.table=function(t){var i=this._memoizedTables||(this._memoizedTables={});if(Ae(i,t))return i[t];var o=this.schema[t];if(!o)throw new G.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,o,this);return a.core=this.db.core.table(t),i[t]=a,a},e}();function tp(e){return In(ep.prototype,function(i,o,a,c,l){var p=this;this.db=e,this.mode=i,this.storeNames=o,this.schema=a,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=Sn(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(h,g){p._resolve=h,p._reject=g}),this._completion.then(function(){p.active=!1,p.on.complete.fire()},function(h){var g=p.active;return p.active=!1,p.on.error.fire(h),p.parent?p.parent._reject(h):g&&p.idbtrans&&p.idbtrans.abort(),le(h)})})}function Ii(e,t,i,o,a,c,l){return{name:e,keyPath:t,unique:i,multi:o,auto:a,compound:c,src:(i&&!l?"&":"")+(o?"*":"")+(a?"++":"")+ja(t)}}function ja(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Li(e,t,i){return{name:e,primKey:t,indexes:i,mappedClass:null,idxByName:dd(i,function(o){return[o.name,o]})}}function np(e){return e.length===1?e[0]:e}var bn=function(e){try{return e.only([[]]),bn=function(){return[[]]},[[]]}catch{return bn=function(){return Et},Et}};function ki(e){return e==null?function(){}:typeof e=="string"?rp(e):function(t){return Ze(t,e)}}function rp(e){var t=e.split(".");return t.length===1?function(i){return i[e]}:function(i){return Ze(i,e)}}function da(e){return[].slice.call(e)}var ip=0;function gn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function op(e,t,i){function o(y,w){var R=da(y.objectStoreNames);return{schema:{name:y.name,tables:R.map(function(_){return w.objectStore(_)}).map(function(_){var E=_.keyPath,S=_.autoIncrement,k=ce(E),x=E==null,A={},O={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x,compound:k,keyPath:E,autoIncrement:S,unique:!0,extractKey:ki(E)},indexes:da(_.indexNames).map(function(T){return _.index(T)}).map(function(T){var D=T.name,N=T.unique,L=T.multiEntry,V=T.keyPath,U=ce(V),K={name:D,compound:U,keyPath:V,unique:N,multiEntry:L,extractKey:ki(V)};return A[gn(V)]=K,K}),getIndexByKeyPath:function(T){return A[gn(T)]}};return A[":id"]=O.primaryKey,E!=null&&(A[gn(E)]=O.primaryKey),O})},hasGetAll:R.length>0&&"getAll"in w.objectStore(R[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var w=y.lower,R=y.upper,_=y.lowerOpen,E=y.upperOpen,S=w===void 0?R===void 0?null:t.upperBound(R,!!E):R===void 0?t.lowerBound(w,!!_):t.bound(w,R,!!_,!!E);return S}function c(y){var w=y.name;function R(S){var k=S.trans,x=S.type,A=S.keys,O=S.values,T=S.range;return new Promise(function(D,N){D=ae(D);var L=k.objectStore(w),V=L.keyPath==null,U=x==="put"||x==="add";if(!U&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var K=(A||O||{length:1}).length;if(A&&O&&A.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(K===0)return D({numFailures:0,failures:{},results:[],lastResult:void 0});var B,Y=[],ee=[],z=0,ue=function(we){++z,_n(we)};if(x==="deleteRange"){if(T.type===4)return D({numFailures:z,failures:ee,results:[],lastResult:void 0});T.type===3?Y.push(B=L.clear()):Y.push(B=L.delete(a(T)))}else{var Oe=U?V?[O,A]:[O,null]:[A,null],je=Oe[0],Me=Oe[1];if(U)for(var ke=0;ke<K;++ke)Y.push(B=Me&&Me[ke]!==void 0?L[x](je[ke],Me[ke]):L[x](je[ke])),B.onerror=ue;else for(var ke=0;ke<K;++ke)Y.push(B=L[x](je[ke])),B.onerror=ue}var Le=function(we){var xe=we.target.result;Y.forEach(function(Ce,W){return Ce.error!=null&&(ee[W]=Ce.error)}),D({numFailures:z,failures:ee,results:x==="delete"?A:Y.map(function(Ce){return Ce.result}),lastResult:xe})};B.onerror=function(we){ue(we),Le(we)},B.onsuccess=Le})}function _(S){var k=S.trans,x=S.values,A=S.query,O=S.reverse,T=S.unique;return new Promise(function(D,N){D=ae(D);var L=A.index,V=A.range,U=k.objectStore(w),K=L.isPrimaryKey?U:U.index(L.name),B=O?T?"prevunique":"prev":T?"nextunique":"next",Y=x||!("openKeyCursor"in K)?K.openCursor(a(V),B):K.openKeyCursor(a(V),B);Y.onerror=He(N),Y.onsuccess=ae(function(ee){var z=Y.result;if(!z){D(null);return}z.___id=++ip,z.done=!1;var ue=z.continue.bind(z),Oe=z.continuePrimaryKey;Oe&&(Oe=Oe.bind(z));var je=z.advance.bind(z),Me=function(){throw new Error("Cursor not started")},ke=function(){throw new Error("Cursor not stopped")};z.trans=k,z.stop=z.continue=z.continuePrimaryKey=z.advance=Me,z.fail=ae(N),z.next=function(){var Le=this,we=1;return this.start(function(){return we--?Le.continue():Le.stop()}).then(function(){return Le})},z.start=function(Le){var we=new Promise(function(Ce,W){Ce=ae(Ce),Y.onerror=He(W),z.fail=W,z.stop=function(Sr){z.stop=z.continue=z.continuePrimaryKey=z.advance=ke,Ce(Sr)}}),xe=function(){if(Y.result)try{Le()}catch(Ce){z.fail(Ce)}else z.done=!0,z.start=function(){throw new Error("Cursor behind last entry")},z.stop()};return Y.onsuccess=ae(function(Ce){Y.onsuccess=xe,xe()}),z.continue=ue,z.continuePrimaryKey=Oe,z.advance=je,xe(),we},D(z)},N)})}function E(S){return function(k){return new Promise(function(x,A){x=ae(x);var O=k.trans,T=k.values,D=k.limit,N=k.query,L=D===1/0?void 0:D,V=N.index,U=N.range,K=O.objectStore(w),B=V.isPrimaryKey?K:K.index(V.name),Y=a(U);if(D===0)return x({result:[]});if(S){var ee=T?B.getAll(Y,L):B.getAllKeys(Y,L);ee.onsuccess=function(je){return x({result:je.target.result})},ee.onerror=He(A)}else{var z=0,ue=T||!("openKeyCursor"in B)?B.openCursor(Y):B.openKeyCursor(Y),Oe=[];ue.onsuccess=function(je){var Me=ue.result;if(!Me)return x({result:Oe});if(Oe.push(T?Me.value:Me.primaryKey),++z===D)return x({result:Oe});Me.continue()},ue.onerror=He(A)}})}}return{name:w,schema:y,mutate:R,getMany:function(S){var k=S.trans,x=S.keys;return new Promise(function(A,O){A=ae(A);for(var T=k.objectStore(w),D=x.length,N=new Array(D),L=0,V=0,U,K=function(z){var ue=z.target;(N[ue._pos]=ue.result)!=null,++V===L&&A(N)},B=He(O),Y=0;Y<D;++Y){var ee=x[Y];ee!=null&&(U=T.get(x[Y]),U._pos=Y,U.onsuccess=K,U.onerror=B,++L)}L===0&&A(N)})},get:function(S){var k=S.trans,x=S.key;return new Promise(function(A,O){A=ae(A);var T=k.objectStore(w),D=T.get(x);D.onsuccess=function(N){return A(N.target.result)},D.onerror=He(O)})},query:E(h),openCursor:_,count:function(S){var k=S.query,x=S.trans,A=k.index,O=k.range;return new Promise(function(T,D){var N=x.objectStore(w),L=A.isPrimaryKey?N:N.index(A.name),V=a(O),U=V?L.count(V):L.count();U.onsuccess=ae(function(K){return T(K.target.result)}),U.onerror=He(D)})}}}var l=o(e,i),p=l.schema,h=l.hasGetAll,g=p.tables.map(function(y){return c(y)}),b={};return g.forEach(function(y){return b[y.name]=y}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(y){var w=b[y];if(!w)throw new Error("Table '".concat(y,"' not found"));return b[y]},MIN_KEY:-1/0,MAX_KEY:bn(t),schema:p}}function sp(e,t){return t.reduce(function(i,o){var a=o.create;return q(q({},i),a(i))},e)}function ap(e,t,i,o){var a=i.IDBKeyRange;i.indexedDB;var c=sp(op(t,a,o),e.dbcore);return{dbcore:c}}function fr(e,t){var i=t.db,o=ap(e._middlewares,i,e._deps,t);e.core=o.dbcore,e.tables.forEach(function(a){var c=a.name;e.core.schema.tables.some(function(l){return l.name===c})&&(a.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=a.core))})}function dr(e,t,i,o){i.forEach(function(a){var c=o[a];t.forEach(function(l){var p=ba(l,a);(!p||"value"in p&&p.value===void 0)&&(l===e.Transaction.prototype||l instanceof e.Transaction?at(l,a,{get:function(){return this.table(a)},set:function(h){_a(this,a,{value:h,writable:!0,configurable:!0,enumerable:!0})}}):l[a]=new e.Table(a,c))})})}function xi(e,t){t.forEach(function(i){for(var o in i)i[o]instanceof e.Table&&delete i[o]})}function cp(e,t){return e._cfg.version-t._cfg.version}function up(e,t,i,o){var a=e._dbSchema;i.objectStoreNames.contains("$meta")&&!a.$meta&&(a.$meta=Li("$meta",Ua("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,a);c.create(i),c._completion.catch(o);var l=c._reject.bind(c),p=H.transless||H;ct(function(){if(H.trans=c,H.transless=p,t===0)pe(a).forEach(function(h){ji(i,h,a[h].primKey,a[h].indexes)}),fr(e,i),M.follow(function(){return e.on.populate.fire(c)}).catch(l);else return fr(e,i),fp(e,c,t).then(function(h){return dp(e,h,c,i)}).catch(l)})}function lp(e,t){Ka(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var i=Er(e,e.idbdb,t);hr(e,e._dbSchema,t);for(var o=Bi(i,e._dbSchema),a=function(g){if(g.change.length||g.recreate)return console.warn("Unable to patch indexes of table ".concat(g.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=t.objectStore(g.name);g.add.forEach(function(y){We&&console.debug("Dexie upgrade patch: Creating missing index ".concat(g.name,".").concat(y.src)),pr(b,y)})},c=0,l=o.change;c<l.length;c++){var p=l[c],h=a(p);if(typeof h=="object")return h.value}}function fp(e,t,i){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(o){return o??i}):M.resolve(i)}function dp(e,t,i,o){var a=[],c=e._versions,l=e._dbSchema=Er(e,e.idbdb,o),p=c.filter(function(g){return g._cfg.version>=t});if(p.length===0)return M.resolve();p.forEach(function(g){a.push(function(){var b=l,y=g._cfg.dbschema;hr(e,b,o),hr(e,y,o),l=e._dbSchema=y;var w=Bi(b,y);w.add.forEach(function(x){ji(o,x[0],x[1].primKey,x[1].indexes)}),w.change.forEach(function(x){if(x.recreate)throw new G.Upgrade("Not yet support for changing primary key");var A=o.objectStore(x.name);x.add.forEach(function(O){return pr(A,O)}),x.change.forEach(function(O){A.deleteIndex(O.name),pr(A,O)}),x.del.forEach(function(O){return A.deleteIndex(O)})});var R=g._cfg.contentUpgrade;if(R&&g._cfg.version>t){fr(e,o),i._memoizedTables={};var _=Sa(y);w.del.forEach(function(x){_[x]=b[x]}),xi(e,[e.Transaction.prototype]),dr(e,[e.Transaction.prototype],pe(_),_),i.schema=_;var E=Ci(R);E&&Yt();var S,k=M.follow(function(){if(S=R(i),S&&E){var x=ut.bind(null,null);S.then(x,x)}});return S&&typeof S.then=="function"?M.resolve(S):k.then(function(){return S})}}),a.push(function(b){var y=g._cfg.dbschema;pp(y,b),xi(e,[e.Transaction.prototype]),dr(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),i.schema=e._dbSchema}),a.push(function(b){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===g._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(y){return y!=="$meta"})):b.objectStore("$meta").put(g._cfg.version,"version"))})});function h(){return a.length?M.resolve(a.shift()(i.idbtrans)).then(h):M.resolve()}return h().then(function(){Ka(l,o)})}function Bi(e,t){var i={del:[],add:[],change:[]},o;for(o in e)t[o]||i.del.push(o);for(o in t){var a=e[o],c=t[o];if(!a)i.add.push([o,c]);else{var l={name:o,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||a.primKey.auto!==c.primKey.auto)l.recreate=!0,i.change.push(l);else{var p=a.idxByName,h=c.idxByName,g=void 0;for(g in p)h[g]||l.del.push(g);for(g in h){var b=p[g],y=h[g];b?b.src!==y.src&&l.change.push(y):l.add.push(y)}(l.del.length>0||l.add.length>0||l.change.length>0)&&i.change.push(l)}}}return i}function ji(e,t,i,o){var a=e.db.createObjectStore(t,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return o.forEach(function(c){return pr(a,c)}),a}function Ka(e,t){pe(e).forEach(function(i){t.db.objectStoreNames.contains(i)||(We&&console.debug("Dexie: Creating missing table",i),ji(t,i,e[i].primKey,e[i].indexes))})}function pp(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(i){return e[i]==null&&t.db.deleteObjectStore(i)})}function pr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Er(e,t,i){var o={},a=vr(t.objectStoreNames,0);return a.forEach(function(c){for(var l=i.objectStore(c),p=l.keyPath,h=Ii(ja(p),p||"",!0,!1,!!l.autoIncrement,p&&typeof p!="string",!0),g=[],b=0;b<l.indexNames.length;++b){var y=l.index(l.indexNames[b]);p=y.keyPath;var w=Ii(y.name,p,!!y.unique,!!y.multiEntry,!1,p&&typeof p!="string",!1);g.push(w)}o[c]=Li(c,h,g)}),o}function hp(e,t,i){e.verno=t.version/10;var o=e._dbSchema=Er(e,t,i);e._storeNames=vr(t.objectStoreNames,0),dr(e,[e._allTables],pe(o),o)}function mp(e,t){var i=Er(e,e.idbdb,t),o=Bi(i,e._dbSchema);return!(o.add.length||o.change.some(function(a){return a.add.length||a.change.length}))}function hr(e,t,i){for(var o=i.db.objectStoreNames,a=0;a<o.length;++a){var c=o[a],l=i.objectStore(c);e._hasGetAll="getAll"in l;for(var p=0;p<l.indexNames.length;++p){var h=l.indexNames[p],g=l.index(h).keyPath,b=typeof g=="string"?g:"["+vr(g).join("+")+"]";if(t[c]){var y=t[c].idxByName[b];y&&(y.name=h,delete t[c].idxByName[b],t[c].idxByName[h]=y)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_e.WorkerGlobalScope&&_e instanceof _e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ua(e){return e.split(",").map(function(t,i){t=t.trim();var o=t.replace(/([&*]|\+\+)/g,""),a=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return Ii(o,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ce(a),i===0)})}var gp=function(){function e(){}return e.prototype._parseStoresSpec=function(t,i){pe(t).forEach(function(o){if(t[o]!==null){var a=Ua(t[o]),c=a.shift();if(c.unique=!0,c.multi)throw new G.Schema("Primary key cannot be multi-valued");a.forEach(function(l){if(l.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string")}),i[o]=Li(o,c,a)}})},e.prototype.stores=function(t){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?Ne(this._cfg.storesSource,t):t;var o=i._versions,a={},c={};return o.forEach(function(l){Ne(a,l._cfg.storesSource),c=l._cfg.dbschema={},l._parseStoresSpec(a,c)}),i._dbSchema=c,xi(i,[i._allTables,i,i.Transaction.prototype]),dr(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],pe(c),c),i._storeNames=pe(c),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Di(this._cfg.contentUpgrade||oe,t),this},e}();function yp(e){return In(gp.prototype,function(i){this.db=e,this._cfg={version:i,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ki(e,t){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Ht(br,{addons:[],indexedDB:e,IDBKeyRange:t}),i.version(1).stores({dbnames:"name"})),i.table("dbnames")}function Ui(e){return e&&typeof e.databases=="function"}function vp(e){var t=e.indexedDB,i=e.IDBKeyRange;return Ui(t)?Promise.resolve(t.databases()).then(function(o){return o.map(function(a){return a.name}).filter(function(a){return a!==br})}):Ki(t,i).toCollection().primaryKeys()}function _p(e,t){var i=e.indexedDB,o=e.IDBKeyRange;!Ui(i)&&t!==br&&Ki(i,o).put({name:t}).catch(oe)}function bp(e,t){var i=e.indexedDB,o=e.IDBKeyRange;!Ui(i)&&t!==br&&Ki(i,o).delete(t).catch(oe)}function Ti(e){return ct(function(){return H.letThrough=!0,e()})}function Ep(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(i){var o=function(){return indexedDB.databases().finally(i)};t=setInterval(o,100),o()}).finally(function(){return clearInterval(t)})}var ui;function Hi(e){return!("from"in e)}var Te=function(e,t){if(this)Ne(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var i=new Te;return e&&"d"in e&&Ne(i,e),i}};Ut(Te.prototype,(ui={add:function(e){return mr(this,e),this},addKey:function(e){return En(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(i){return En(t,i,i)}),this},hasKey:function(e){var t=gr(this).next(e).value;return t&&ne(t.from,e)<=0&&ne(t.to,e)>=0}},ui[gi]=function(){return gr(this)},ui));function En(e,t,i){var o=ne(t,i);if(!isNaN(o)){if(o>0)throw RangeError();if(Hi(e))return Ne(e,{from:t,to:i,d:1});var a=e.l,c=e.r;if(ne(i,e.from)<0)return a?En(a,t,i):e.l={from:t,to:i,d:1,l:null,r:null},pa(e);if(ne(t,e.to)>0)return c?En(c,t,i):e.r={from:t,to:i,d:1,l:null,r:null},pa(e);ne(t,e.from)<0&&(e.from=t,e.l=null,e.d=c?c.d+1:1),ne(i,e.to)>0&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1);var l=!e.r;a&&!e.l&&mr(e,a),c&&l&&mr(e,c)}}function mr(e,t){function i(o,a){var c=a.from,l=a.to,p=a.l,h=a.r;En(o,c,l),p&&i(o,p),h&&i(o,h)}Hi(t)||i(e,t)}function wp(e,t){var i=gr(t),o=i.next();if(o.done)return!1;for(var a=o.value,c=gr(e),l=c.next(a.from),p=l.value;!o.done&&!l.done;){if(ne(p.from,a.to)<=0&&ne(p.to,a.from)>=0)return!0;ne(a.from,p.from)<0?a=(o=i.next(p.from)).value:p=(l=c.next(a.from)).value}return!1}function gr(e){var t=Hi(e)?null:{s:0,n:e};return{next:function(i){for(var o=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,o)for(;t.n.l&&ne(i,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!o||ne(i,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function pa(e){var t,i,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),a=o>1?"r":o<-1?"l":"";if(a){var c=a==="r"?"l":"r",l=q({},e),p=e[a];e.from=p.from,e.to=p.to,e[a]=p[a],l[a]=p[c],e[c]=l,l.d=ha(l)}e.d=ha(e)}function ha(e){var t=e.r,i=e.l;return(t?i?Math.max(t.d,i.d):t.d:i?i.d:0)+1}function wr(e,t){return pe(t).forEach(function(i){e[i]?mr(e[i],t[i]):e[i]=xa(t[i])}),e}function Wi(e,t){return e.all||t.all||Object.keys(e).some(function(i){return t[i]&&wp(t[i],e[i])})}var It={},li={},fi=!1;function Xn(e,t){wr(li,e),fi||(fi=!0,setTimeout(function(){fi=!1;var i=li;li={},Vi(i,!1)},0))}function Vi(e,t){t===void 0&&(t=!1);var i=new Set;if(e.all)for(var o=0,a=Object.values(It);o<a.length;o++){var c=a[o];ma(c,e,i,t)}else for(var l in e){var p=/^idb\:\/\/(.*)\/(.*)\//.exec(l);if(p){var h=p[1],g=p[2],c=It["idb://".concat(h,"/").concat(g)];c&&ma(c,e,i,t)}}i.forEach(function(b){return b()})}function ma(e,t,i,o){for(var a=[],c=0,l=Object.entries(e.queries.query);c<l.length;c++){for(var p=l[c],h=p[0],g=p[1],b=[],y=0,w=g;y<w.length;y++){var R=w[y];Wi(t,R.obsSet)?R.subscribers.forEach(function(k){return i.add(k)}):o&&b.push(R)}o&&a.push([h,b])}if(o)for(var _=0,E=a;_<E.length;_++){var S=E[_],h=S[0],b=S[1];e.queries.query[h]=b}}function Sp(e){var t=e._state,i=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?le(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var o=t.openCanceller,a=Math.round(e.verno*10),c=!1;function l(){if(t.openCanceller!==o)throw new G.DatabaseClosed("db.open() was cancelled")}var p=t.dbReadyResolve,h=null,g=!1,b=function(){return new M(function(y,w){if(l(),!i)throw new G.MissingAPI;var R=e.name,_=t.autoSchema||!a?i.open(R):i.open(R,a);if(!_)throw new G.MissingAPI;_.onerror=He(w),_.onblocked=ae(e._fireOnBlocked),_.onupgradeneeded=ae(function(E){if(h=_.transaction,t.autoSchema&&!e._options.allowEmptyDB){_.onerror=_n,h.abort(),_.result.close();var S=i.deleteDatabase(R);S.onsuccess=S.onerror=ae(function(){w(new G.NoSuchDatabase("Database ".concat(R," doesnt exist")))})}else{h.onerror=He(w);var k=E.oldVersion>Math.pow(2,62)?0:E.oldVersion;g=k<1,e.idbdb=_.result,c&&lp(e,h),up(e,k/10,h,w)}},w),_.onsuccess=ae(function(){h=null;var E=e.idbdb=_.result,S=vr(E.objectStoreNames);if(S.length>0)try{var k=E.transaction(np(S),"readonly");if(t.autoSchema)hp(e,E,k);else if(hr(e,e._dbSchema,k),!mp(e,k)&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),E.close(),a=E.version+1,c=!0,y(b());fr(e,k)}catch{}jt.push(e),E.onversionchange=ae(function(x){t.vcFired=!0,e.on("versionchange").fire(x)}),E.onclose=ae(function(x){e.on("close").fire(x)}),g&&_p(e._deps,R),y()},w)}).catch(function(y){switch(y?.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(a>0)return a=0,b();break}return M.reject(y)})};return M.race([o,(typeof navigator>"u"?M.resolve():Ep()).then(b)]).then(function(){return l(),t.onReadyBeingFired=[],M.resolve(Ti(function(){return e.on.ready.fire(e.vip)})).then(function y(){if(t.onReadyBeingFired.length>0){var w=t.onReadyBeingFired.reduce(Di,oe);return t.onReadyBeingFired=[],M.resolve(Ti(function(){return w(e.vip)})).then(y)}})}).finally(function(){t.openCanceller===o&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(y){t.dbOpenError=y;try{h&&h.abort()}catch{}return o===t.openCanceller&&e._close(),le(y)}).finally(function(){t.openComplete=!0,p()}).then(function(){if(g){var y={};e.tables.forEach(function(w){w.schema.indexes.forEach(function(R){R.name&&(y["idb://".concat(e.name,"/").concat(w.name,"/").concat(R.name)]=new Te(-1/0,[[[]]]))}),y["idb://".concat(e.name,"/").concat(w.name,"/")]=y["idb://".concat(e.name,"/").concat(w.name,"/:dels")]=new Te(-1/0,[[[]]])}),ft(kn).fire(y),Vi(y,!0)}return e})}function Ai(e){var t=function(l){return e.next(l)},i=function(l){return e.throw(l)},o=c(t),a=c(i);function c(l){return function(p){var h=l(p),g=h.value;return h.done?g:!g||typeof g.then!="function"?ce(g)?Promise.all(g).then(o,a):o(g):g.then(o,a)}}return c(t)()}function Ip(e,t,i){var o=arguments.length;if(o<2)throw new G.InvalidArgument("Too few arguments");for(var a=new Array(o-1);--o;)a[o-1]=arguments[o];i=a.pop();var c=Ia(a);return[e,c,i]}function Ha(e,t,i,o,a){return M.resolve().then(function(){var c=H.transless||H,l=e._createTransaction(t,i,e._dbSchema,o);l.explicit=!0;var p={trans:l,transless:c};if(o)l.idbtrans=o.idbtrans;else try{l.create(),l.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(y){return y.name===Pi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Ha(e,t,i,null,a)})):le(y)}var h=Ci(a);h&&Yt();var g,b=M.follow(function(){if(g=a.call(l,l),g)if(h){var y=ut.bind(null,null);g.then(y,y)}else typeof g.next=="function"&&typeof g.throw=="function"&&(g=Ai(g))},p);return(g&&typeof g.then=="function"?M.resolve(g).then(function(y){return l.active?y:le(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):b.then(function(){return g})).then(function(y){return o&&l._resolve(),l._completion.then(function(){return y})}).catch(function(y){return l._reject(y),le(y)})})}function Qn(e,t,i){for(var o=ce(e)?e.slice():[e],a=0;a<i;++a)o.push(t);return o}function kp(e){return q(q({},e),{table:function(t){var i=e.table(t),o=i.schema,a={},c=[];function l(E,S,k){var x=gn(E),A=a[x]=a[x]||[],O=E==null?0:typeof E=="string"?1:E.length,T=S>0,D=q(q({},k),{name:T?"".concat(x,"(virtual-from:").concat(k.name,")"):k.name,lowLevelIndex:k,isVirtual:T,keyTail:S,keyLength:O,extractKey:ki(E),unique:!T&&k.unique});if(A.push(D),D.isPrimaryKey||c.push(D),O>1){var N=O===2?E[0]:E.slice(0,O-1);l(N,S+1,k)}return A.sort(function(L,V){return L.keyTail-V.keyTail}),D}var p=l(o.primaryKey.keyPath,0,o.primaryKey);a[":id"]=[p];for(var h=0,g=o.indexes;h<g.length;h++){var b=g[h];l(b.keyPath,0,b)}function y(E){var S=a[gn(E)];return S&&S[0]}function w(E,S){return{type:E.type===1?2:E.type,lower:Qn(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,S),lowerOpen:!0,upper:Qn(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,S),upperOpen:!0}}function R(E){var S=E.query.index;return S.isVirtual?q(q({},E),{query:{index:S.lowLevelIndex,range:w(E.query.range,S.keyTail)}}):E}var _=q(q({},i),{schema:q(q({},o),{primaryKey:p,indexes:c,getIndexByKeyPath:y}),count:function(E){return i.count(R(E))},query:function(E){return i.query(R(E))},openCursor:function(E){var S=E.query.index,k=S.keyTail,x=S.isVirtual,A=S.keyLength;if(!x)return i.openCursor(E);function O(T){function D(L){L!=null?T.continue(Qn(L,E.reverse?e.MAX_KEY:e.MIN_KEY,k)):E.unique?T.continue(T.key.slice(0,A).concat(E.reverse?e.MIN_KEY:e.MAX_KEY,k)):T.continue()}var N=Object.create(T,{continue:{value:D},continuePrimaryKey:{value:function(L,V){T.continuePrimaryKey(Qn(L,e.MAX_KEY,k),V)}},primaryKey:{get:function(){return T.primaryKey}},key:{get:function(){var L=T.key;return A===1?L[0]:L.slice(0,A)}},value:{get:function(){return T.value}}});return N}return i.openCursor(R(E)).then(function(T){return T&&O(T)})}});return _}})}var xp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:kp};function zi(e,t,i,o){return i=i||{},o=o||"",pe(e).forEach(function(a){if(!Ae(t,a))i[o+a]=void 0;else{var c=e[a],l=t[a];if(typeof c=="object"&&typeof l=="object"&&c&&l){var p=mi(c),h=mi(l);p!==h?i[o+a]=t[a]:p==="Object"?zi(c,l,i,o+a+"."):c!==l&&(i[o+a]=t[a])}else c!==l&&(i[o+a]=t[a])}}),pe(t).forEach(function(a){Ae(e,a)||(i[o+a]=t[a])}),i}function Gi(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Tp={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return q(q({},e),{table:function(t){var i=e.table(t),o=i.schema.primaryKey,a=q(q({},i),{mutate:function(c){var l=H.trans,p=l.table(t).hook,h=p.deleting,g=p.creating,b=p.updating;switch(c.type){case"add":if(g.fire===oe)break;return l._promise("readwrite",function(){return y(c)},!0);case"put":if(g.fire===oe&&b.fire===oe)break;return l._promise("readwrite",function(){return y(c)},!0);case"delete":if(h.fire===oe)break;return l._promise("readwrite",function(){return y(c)},!0);case"deleteRange":if(h.fire===oe)break;return l._promise("readwrite",function(){return w(c)},!0)}return i.mutate(c);function y(_){var E=H.trans,S=_.keys||Gi(o,_);if(!S)throw new Error("Keys missing");return _=_.type==="add"||_.type==="put"?q(q({},_),{keys:S}):q({},_),_.type!=="delete"&&(_.values=sr([],_.values,!0)),_.keys&&(_.keys=sr([],_.keys,!0)),Ap(i,_,S).then(function(k){var x=S.map(function(A,O){var T=k[O],D={onerror:null,onsuccess:null};if(_.type==="delete")h.fire.call(D,A,T,E);else if(_.type==="add"||T===void 0){var N=g.fire.call(D,A,_.values[O],E);A==null&&N!=null&&(A=N,_.keys[O]=A,o.outbound||De(_.values[O],o.keyPath,A))}else{var L=zi(T,_.values[O]),V=b.fire.call(D,L,A,T,E);if(V){var U=_.values[O];Object.keys(V).forEach(function(K){Ae(U,K)?U[K]=V[K]:De(U,K,V[K])})}}return D});return i.mutate(_).then(function(A){for(var O=A.failures,T=A.results,D=A.numFailures,N=A.lastResult,L=0;L<S.length;++L){var V=T?T[L]:S[L],U=x[L];V==null?U.onerror&&U.onerror(O[L]):U.onsuccess&&U.onsuccess(_.type==="put"&&k[L]?_.values[L]:V)}return{failures:O,results:T,numFailures:D,lastResult:N}}).catch(function(A){return x.forEach(function(O){return O.onerror&&O.onerror(A)}),Promise.reject(A)})})}function w(_){return R(_.trans,_.range,1e4)}function R(_,E,S){return i.query({trans:_,values:!1,query:{index:o,range:E},limit:S}).then(function(k){var x=k.result;return y({type:"delete",keys:x,trans:_}).then(function(A){return A.numFailures>0?Promise.reject(A.failures[0]):x.length<S?{failures:[],numFailures:0,lastResult:void 0}:R(_,q(q({},E),{lower:x[x.length-1],lowerOpen:!0}),S)})})}}});return a}})}};function Ap(e,t,i){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:i,cache:"immutable"})}function Wa(e,t,i){try{if(!t||t.keys.length<e.length)return null;for(var o=[],a=0,c=0;a<t.keys.length&&c<e.length;++a)ne(t.keys[a],e[c])===0&&(o.push(i?kt(t.values[a]):t.values[a]),++c);return o.length===e.length?o:null}catch{return null}}var Op={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var i=e.table(t);return q(q({},i),{getMany:function(o){if(!o.cache)return i.getMany(o);var a=Wa(o.keys,o.trans._cache,o.cache==="clone");return a?M.resolve(a):i.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?kt(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),i.mutate(o)}})}}}};function Va(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function za(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Cp={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,i=new Te(e.MIN_KEY,e.MAX_KEY);return q(q({},e),{transaction:function(o,a,c){if(H.subscr&&a!=="readonly")throw new G.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(H.querier));return e.transaction(o,a,c)},table:function(o){var a=e.table(o),c=a.schema,l=c.primaryKey,p=c.indexes,h=l.extractKey,g=l.outbound,b=l.autoIncrement&&p.filter(function(_){return _.compound&&_.keyPath.includes(l.keyPath)}),y=q(q({},a),{mutate:function(_){var E=_.trans,S=_.mutatedParts||(_.mutatedParts={}),k=function(K){var B="idb://".concat(t,"/").concat(o,"/").concat(K);return S[B]||(S[B]=new Te)},x=k(""),A=k(":dels"),O=_.type,T=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Gi(l,_).filter(function(K){return K}),_.values]:[],D=T[0],N=T[1],L=_.trans._cache;if(ce(D)){x.addKeys(D);var V=O==="delete"||D.length===N.length?Wa(D,L):null;V||A.addKeys(D),(V||N)&&Rp(k,c,V,N)}else if(D){var U={from:D.lower,to:D.upper};A.add(U),x.add(U)}else x.add(i),A.add(i),c.indexes.forEach(function(K){return k(K.name).add(i)});return a.mutate(_).then(function(K){return D&&(_.type==="add"||_.type==="put")&&(x.addKeys(K.results),b&&b.forEach(function(B){var Y=_.values.map(function(z){return B.extractKey(z)}),ee=B.keyPath.findIndex(function(z){return z===l.keyPath});K.results.forEach(function(z){return Y[ee]=z}),k(B.name).addKeys(Y)})),E.mutatedParts=wr(E.mutatedParts||{},S),K})}}),w=function(_){var E,S,k=_.query,x=k.index,A=k.range;return[x,new Te((E=A.lower)!==null&&E!==void 0?E:e.MIN_KEY,(S=A.upper)!==null&&S!==void 0?S:e.MAX_KEY)]},R={get:function(_){return[l,new Te(_.key)]},getMany:function(_){return[l,new Te().addKeys(_.keys)]},count:w,query:w,openCursor:w};return pe(R).forEach(function(_){y[_]=function(E){var S=H.subscr,k=!!S,x=Va(H,a)&&za(_,E),A=x?E.obsSet={}:S;if(k){var O=function(K){var B="idb://".concat(t,"/").concat(o,"/").concat(K);return A[B]||(A[B]=new Te)},T=O(""),D=O(":dels"),N=R[_](E),L=N[0],V=N[1];if(_==="query"&&L.isPrimaryKey&&!E.values?D.add(V):O(L.name||"").add(V),!L.isPrimaryKey)if(_==="count")D.add(i);else{var U=_==="query"&&g&&E.values&&a.query(q(q({},E),{values:!1}));return a[_].apply(this,arguments).then(function(K){if(_==="query"){if(g&&E.values)return U.then(function(z){var ue=z.result;return T.addKeys(ue),K});var B=E.values?K.result.map(h):K.result;E.values?T.addKeys(B):D.addKeys(B)}else if(_==="openCursor"){var Y=K,ee=E.values;return Y&&Object.create(Y,{key:{get:function(){return D.addKey(Y.primaryKey),Y.key}},primaryKey:{get:function(){var z=Y.primaryKey;return D.addKey(z),z}},value:{get:function(){return ee&&T.addKey(Y.primaryKey),Y.value}}})}return K})}}return a[_].apply(this,arguments)}}),y}})}};function Rp(e,t,i,o){function a(c){var l=e(c.name||"");function p(g){return g!=null?c.extractKey(g):null}var h=function(g){return c.multiEntry&&ce(g)?g.forEach(function(b){return l.addKey(b)}):l.addKey(g)};(i||o).forEach(function(g,b){var y=i&&p(i[b]),w=o&&p(o[b]);ne(y,w)!==0&&(y!=null&&h(y),w!=null&&h(w))})}t.indexes.forEach(a)}function ga(e,t,i){if(i.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(i.numFailures===o)return null;var a=q({},t);return ce(a.keys)&&(a.keys=a.keys.filter(function(c,l){return!(l in i.failures)})),"values"in a&&ce(a.values)&&(a.values=a.values.filter(function(c,l){return!(l in i.failures)})),a}function Pp(e,t){return t.lower===void 0?!0:t.lowerOpen?ne(e,t.lower)>0:ne(e,t.lower)>=0}function Dp(e,t){return t.upper===void 0?!0:t.upperOpen?ne(e,t.upper)<0:ne(e,t.upper)<=0}function di(e,t){return Pp(e,t)&&Dp(e,t)}function ya(e,t,i,o,a,c){if(!i||i.length===0)return e;var l=t.query.index,p=l.multiEntry,h=t.query.range,g=o.schema.primaryKey,b=g.extractKey,y=l.extractKey,w=(l.lowLevelIndex||l).extractKey,R=i.reduce(function(_,E){var S=_,k=[];if(E.type==="add"||E.type==="put")for(var x=new Te,A=E.values.length-1;A>=0;--A){var O=E.values[A],T=b(O);if(!x.hasKey(T)){var D=y(O);(p&&ce(D)?D.some(function(U){return di(U,h)}):di(D,h))&&(x.addKey(T),k.push(O))}}switch(E.type){case"add":S=_.concat(t.values?k:k.map(function(U){return b(U)}));break;case"put":var N=new Te().addKeys(E.values.map(function(U){return b(U)}));S=_.filter(function(U){return!N.hasKey(t.values?b(U):U)}).concat(t.values?k:k.map(function(U){return b(U)}));break;case"delete":var L=new Te().addKeys(E.keys);S=_.filter(function(U){return!L.hasKey(t.values?b(U):U)});break;case"deleteRange":var V=E.range;S=_.filter(function(U){return!di(b(U),V)});break}return S},e);return R===e?e:(R.sort(function(_,E){return ne(w(_),w(E))||ne(b(_),b(E))}),t.limit&&t.limit<1/0&&(R.length>t.limit?R.length=t.limit:e.length===t.limit&&R.length<t.limit&&(a.dirty=!0)),c?Object.freeze(R):R)}function va(e,t){return ne(e.lower,t.lower)===0&&ne(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Np(e,t,i,o){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var a=ne(e,t);if(a===0){if(i&&o)return 0;if(i)return 1;if(o)return-1}return a}function Mp(e,t,i,o){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var a=ne(e,t);if(a===0){if(i&&o)return 0;if(i)return-1;if(o)return 1}return a}function Fp(e,t){return Np(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&Mp(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function $p(e,t,i,o){var a=It["idb://".concat(e,"/").concat(t)];if(!a)return[];var c=a.queries[i];if(!c)return[null,!1,a,null];var l=o.query?o.query.index.name:null,p=c[l||""];if(!p)return[null,!1,a,null];switch(i){case"query":var h=p.find(function(y){return y.req.limit===o.limit&&y.req.values===o.values&&va(y.req.query.range,o.query.range)});if(h)return[h,!0,a,p];var g=p.find(function(y){var w="limit"in y.req?y.req.limit:1/0;return w>=o.limit&&(o.values?y.req.values:!0)&&Fp(y.req.query.range,o.query.range)});return[g,!1,a,p];case"count":var b=p.find(function(y){return va(y.req.query.range,o.query.range)});return[b,!!b,a,p]}}function Lp(e,t,i,o){e.subscribers.add(i),o.addEventListener("abort",function(){e.subscribers.delete(i),e.subscribers.size===0&&Bp(e,t)})}function Bp(e,t){setTimeout(function(){e.subscribers.size===0&&_t(t,e)},3e3)}var jp={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,i=q(q({},e),{transaction:function(o,a,c){var l=e.transaction(o,a,c);if(a==="readwrite"){var p=new AbortController,h=p.signal,g=function(b){return function(){if(p.abort(),a==="readwrite"){for(var y=new Set,w=0,R=o;w<R.length;w++){var _=R[w],E=It["idb://".concat(t,"/").concat(_)];if(E){var S=e.table(_),k=E.optimisticOps.filter(function(ee){return ee.trans===l});if(l._explicit&&b&&l.mutatedParts)for(var x=0,A=Object.values(E.queries.query);x<A.length;x++)for(var O=A[x],T=0,D=O.slice();T<D.length;T++){var N=D[T];Wi(N.obsSet,l.mutatedParts)&&(_t(O,N),N.subscribers.forEach(function(ee){return y.add(ee)}))}else if(k.length>0){E.optimisticOps=E.optimisticOps.filter(function(ee){return ee.trans!==l});for(var L=0,V=Object.values(E.queries.query);L<V.length;L++)for(var O=V[L],U=0,K=O.slice();U<K.length;U++){var N=K[U];if(N.res!=null&&l.mutatedParts)if(b&&!N.dirty){var B=Object.isFrozen(N.res),Y=ya(N.res,N.req,k,S,N,B);N.dirty?(_t(O,N),N.subscribers.forEach(function(ue){return y.add(ue)})):Y!==N.res&&(N.res=Y,N.promise=M.resolve({result:Y}))}else N.dirty&&_t(O,N),N.subscribers.forEach(function(ue){return y.add(ue)})}}}}y.forEach(function(ee){return ee()})}}};l.addEventListener("abort",g(!1),{signal:h}),l.addEventListener("error",g(!1),{signal:h}),l.addEventListener("complete",g(!0),{signal:h})}return l},table:function(o){var a=e.table(o),c=a.schema.primaryKey,l=q(q({},a),{mutate:function(p){var h=H.trans;if(c.outbound||h.db._options.cache==="disabled"||h.explicit)return a.mutate(p);var g=It["idb://".concat(t,"/").concat(o)];if(!g)return a.mutate(p);var b=a.mutate(p);return(p.type==="add"||p.type==="put")&&(p.values.length>=50||Gi(c,p).some(function(y){return y==null}))?b.then(function(y){var w=q(q({},p),{values:p.values.map(function(_,E){var S,k=!((S=c.keyPath)===null||S===void 0)&&S.includes(".")?kt(_):q({},_);return De(k,c.keyPath,y.results[E]),k})}),R=ga(g,w,y);g.optimisticOps.push(R),queueMicrotask(function(){return p.mutatedParts&&Xn(p.mutatedParts)})}):(g.optimisticOps.push(p),p.mutatedParts&&Xn(p.mutatedParts),b.then(function(y){if(y.numFailures>0){_t(g.optimisticOps,p);var w=ga(g,p,y);w&&g.optimisticOps.push(w),p.mutatedParts&&Xn(p.mutatedParts)}}),b.catch(function(){_t(g.optimisticOps,p),p.mutatedParts&&Xn(p.mutatedParts)})),b},query:function(p){var h;if(!Va(H,a)||!za("query",p))return a.query(p);var g=((h=H.trans)===null||h===void 0?void 0:h.db._options.cache)==="immutable",b=H,y=b.requery,w=b.signal,R=$p(t,o,"query",p),_=R[0],E=R[1],S=R[2],k=R[3];if(_&&E)_.obsSet=p.obsSet;else{var x=a.query(p).then(function(A){var O=A.result;if(_&&(_.res=O),g){for(var T=0,D=O.length;T<D;++T)Object.freeze(O[T]);Object.freeze(O)}else A.result=kt(O);return A}).catch(function(A){return k&&_&&_t(k,_),Promise.reject(A)});_={obsSet:p.obsSet,promise:x,subscribers:new Set,type:"query",req:p,dirty:!1},k?k.push(_):(k=[_],S||(S=It["idb://".concat(t,"/").concat(o)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),S.queries.query[p.query.index.name||""]=k)}return Lp(_,k,y,w),_.promise.then(function(A){return{result:ya(A.result,p,S?.optimisticOps,a,_,g)}})}});return l}});return i}};function Zn(e,t){return new Proxy(e,{get:function(i,o,a){return o==="db"?t:Reflect.get(i,o,a)}})}var Ht=function(){function e(t,i){var o=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=i=q({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange};var c=i.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};l.dbReadyPromise=new M(function(h){l.dbReadyResolve=h}),l.openCanceller=new M(function(h,g){l.cancelOpen=g}),this._state=l,this.name=t,this.on=Sn(this,"populate","blocked","versionchange","close",{ready:[Di,oe]}),this.on.ready.subscribe=Ea(this.on.ready.subscribe,function(h){return function(g,b){e.vip(function(){var y=o._state;if(y.openComplete)y.dbOpenError||M.resolve().then(g),b&&h(g);else if(y.onReadyBeingFired)y.onReadyBeingFired.push(g),b&&h(g);else{h(g);var w=o;b||h(function R(){w.on.ready.unsubscribe(g),w.on.ready.unsubscribe(R)})}})}}),this.Collection=Gd(this),this.Table=Hd(this),this.Transaction=tp(this),this.Version=yp(this),this.WhereClause=Zd(this),this.on("versionchange",function(h){h.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request.")),o.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(o.name,"') was blocked")):console.warn("Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=bn(i.IDBKeyRange),this._createTransaction=function(h,g,b,y){return new o.Transaction(h,g,b,o._options.chromeTransactionDurability,y)},this._fireOnBlocked=function(h){o.on("blocked").fire(h),jt.filter(function(g){return g.name===o.name&&g!==o&&!g._state.vcFired}).map(function(g){return g.on("versionchange").fire(h)})},this.use(Op),this.use(jp),this.use(Cp),this.use(xp),this.use(Tp);var p=new Proxy(this,{get:function(h,g,b){if(g==="_vip")return!0;if(g==="table")return function(w){return Zn(o.table(w),p)};var y=Reflect.get(h,g,b);return y instanceof $a?Zn(y,p):g==="tables"?y.map(function(w){return Zn(w,p)}):g==="_createTransaction"?function(){var w=y.apply(this,arguments);return Zn(w,p)}:y}});this.vip=p,c.forEach(function(h){return h(o)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new G.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var i=this._versions,o=i.filter(function(a){return a._cfg.version===t})[0];return o||(o=new this.Version(t),i.push(o),i.sort(cp),o.stores({}),this._state.autoSchema=!1,o)},e.prototype._whenReady=function(t){var i=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?t():new M(function(o,a){if(i._state.openComplete)return a(new G.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen){a(new G.DatabaseClosed);return}i.open().catch(oe)}i._state.dbReadyPromise.then(o,a)}).then(t)},e.prototype.use=function(t){var i=t.stack,o=t.create,a=t.level,c=t.name;c&&this.unuse({stack:i,name:c});var l=this._middlewares[i]||(this._middlewares[i]=[]);return l.push({stack:i,create:o,level:a??10,name:c}),l.sort(function(p,h){return p.level-h.level}),this},e.prototype.unuse=function(t){var i=t.stack,o=t.name,a=t.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(c){return a?c.create!==a:o?c.name!==o:!1})),this},e.prototype.open=function(){var t=this;return Tt(st,function(){return Sp(t)})},e.prototype._close=function(){var t=this._state,i=jt.indexOf(this);if(i>=0&&jt.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new M(function(o){t.dbReadyResolve=o}),t.openCanceller=new M(function(o,a){t.cancelOpen=a}))},e.prototype.close=function(t){var i=t===void 0?{disableAutoOpen:!0}:t,o=i.disableAutoOpen,a=this._state;o?(a.isBeingOpened&&a.cancelOpen(new G.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new G.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},e.prototype.delete=function(t){var i=this;t===void 0&&(t={disableAutoOpen:!0});var o=arguments.length>0&&typeof arguments[0]!="object",a=this._state;return new M(function(c,l){var p=function(){i.close(t);var h=i._deps.indexedDB.deleteDatabase(i.name);h.onsuccess=ae(function(){bp(i._deps,i.name),c()}),h.onerror=He(l),h.onblocked=i._fireOnBlocked};if(o)throw new G.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(p):p()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return pe(this._allTables).map(function(i){return t._allTables[i]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Ip.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,i,o){var a=this,c=H.trans;(!c||c.db!==this||t.indexOf("!")!==-1)&&(c=null);var l=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var p,h;try{if(h=i.map(function(b){var y=b instanceof a.Table?b.name:b;if(typeof y!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return y}),t=="r"||t===ii)p=ii;else if(t=="rw"||t==oi)p=oi;else throw new G.InvalidArgument("Invalid transaction mode: "+t);if(c){if(c.mode===ii&&p===oi)if(l)c=null;else throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&h.forEach(function(b){if(c&&c.storeNames.indexOf(b)===-1)if(l)c=null;else throw new G.SubTransaction("Table "+b+" not included in parent transaction.")}),l&&c&&!c.active&&(c=null)}}catch(b){return c?c._promise(null,function(y,w){w(b)}):le(b)}var g=Ha.bind(null,this,p,h,c,o);return c?c._promise(p,g,"lock"):H.trans?Tt(H.transless,function(){return a._whenReady(g)}):this._whenReady(g)},e.prototype.table=function(t){if(!Ae(this._allTables,t))throw new G.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),Kp=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Up=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,i,o){return this._subscribe(!t||typeof t=="function"?{next:t,error:i,complete:o}:t)},e.prototype[Kp]=function(){return this},e}(),yr;try{yr={indexedDB:_e.indexedDB||_e.mozIndexedDB||_e.webkitIndexedDB||_e.msIndexedDB,IDBKeyRange:_e.IDBKeyRange||_e.webkitIDBKeyRange}}catch{yr={indexedDB:null,IDBKeyRange:null}}function Hp(e){var t=!1,i,o=new Up(function(a){var c=Ci(e);function l(k){var x=zt();try{c&&Yt();var A=ct(e,k);return c&&(A=A.finally(ut)),A}finally{x&&Gt()}}var p=!1,h,g={},b={},y={get closed(){return p},unsubscribe:function(){p||(p=!0,h&&h.abort(),w&&ft.storagemutated.unsubscribe(E))}};a.start&&a.start(y);var w=!1,R=function(){return ri(S)};function _(){return Wi(b,g)}var E=function(k){wr(g,k),_()&&R()},S=function(){if(!(p||!yr.indexedDB)){g={};var k={};h&&h.abort(),h=new AbortController;var x={subscr:k,signal:h.signal,requery:R,querier:e,trans:null},A=l(x);Promise.resolve(A).then(function(O){t=!0,i=O,!(p||x.signal.aborted)&&(g={},b=k,!gd(b)&&!w&&(ft(kn,E),w=!0),ri(function(){return!p&&a.next&&a.next(O)}))},function(O){t=!1,["DatabaseClosedError","AbortError"].includes(O?.name)||p||ri(function(){p||a.error&&a.error(O)})})}};return setTimeout(R,0),y});return o.hasValue=function(){return t},o.getValue=function(){return i},o}var bt=Ht;Ut(bt,q(q({},_r),{delete:function(e){var t=new bt(e,{addons:[]});return t.delete()},exists:function(e){return new bt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return vp(bt.dependencies).then(e)}catch{return le(new G.MissingAPI)}},defineClass:function(){function e(t){Ne(this,t)}return e},ignoreTransaction:function(e){return H.trans?Tt(H.transless,e):e()},vip:Ti,async:function(e){return function(){try{var t=Ai(e.apply(this,arguments));return!t||typeof t.then!="function"?M.resolve(t):t}catch(i){return le(i)}}},spawn:function(e,t,i){try{var o=Ai(e.apply(i,t||[]));return!o||typeof o.then!="function"?M.resolve(o):o}catch(a){return le(a)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(e,t){var i=M.resolve(typeof e=="function"?bt.ignoreTransaction(e):e).timeout(t||6e4);return H.trans?H.trans.waitFor(i):i},Promise:M,debug:{get:function(){return We},set:function(e){Oa(e)}},derive:Wt,extend:Ne,props:Ut,override:Ea,Events:Sn,on:ft,liveQuery:Hp,extendObservabilitySet:wr,getByKeyPath:Ze,setByKeyPath:De,delByKeyPath:pd,shallowClone:Sa,deepClone:kt,getObjectDiff:zi,cmp:ne,asap:wa,minKey:wi,addons:[],connections:jt,errnames:Pi,dependencies:yr,cache:It,semVer:aa,version:aa.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,i){return e+t/Math.pow(10,i*2)})}));bt.maxKey=bn(bt.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ft(kn,function(e){if(!ot){var t;t=new CustomEvent(Si,{detail:e}),ot=!0,dispatchEvent(t),ot=!1}}),addEventListener(Si,function(e){var t=e.detail;ot||Yi(t)}));function Yi(e){var t=ot;try{ot=!0,ft.storagemutated.fire(e),Vi(e,!0)}finally{ot=t}}var ot=!1,it,Oi=function(){};typeof BroadcastChannel<"u"&&(Oi=function(){it=new BroadcastChannel(Si),it.onmessage=function(e){return e.data&&Yi(e.data)}},Oi(),typeof it.unref=="function"&&it.unref(),ft(kn,function(e){ot||it.postMessage(e)}));typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ht.disableBfCache&&e.persisted){We&&console.debug("Dexie: handling persisted pagehide"),it?.close();for(var t=0,i=jt;t<i.length;t++){var o=i[t];o.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!Ht.disableBfCache&&e.persisted&&(We&&console.debug("Dexie: handling persisted pageshow"),Oi(),Yi({all:new Te(-1/0,[[]])}))}));M.rejectionMapper=wd;Oa(We);var qi=class{getDB(){let t=new Ht("FireShotDB");return t.version(1).stores({captures:`
              ++id,
              time,
              url,
              title`,tiles:"++id, parentId"}),t}async createNewEntry(){return await this.getDB().captures.add({time:0})}async addTile(t,i){await this.getDB().tiles.add({parentId:t,blob:i})}async commitEntry(t,i,o,a,c){await this.getDB().captures.update(t,{time:i,url:o,title:a,metadata:c})}async cleanup(){X()("DB cleanup...");let i=await this.getDB().captures.where("time").equals(0).primaryKeys();await this.deleteCaptures(i)}async deleteCaptures(t){let i=this.getDB();await i.tiles.where("parentId").anyOf(t).delete(),await i.captures.bulkDelete(t)}async deleteOlderThanGivenDays(t){X()("Performing database cleanup...");let i=this.getDB(),o=new Date;o.setDate(o.getDate()-t);let a=await i.captures.where("time").below(o).primaryKeys();a.length>0?(console.log(`Removing ${a.length} items`),await this.deleteCaptures(a)):X()("Nothing to do.")}async getCapture(t){try{let i=this.getDB();return{...await i.captures.get(t),tiles:(await i.tiles.where("parentId").equals(t).sortBy("id")).map(o=>o.blob)}}catch(i){return console.error(i),null}}async getAllCaptures(){return await this.getDB().captures.toArray()}},Ga=new qi;function Ya(){Mt()?(yt()?chrome.windows:chrome.tabs).create({url:"fsNativeInstall.html"}):Wp()}function Wp(){Z(C.i,"true"),Re||Vp()}function Vp(){window.open("https://getfireshot.com/beta-pro.php?browser="+Ys())}zs();document.addEventListener("DOMContentLoaded",()=>{let e,t,i,o={loadSettings:function(){$("#edtDefaultFolder").val(Q(C.V,C.ae)),i=Q(C.C,30),$("#cmbRetainHistory").val(i),$("#chkOpenFolder").prop("checked",Q(C.z,"false")==="true"),$("#chkDoNotShowSaveAsDialog").prop("checked",Q(C.G,"false")==="true"),$("#chkCloseTab").prop("checked",Q(C.Y,"false")==="true"),$("#edtFilenameTemplate").val(Q(C.e,"")===""?C.A:Q(C.e,"")),$("#edtTemplateNumber").val(Q(C.t,1)),$("#chkTemplateNumberPad").prop("checked",Q(C.o,"true")==="true"),$("#edtTemplateNumberPad").val(Q(C.a,3)),$("#edtPageScrollingSpeed").val(Q(C.K,100)),$("#edtDelayScreenshot").val(Q(C.W,5));let h=Q(C.X,"png")==="png";$("#radImagePNG").prop("checked",h),$("#radImageJPG").prop("checked",!h),$("#edtTemplateFilenameMaxLen").val(Q(C.c,100)),$("#chkContextMenuIntegration").prop("checked",Q(C.k,"true")==="true"),$("#chkGoogleAnalytics").prop("checked",Q(C.H,"true")==="true"),$("#chkErrorReporting").prop("checked",Q(C.S,"true")==="true"),$("#chkNotifyOnUpdatesForRegistered").prop("checked",Q(C.I,"false")==="true"),$("#chkAPI").prop("checked",Q(C.f,"false")==="true"),$("#chkOpenNewNextToSourceTab").prop("checked",Q(C.T,"false")==="true"),e&&($("#chkAllowInfiniteScrolling").prop("checked",Q(C.U,"true")==="true"),$("#chkCaptureAllTabsVisiblePart").prop("checked",Q(C.j,"false")==="true"))},saveSettings:function(){return new Promise(h=>{Z(C.e,$("#edtFilenameTemplate").val()),Z(C.C,$("#cmbRetainHistory").val()),Z(C.t,Math.max(1,parseInt(String($("#edtTemplateNumber").val())))),Z(C.o,$("#chkTemplateNumberPad").prop("checked")),Z(C.a,Math.max(0,parseInt(String($("#edtTemplateNumberPad").val())))),Z(C.X,$("#radImagePNG").prop("checked")?"png":"jpg"),Z(C.c,Math.max(10,parseInt(String($("#edtTemplateFilenameMaxLen").val())))),Z(C.K,Math.min(100,Math.max(1,parseInt(String($("#edtPageScrollingSpeed").val()))||100))),Z(C.W,Math.min(600,Math.max(1,parseInt(String($("#edtDelayScreenshot").val()))||5))),Z(C.V,$("#edtDefaultFolder").val()),Z(C.G,$("#chkDoNotShowSaveAsDialog").prop("checked")),Z(C.z,$("#chkOpenFolder").prop("checked")),Z(C.Y,$("#chkCloseTab").prop("checked")),Z(C.k,$("#chkContextMenuIntegration").prop("checked")),Z(C.H,$("#chkGoogleAnalytics").prop("checked")),Z(C.T,$("#chkOpenNewNextToSourceTab").prop("checked")),e&&(Z(C.U,$("#chkAllowInfiniteScrolling").prop("checked")),Z(C.j,$("#chkCaptureAllTabsVisiblePart").prop("checked"))),Z(C.S,$("#chkErrorReporting").prop("checked")),Z(C.I,$("#chkNotifyOnUpdatesForRegistered").prop("checked")),na(),$("#chkAPI").prop("checked")?ta(async()=>{let g=await zn(!0);Z(C.f,g),g||alert("WARNING: FireShot API failed to init"),h()},()=>{alert("WARNING: FireShot API is NOT enabled"),Z(C.f,!1),zn(!1),$("#chkAPI").prop("checked",!1),h()}):(Z(C.f,!1),zn(!1),h())})}};function a(){let h=un(),g=yt(),b=Mt(),y=Q(C.g)==="true",w=new URLSearchParams(window.location.search).get("extras")==="1";$(".native").toggle(t),$(".lite").toggle(!t),$(".lite-or-extra").toggle(!t||w),$(".pro").toggle(e),$(".shownInNonPro").toggle(!e),$("#fsPro").toggle(!t&&b),$("[rel='hiddenInWindows']").toggle(!b),$("[rel='hiddenInSafari']").toggle(!h),$("[rel='shownInFirefox']").toggle(g),$("[rel='hiddenInFirefox']").toggle(!g),y?$("#trLicensingInfo").hide():$("#notifyOnUpdatesForRegistered").hide(),chrome.runtime.id=="hpbicldbpgipcloiojdbchegbbjiobbm"&&$("#trFSAPI").hide(),e||($("#chkAllowInfiniteScrolling").prop("disabled",!0),$("#chkCaptureAllTabsVisiblePart").prop("disabled",!0).prop("checked",!0),$("#chkAllowInfiniteScrolling").prop("checked",!1)),t&&!w&&($("#btnTemplateSettings").toggle(),$("#divTemplateSettings").toggle())}function c(){let h=/(:)|(\.\.(\\|\/))/.test(String($("#edtDefaultFolder").val()));document.getElementById("spnComment").style.color=h?"#f00":"#666"}async function l(){let h=Q(C.C,30);i!==h&&(await Ga.deleteOlderThanGivenDays(h),i=h)}function p(){$("#btnLicenseInfo").click(()=>{Gn().enterLicense()}),$("#btnCapSettings").click(()=>{Gn().openCaptureSettings()}),$("#btnGeneralOptions").click(()=>{Gn().openSettings()}),$("#btnApply").click(async()=>{await o.saveSettings(),await l()}),$("#btnSave").click(async()=>{await o.saveSettings(),await l(),window.close()}),$("#btnTemplateSettings").click(async()=>{$("#btnTemplateSettings").toggle(),$("#divTemplateSettings").toggle()}),$("#btnPDFSettings").click(()=>document.location="/fsPDFSettings.html"),$("#btnTemplateSettingsHide").click(()=>{$("#btnTemplateSettings").toggle(),$("#divTemplateSettings").toggle()}),$("#btnAdvancedFunctions, #lnkActivatePro").click(()=>{Ya(),window.location.reload()}),$("#btnConfigureHotkeys").click(()=>{ni(Vn()?"edge://extensions/shortcuts":"chrome://extensions/configureCommands")}),$("#edtDefaultFolder").change(c),$("#edtDefaultFolder").keydown(()=>{setTimeout(c,100)}),$("#btnEraseDB").click(()=>{confirm(chrome.i18n.getMessage("options_history_confirm_erase"))&&window.indexedDB.deleteDatabase("FireShotDB")})}gt.ensureLoaded().then(()=>{try{Qs()}catch(h){ln(h.message)}t=fn(),e=ea(),p(),a(),o.loadSettings(),c()})});})();
//# sourceMappingURL=fsOptions.js.map

//# debugId=16d4182f-4fb1-57e7-b52c-b17381576450
